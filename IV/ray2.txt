void main()
{
    l_U98 = -1;
    l_U110 = 0;
    l_U111 = 1;
    l_U112 = 3;
    l_U114 = 0;
    l_U131 = -1;
    l_U135 = 0;
    l_U136 = 1;
    l_U137 = 1;
    l_U145 = 150.00000000;
    l_U235 = 0;
    l_U236 = 150.00000000;
    l_U286 = 0;
    l_U557 = 0;
    l_U577 = 0;
    l_U580 = 0;
    l_U581 = 0;
    l_U582 = 0;
    l_U583 = 0;
    l_U584 = 0;
    l_U585 = 0;
    l_U586 = 0;
    l_U587 = 0;
    l_U588 = 0;
    l_U589 = 0;
    l_U590 = 1;
    l_U591 = 0;
    l_U592 = 0;
    l_U593 = 0;
    l_U594 = 0;
    l_U595 = 0;
    l_U596 = 0;
    l_U597 = 0;
    l_U598 = 0;
    l_U599 = 0;
    l_U600 = 0;
    l_U601 = 0;
    l_U602 = 0;
    l_U603 = 1;
    l_U604 = 1;
    l_U605 = 0;
    l_U606 = 0;
    l_U607 = 0;
    l_U608 = 0;
    l_U609 = 0;
    l_U610 = 0;
    l_U611 = 0;
    l_U612 = 0;
    l_U613 = 0;
    l_U614 = 0;
    l_U615 = 0;
    l_U616 = 1;
    l_U617 = 0;
    l_U618 = 0;
    l_U619 = 0;
    l_U620 = 0;
    l_U621 = 0;
    l_U622 = 0;
    l_U623 = 0;
    l_U624 = 0;
    l_U625 = 0;
    l_U626 = 0;
    l_U627 = 0;
    l_U628 = 0;
    l_U629 = 0;
    l_U630 = 0;
    l_U631 = 0;
    l_U632 = 0;
    l_U633 = 0;
    l_U634 = 0;
    l_U635 = 0;
    l_U636 = 0;
    l_U637 = 1;
    l_U638 = 0;
    l_U639 = 0;
    l_U640 = 0;
    l_U641 = 0;
    l_U642 = 0;
    l_U643 = 0;
    l_U644 = 0;
    l_U645 = 0;
    l_U646 = 0;
    l_U647 = 0;
    l_U648 = 0;
    l_U649 = 0;
    l_U650 = 0;
    l_U651 = 0;
    l_U652 = 0;
    l_U653 = 0;
    l_U654 = 0;
    l_U655 = 0;
    l_U656 = 0;
    l_U657 = 0;
    l_U658 = 0;
    l_U659 = 0;
    l_U660 = 0;
    l_U661 = 0;
    l_U662 = 0;
    l_U663 = 0;
    l_U664 = 0;
    l_U666 = 0;
    l_U667 = 2;
    l_U668 = 0;
    l_U669 = 0;
    l_U670 = 0;
    l_U671 = 0;
    l_U681 = 1917016601;
    l_U682 = 1348744438;
    l_U683 = -681942840;
    l_U684 = 1384833284;
    l_U685 = -1014976873;
    l_U686 = 64730935;
    l_U687 = 91692745;
    l_U697 = nil;
    l_U704 = {-94.91290000, -244.21420000, 13.65810000};
    l_U707 = {185.99100000, -305.80100000, 13.24800000};
    l_U710 = {-299.78800000, -45.86200000, 16.74900000};
    l_U713 = {357.88000000, -395.97000000, 6.83400000};
    l_U716 = {161.98240000, -310.72930000, 14.15660000};
    l_U719 = {-321.12150000, -47.43210000, 14.51500000};
    l_U722 = {358.48110000, -418.21390000, 4.54370000};
    l_U725 = {-91.67881000, -250.79660000, 13.45870000};
    l_U728 = {-93.34530000, -244.41890000, 12.64850000};
    l_U731 = {-94.30200000, -245.83200000, 12.61030000};
    l_U734 = {-91.82200000, -244.23340000, 12.67660000};
    l_U737 = {-368.67710000, 237.14330000, 14.31320000};
    l_U740 = {356.25250000, -395.09710000, 3.66950000};
    l_U743 = {178.58210000, -298.99760000, 11.37510000};
    l_U746 = {176.54560000, -298.37440000, 11.57690000};
    l_U749 = {-306.83760000, -39.02170000, 13.65080000};
    l_U752 = {-308.21510000, -38.85170000, 13.63050000};
    l_U767 = {1.24800000, -5.50000000, 0.24000000};
    l_U770 = {-1.24800000, -5.50000000, 0.24000000};
    l_U773 = {-1.24800000, -5.70000000, 0.23600000};
    l_U776 = {0.00000000, 0.00000000, 0.00000000};
    l_U779 = {0.00000000, 0.00000000, 0.00000000};
    l_U782 = {0.41000000, 0.26500000, 0.01000000};
    l_U785 = {3.20000000, 1.80000000, -0.20000000};
    l_U800 = {142.46000000, -328.51000000, -10.00000000};
    l_U803 = {221.72820000, -294.23770000, 100.00000000};
    l_U806 = {-386.39920000, -179.92780000, -10.00000000};
    l_U809 = {-184.98550000, -23.69550000, 100.00000000};
    l_U812 = 0.00000000;
    l_U813 = 53.37430000;
    l_U814 = 41.17000000;
    l_U815 = 11.46820000;
    l_U816 = 180.00000000;
    l_U817 = 290.56470000;
    l_U818 = 272.24500000;
    l_U819 = 0.00000000;
    l_U820 = 0.00000000;
    l_U821 = 0.00000000;
    l_U822 = 0.00000000;
    l_U823 = 8.00000000;
    l_U824 = 0.00000000;
    l_U837 = 14;
    l_U848 = 1;
    l_U852 = -1;
    l_U853 = 0;
    l_U854 = 0;
    l_U855 = 0;
    l_U856 = 0;
    l_U857 = 0;
    l_U858 = 0;
    l_U871 = "MISSRAY2";
    if (HAS_DEATHARREST_EXECUTED())
    {
        sub_1576();
        sub_3686();
    }
    sub_4675();
    while (l_U590)
    {
        WAIT( 0 );
        g_U9890 = 1;
        g_U9077 = 0;
        sub_10387();
        if ((l_U578 <= 10) AND ((l_U588 == 0) AND (sub_10473())))
        {
            sub_10625( 2 );
        }
        else if ((l_U605) AND ((l_U578 > 1) AND ((l_U578 < 10) AND ((l_U588 == 0) AND (sub_12102( l_U678 ))))))
        {
            sub_10625( 5 );
        }
        else if ((NOT (l_U578 == 1)) AND ((l_U578 <= 10) AND ((l_U588 == 0) AND (NOT sub_12341()))))
        {
            if (NOT (l_U578 == 0))
            {
                sub_10625( 3 );
            }
            else
            {
                sub_10625( 4 );
            }
        }
        else if (NOT (IS_CHAR_INJURED( l_U672 )))
        {
            BLOCK_CHAR_AMBIENT_ANIMS( l_U672, 1 );
        }
        if ((IS_PLAYER_SCRIPT_CONTROL_ON( sub_7251() )) AND (l_U578 < 8))
        {
            sub_12536();
        }
        switch (l_U578)
        {
            case 0:
            sub_13433();
            break;
            case 1:
            sub_14355();
            break;
            case 4:
            sub_16095();
            break;
            case 2:
            sub_17464();
            break;
            case 3:
            sub_19442();
            break;
            case 5:
            sub_20040( 1, l_U707 );
            break;
            case 6:
            sub_23148();
            break;
            case 7:
            sub_20040( 2, l_U710 );
            break;
            case 8:
            sub_24548();
            break;
            case 9:
            sub_28268();
            break;
            case 10:
            sub_32348();
            break;
            case 13:
            sub_35727();
            break;
            case 11:
            sub_49577();
            break;
            case 12:
            sub_53432();
            break;
            default: break;
        };;;;
        if (IS_VEH_DRIVEABLE( l_U678 ))
        {
            sub_54724();
        }
        if ((NOT (l_U578 == 0)) AND ((NOT (l_U578 == 1)) AND ((NOT (l_U578 == 8)) AND (l_U578 < 10))))
        {
            if (NOT (l_U578 == 12))
            {
                sub_55639();
                sub_56252();
                if ((l_U664 == 2) AND (l_U616))
                {
                    sub_63783();
                }
            }
            if ((DOES_OBJECT_EXIST( l_U692 )) AND (l_U595))
            {
                sub_64137( ref l_U692, 1 );
            }
            if ((DOES_OBJECT_EXIST( l_U693 )) AND (l_U596))
            {
                sub_64137( ref l_U693, 2 );
            }
            if ((DOES_OBJECT_EXIST( l_U694 )) AND (l_U597))
            {
                sub_64137( ref l_U694, 3 );
            }
            if ((DOES_OBJECT_EXIST( l_U695 )) AND (l_U598))
            {
                sub_64137( ref l_U695, 4 );
            }
            sub_53441();
        }
    }
    return;
}

void sub_1576()
{
    sub_1585();
    return;
}

void sub_1585()
{
    int iVar2;

    iVar2 = 14;
    sub_1599( iVar2 );
    sub_2775( iVar2 );
    return;
}

void sub_1599(unknown uParam0)
{
    int iVar3;
    boolean bVar4;
    unknown uVar5;

    iVar3 = g_U13391[uParam0]._fU0._fU56;
    bVar4 = iVar3 == 6;
    if (g_U813)
    {
        sub_1643();
        sub_1804();
    }
    else if (NOT g_U10981[uParam0]._fU12)
    {
        if (NOT bVar4)
        {
            sub_1912();
            sub_1951();
        }
    }
    sub_2027();
    sub_2128();
    uVar5 = sub_2241( uParam0 );
    sub_2682( uVar5, 0 );
    return;
}

void sub_1643()
{
    sub_1657( g_U9931 );
    if (NOT g_U9893._fU24)
    {
        sub_1757();
    }
    return;
}

void sub_1657(int iParam0)
{
    int iVar3;

    if (g_U0)
    {
        return;
    }
    if (iParam0 == -1)
    {
        return;
    }
    iVar3 = g_U26758[iParam0]._fU100;
    iVar3--;
    g_U26758[iParam0]._fU100 = iVar3;
    DECREMENT_INT_STAT( 255, 1 );
    return;
}

void sub_1757()
{
    if (g_U0)
    {
        return;
    }
    DECREMENT_INT_STAT( 256, 1 );
    return;
}

void sub_1804()
{
    sub_1813();
    return;
}

void sub_1813()
{
    if (COMPARE_STRING( ref g_U9926, "" ))
    {
        return;
    }
    PLAYSTATS_MISSION_CANCELLED( ref g_U9926 );
    StrCopy( ref g_U9926, "", 16 );
    return;
}

void sub_1912()
{
    if (g_U0)
    {
        return;
    }
    INCREMENT_INT_STAT_NO_MESSAGE( 254, 1 );
    return;
}

void sub_1951()
{
    sub_1960();
    return;
}

void sub_1960()
{
    if (COMPARE_STRING( ref g_U9926, "" ))
    {
        return;
    }
    PLAYSTATS_MISSION_FAILED( ref g_U9926 );
    StrCopy( ref g_U9926, "", 16 );
    return;
}

void sub_2027()
{
    int I;

    I = 0;
    for ( I = 0; I < 28; I++ )
    {
        if (g_U10981[I]._fU144._fU36)
        {
            g_U10981[I]._fU28 = 1;
        }
        g_U10981[I]._fU144._fU36 = 0;
    }
    return;
}

void sub_2128()
{
    int iVar2;
    int iVar3;

    iVar2 = 0;
    GET_GAME_TIMER( ref iVar2 );
    iVar3 = iVar2 + sub_2150();
    if (iVar3 > g_U63988._fU4)
    {
        g_U63988._fU4 = iVar3;
        g_U63988._fU8 = iVar2;
    }
    return;
}

int sub_2150()
{
    if (g_U15654[8])
    {
        return 27000;
    }
    return 15000;
}

int sub_2241(unknown uParam0)
{
    switch (uParam0)
    {
        case 0: return 0;
        case 1: return 1;
        case 2: return 2;
        case 3: return 3;
        case 4: return 4;
        case 5: return 5;
        case 6: return 6;
        case 7: return 7;
        case 8: return 8;
        case 9: return 9;
        case 10: return 10;
        case 11: return 11;
        case 12: return 12;
        case 13: return 13;
        case 14: return 14;
        case 15: return 15;
        case 16: return 16;
        case 17: return 17;
        case 18: return 18;
        case 19: return 19;
        case 20: return 22;
        case 21: return 20;
        case 22: return 21;
    }
    PRINTSTRING( "UNKNOWN STRAND ID: " );
    PRINTINT( uParam0 );
    PRINTNL();
    sub_2640( "Flow_public: Return_Contact_From_Strand(): Unknown strand" );
    return 57;
}

void sub_2640(unknown uParam0)
{
    SCRIPT_ASSERT( uParam0 );
    return;
}

void sub_2682(int iParam0, boolean bParam1)
{
    int iVar4;

    if (NOT (iParam0 < 57))
    {
        return;
    }
    iVar4 = 0;
    GET_GAME_TIMER( ref iVar4 );
    g_U26671[iParam0] = iVar4;
    if (bParam1)
    {
        g_U26671[iParam0] += 30000;
    }
    return;
}

void sub_2775(int iParam0)
{
    int iVar3;
    boolean bVar4;

    sub_2784();
    if (g_U0)
    {
        return;
    }
    if (g_U91._fU40 == 0)
    {
        return;
    }
    if (NOT g_U10978)
    {
        return;
    }
    iVar3 = g_U13391[iParam0]._fU0._fU56;
    bVar4 = iVar3 == 6;
    if (bVar4)
    {
        return;
    }
    if (g_U10981[iParam0]._fU12)
    {
        return;
    }
    if (g_U9893._fU40 == -1)
    {
        return;
    }
    if (NOT (g_U9893._fU40 == iParam0))
    {
        return;
    }
    if (NOT g_U813)
    {
        sub_3559();
        g_U9893._fU4 = 1;
    }
    return;
}

void sub_2784()
{
    int I;

    for ( I = 0; I <= (g_U569 - 1); I++ )
    {
        if ((g_U569[I]._fU20) AND ((sub_2822( 5, g_U569[I] )) == 1))
        {
            if ((sub_2822( 1, g_U569[I] )) != 0)
            {
                sub_3108( I );
            }
        }
    }
    if (NOT sub_3274())
    {
        SET_MESSAGES_WAITING( 0 );
        g_U91._fU404 = 1000;
    }
    if (g_U91._fU0 == 1014)
    {
        g_U91._fU92 = 1;
    }
    return;
}

int sub_2822(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6)
{
    switch (uParam0)
    {
        case 0:
        return GET_BITS_IN_RANGE( uParam1._fU0[1], 14, 23 );
        break;
        case 1:
        return GET_BITS_IN_RANGE( uParam1._fU0[0], 0, 13 );
        break;
        case 2:
        return GET_BITS_IN_RANGE( uParam1._fU0[0], 14, 27 );
        break;
        case 3:
        return GET_BITS_IN_RANGE( uParam1._fU0[1], 0, 13 );
        break;
        case 4:
        return GET_BITS_IN_RANGE( uParam1._fU0[1], 24, 27 );
        break;
        case 5:
        return GET_BITS_IN_RANGE( uParam1._fU0[0], 28, 31 );
        break;
        case 6:
        return uParam1._fU0[2];
        break;
    }
    return -1;
}

void sub_3108(int iParam0)
{
    int I;

    if (iParam0 < (g_U569 - 1))
    {
        for ( I = iParam0 + 1; I <= (g_U569 - 1); I++ )
        {
            g_U569[I - 1] = {g_U569[I]};
        }
    }
    sub_3193( g_U569 - 1 );
    return;
}

void sub_3193(unknown uParam0)
{
    g_U569[uParam0]._fU0[0] = -1;
    g_U569[uParam0]._fU0[1] = -1;
    g_U569[uParam0]._fU0[2] = -1;
    return;
}

int sub_3274()
{
    int I;

    for ( I = 0; I <= (g_U569 - 1); I++ )
    {
        if ((sub_2822( 4, g_U569[I] )) == 0)
        {
            return 1;
        }
    }
    return 0;
}

void sub_3559()
{
    g_U9893._fU4 = 0;
    g_U9893._fU8 = 0;
    g_U9893._fU12 = 0;
    g_U9893._fU16 = 0;
    g_U9893._fU20 = 0;
    g_U9893._fU28 = 0;
    g_U9893._fU32 = 0;
    g_U9893._fU36 = 0;
    g_U9893._fU48 = 0;
    return;
}

void sub_3686()
{
    if (NOT (IS_CAR_DEAD( l_U678 )))
    {
        SET_CAN_BURST_CAR_TYRES( l_U678, 1 );
        SET_VEH_HAS_STRONG_AXLES( l_U678, 0 );
    }
    if (DOES_CHAR_EXIST( l_U672 ))
    {
        if (NOT (IS_CHAR_INJURED( l_U672 )))
        {
            CLEAR_CHAR_TASKS( l_U672 );
        }
        MARK_CHAR_AS_NO_LONGER_NEEDED( ref l_U672 );
    }
    if (DOES_CHAR_EXIST( l_U673 ))
    {
        if (NOT (IS_CHAR_INJURED( l_U673 )))
        {
            CLEAR_CHAR_TASKS( l_U673 );
        }
        MARK_CHAR_AS_NO_LONGER_NEEDED( ref l_U673 );
    }
    if (DOES_CHAR_EXIST( l_U674 ))
    {
        if (NOT (IS_CHAR_INJURED( l_U674 )))
        {
            CLEAR_CHAR_TASKS( l_U674 );
        }
        MARK_CHAR_AS_NO_LONGER_NEEDED( ref l_U674 );
    }
    if (DOES_VEHICLE_EXIST( l_U678 ))
    {
        MARK_CAR_AS_NO_LONGER_NEEDED( ref l_U678 );
    }
    if (DOES_VEHICLE_EXIST( l_U679 ))
    {
        MARK_CAR_AS_NO_LONGER_NEEDED( ref l_U679 );
    }
    if (DOES_CHAR_EXIST( l_U675[0] ))
    {
        MARK_CHAR_AS_NO_LONGER_NEEDED( ref l_U675[0] );
    }
    if (DOES_CHAR_EXIST( l_U675[1] ))
    {
        MARK_CHAR_AS_NO_LONGER_NEEDED( ref l_U675[1] );
    }
    DONT_SUPPRESS_CAR_MODEL( 1917016601 );
    SET_CAMERA_CONTROLS_DISABLED_WITH_PLAYER_CONTROLS( 1 );
    SWITCH_ROADS_BACK_TO_ORIGINAL( l_U800._fU0, l_U800._fU4, l_U800._fU8, l_U803._fU0, l_U803._fU4, l_U803._fU8 );
    SWITCH_ROADS_BACK_TO_ORIGINAL( l_U806._fU0, l_U806._fU4, l_U806._fU8, l_U809._fU0, l_U809._fU4, l_U809._fU8 );
    if (NOT (IS_CHAR_DEAD( sub_4155() )))
    {
        SET_CHAR_WILL_FLY_THROUGH_WINDSCREEN( sub_4155(), 1 );
    }
    sub_4222();
    sub_4418( ref l_U831, 1 );
    sub_4418( ref l_U825, 1 );
    SET_PED_DENSITY_MULTIPLIER( 1.00000000 );
    SET_CAR_DENSITY_MULTIPLIER( 1.00000000 );
    if (NOT g_U8361)
    {
        g_U8361 = 1;
    }
    if (g_U9890 == 1)
    {
        g_U9890 = 0;
        g_U9077 = 1;
    }
    if (l_U852 >= 0)
    {
        STOP_SOUND( l_U852 );
        RELEASE_SOUND_ID( l_U852 );
    }
    UNREGISTER_SCRIPT_WITH_AUDIO();
    TERMINATE_THIS_SCRIPT();
    return;
}

void sub_4155()
{
    unknown Result;

    GET_PLAYER_CHAR( CONVERT_INT_TO_PLAYERINDEX( GET_PLAYER_ID() ), ref Result );
    return Result;
}

void sub_4222()
{
    if (DOES_BLIP_EXIST( l_U698 ))
    {
        REMOVE_BLIP( l_U698 );
    }
    if (DOES_BLIP_EXIST( l_U699 ))
    {
        REMOVE_BLIP( l_U699 );
    }
    if (DOES_BLIP_EXIST( l_U700 ))
    {
        REMOVE_BLIP( l_U700 );
    }
    if (DOES_BLIP_EXIST( l_U701 ))
    {
        REMOVE_BLIP( l_U701 );
    }
    if (DOES_BLIP_EXIST( l_U702 ))
    {
        REMOVE_BLIP( l_U702 );
    }
    if (DOES_BLIP_EXIST( l_U703 ))
    {
        REMOVE_BLIP( l_U703 );
    }
    return;
}

void sub_4418(int iParam0, unknown uParam1)
{
    PRINTSTRING( "\n KILL SPEECH CALLED***************************************" );
    if (IS_SCRIPTED_CONVERSATION_ONGOING())
    {
        if (iParam0->_fU4 == g_U8393)
        {
            ABORT_SCRIPTED_CONVERSATION( uParam1 );
        }
    }
    return;
}

void sub_4675()
{
    unknown uVar2;
    int iVar3;

    SET_MISSION_FLAG( 1 );
    CLEAR_PRINTS();
    LOAD_ADDITIONAL_TEXT( "RB2AUD", 6 );
    if (NOT (IS_CHAR_DEAD( sub_4155() )))
    {
        l_U859 = GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 1 );
        if (l_U859 == 8)
        {
            SET_CHAR_COMPONENT_VARIATION( sub_4155(), 1, 0, 0 );
        }
    }
    if (g_U9893._fU24)
    {
        SET_CUTSCENE_EXTRA_ROOM_POS( -108.10000000, -265.90000000, 13.40000000 );
        START_CUTSCENE_NOW( "RB_2" );
        while (NOT HAS_CUTSCENE_LOADED())
        {
            WAIT( 0 );
        }
        while (NOT HAS_CUTSCENE_FINISHED())
        {
            WAIT( 0 );
        }
        CLEAR_NAMED_CUTSCENE( "RB_2" );
    }
    LOAD_ADDITIONAL_TEXT( "RAY2", 0 );
    REGISTER_SCRIPT_WITH_AUDIO( 1 );
    while (NOT (REQUEST_MISSION_AUDIO_BANK( "SCRIPT_MISSION\PICKUP_STOLEN_DIAMONDS" )))
    {
        WAIT( 0 );
    }
    l_U852 = GET_SOUND_ID();
    sub_5005( "RB2AUD" );
    sub_5124( 0, sub_4155(), "NIKO", 0 );
    SET_RELATIONSHIP( 5, 23, 0 );
    SET_RELATIONSHIP( 5, 0, 23 );
    REQUEST_MODEL( l_U681 );
    LOAD_ALL_OBJECTS_NOW();
    while (NOT (HAS_MODEL_LOADED( l_U681 )))
    {
        WAIT( 0 );
    }
    sub_5340( 1 );
    SWITCH_ROADS_OFF( 65410, 65289, -10, 65475, 65317, 100 );
    CLEAR_AREA( l_U725._fU0, l_U725._fU4, l_U725._fU8, 13.00000000, 1 );
    WAIT( 0 );
    CREATE_CAR( l_U681, l_U725._fU0, l_U725._fU4, l_U725._fU8, ref l_U678, 1 );
    SET_CAR_HEADING( l_U678, l_U812 );
    SET_LOAD_COLLISION_FOR_CAR_FLAG( l_U678, 1 );
    SET_NEEDS_TO_BE_HOTWIRED( l_U678, 0 );
    SET_CAN_BURST_CAR_TYRES( l_U678, 0 );
    SET_CAR_HEALTH( l_U678, 3000 );
    FREEZE_CAR_POSITION( l_U678, 1 );
    SUPPRESS_CAR_MODEL( 1917016601 );
    SET_CAR_IN_CUTSCENE( l_U678, 1 );
    SET_VEH_HAS_STRONG_AXLES( l_U678, 1 );
    l_U849[0] = 200;
    l_U849[1] = 800;
    REQUEST_ANIMS( l_U871 );
    while (NOT (HAVE_ANIMS_LOADED( l_U871 )))
    {
        WAIT( 0 );
    }
    ADD_BLIP_FOR_CAR( l_U678, ref l_U698 );
    SET_BLIP_AS_FRIENDLY( l_U698, 1 );
    SET_ROUTE( l_U698, 1 );
    sub_6797( ref l_U698, -102.99000000, -237.65000000, 13.19000000, 270.00000000 );
    l_U578 = 0;
    GET_PLAYERS_LAST_CAR_NO_SAVE( ref uVar2 );
    if (IS_VEH_DRIVEABLE( uVar2 ))
    {
        SET_CAR_AS_MISSION_CAR( uVar2 );
        GET_CAR_MODEL( uVar2, ref iVar3 );
        if (NOT (iVar3 == 1917016601))
        {
            if (LOCATE_CAR_2D( uVar2, -123.63790000, -256.57810000, 3.00000000, 3.00000000, 0 ))
            {
                CLEAR_AREA( -126.98480000, -261.27890000, 12.11580000, 10.00000000, 1 );
                SET_CAR_COORDINATES( uVar2, -126.98480000, -261.27890000, 12.11580000 );
                SET_CAR_HEADING( uVar2, 0.00000000 );
                SET_CAR_ON_GROUND_PROPERLY( uVar2 );
                WAIT( 1000 );
            }
        }
        else
        {
            DELETE_CAR( ref uVar2 );
        }
    }
    else if (DOES_VEHICLE_EXIST( uVar2 ))
    {
        DELETE_CAR( ref uVar2 );
    }
    if (NOT (IS_CHAR_DEAD( sub_4155() )))
    {
        LOAD_SCENE( -123.63790000, -256.57810000, 11.68540000 );
        CLEAR_AREA( -123.63790000, -256.57810000, 11.68540000, 3.00000000, 1 );
        SET_CHAR_COORDINATES( sub_4155(), -123.63790000, -256.57810000, 11.68540000 );
        SET_CHAR_HEADING( sub_4155(), 90 );
        SET_GAME_CAM_HEADING( 0.00000000 );
        WAIT( 1000 );
    }
    if (IS_VEH_DRIVEABLE( uVar2 ))
    {
        MARK_CAR_AS_NO_LONGER_NEEDED( ref uVar2 );
    }
    sub_7242();
    PRINT_NOW( "RAY2_01", 7500, 1 );
    DO_SCREEN_FADE_IN( 500 );
    if (NOT (IS_CHAR_DEAD( sub_4155() )))
    {
        SET_PLAYER_CONTROL( sub_7251(), 1 );
    }
    return;
}

void sub_5005(unknown uParam0)
{
    StrCopy( ref l_U0._fU0, uParam0, 16 );
    sub_5022();
    return;
}

void sub_5022()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        l_U0._fU16[I]._fU0 = nil;
        StrCopy( ref l_U0._fU16[I]._fU4, "", 32 );
        l_U0._fU344[I] = 0;
    }
    return;
}

void sub_5124(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    l_U0._fU16[uParam0]._fU0 = uParam1;
    StrCopy( ref l_U0._fU16[uParam0]._fU4, uParam2, 32 );
    if (NOT (IS_CHAR_INJURED( uParam1 )))
    {
        BLOCK_CHAR_AMBIENT_ANIMS( uParam1, uParam3 );
    }
    sub_5204( "\n PED NUMBER ", uParam0 );
    sub_5244( " ADDED WITH VOICE ", uParam2 );
    return;
}

void sub_5204(unknown uParam0, unknown uParam1)
{
    return;
}

void sub_5244(unknown uParam0, unknown uParam1)
{
    return;
}

void sub_5340(boolean bParam0)
{
    REQUEST_MODEL( l_U683 );
    REQUEST_MODEL( l_U684 );
    REQUEST_MODEL( l_U685 );
    LOAD_ALL_OBJECTS_NOW();
    while ((NOT (HAS_MODEL_LOADED( l_U685 ))) || ((NOT (HAS_MODEL_LOADED( l_U684 ))) || (NOT (HAS_MODEL_LOADED( l_U683 )))))
    {
        WAIT( 0 );
    }
    if (bParam0)
    {
        REQUEST_MODEL( -268530289 );
        while (NOT (HAS_MODEL_LOADED( -268530289 )))
        {
            WAIT( 0 );
        }
    }
    CREATE_CHAR( 26, l_U683, l_U731._fU0, l_U731._fU4, l_U731._fU8, ref l_U672, 1 );
    CREATE_CHAR( 26, l_U684, l_U734._fU0, l_U734._fU4, l_U734._fU8, ref l_U673, 1 );
    CREATE_CHAR( 26, l_U685, l_U728._fU0, l_U728._fU4, l_U728._fU8, ref l_U674, 1 );
    SET_CHAR_HEADING( l_U672, l_U814 );
    SET_CHAR_HEADING( l_U673, l_U815 );
    SET_CHAR_HEADING( l_U674, l_U813 );
    SET_CHAR_RELATIONSHIP_GROUP( l_U672, 0 );
    SET_CHAR_RELATIONSHIP_GROUP( l_U673, 0 );
    SET_CHAR_RELATIONSHIP_GROUP( l_U674, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U672, 1, 0, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U672, 2, 1, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U672, 3, 0, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U672, 5, 1, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U673, 1, 0, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U673, 2, 1, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U673, 5, 1, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U674, 1, 0, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U674, 2, 0, 0 );
    SET_CHAR_COMPONENT_VARIATION( l_U674, 5, 1, 0 );
    if (bParam0)
    {
        SET_CHAR_PROP_INDEX( l_U672, 0, 0 );
    }
    SET_CHAR_PROP_INDEX( l_U673, 0, 0 );
    SET_CHAR_PROP_INDEX( l_U674, 0, 0 );
    SET_PED_DIES_WHEN_INJURED( l_U672, 1 );
    SET_PED_DIES_WHEN_INJURED( l_U673, 1 );
    SET_PED_DIES_WHEN_INJURED( l_U674, 1 );
    SET_CHAR_KEEP_TASK( l_U672, 1 );
    SET_CHAR_KEEP_TASK( l_U673, 1 );
    SET_CHAR_KEEP_TASK( l_U674, 1 );
    SET_CHAR_WILL_FLY_THROUGH_WINDSCREEN( l_U672, 0 );
    if (NOT bParam0)
    {
        SET_CHAR_MAX_HEALTH( l_U672, 300 );
        SET_CHAR_MAX_HEALTH( l_U673, 500 );
        SET_CHAR_MAX_HEALTH( l_U674, 500 );
        SET_CHAR_HEALTH( l_U672, 300 );
        SET_CHAR_HEALTH( l_U673, 500 );
        SET_CHAR_HEALTH( l_U674, 500 );
        SET_CHAR_SUFFERS_CRITICAL_HITS( l_U672, 0 );
        SET_CHAR_SUFFERS_CRITICAL_HITS( l_U673, 0 );
        SET_CHAR_SUFFERS_CRITICAL_HITS( l_U674, 0 );
        SET_CHAR_NEVER_TARGETTED( l_U672, 1 );
        SET_CHAR_NEVER_TARGETTED( l_U673, 1 );
        SET_CHAR_NEVER_TARGETTED( l_U674, 1 );
        BLOCK_CHAR_AMBIENT_ANIMS( l_U672, 1 );
        SET_CHAR_GET_OUT_UPSIDE_DOWN_CAR( l_U672, 0 );
    }
    if (bParam0)
    {
        TASK_STAND_STILL( l_U672, -2 );
        TASK_STAND_STILL( l_U673, -2 );
        TASK_STAND_STILL( l_U674, -2 );
    }
    sub_5124( 1, l_U672, "LUCA", 0 );
    sub_5124( 2, l_U673, "TUNA", 0 );
    sub_5124( 3, l_U674, "JOHNNY", 0 );
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U672, 1 );
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U673, 1 );
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U674, 1 );
    if (bParam0)
    {
        CREATE_OBJECT( -268530289, l_U731._fU0, l_U731._fU4, l_U731._fU8 + 3, ref l_U696, 1 );
        ATTACH_OBJECT_TO_PED( l_U696, l_U672, 1232, 0, 0, 0, 0, 0, 0, 0 );
    }
    return;
}

void sub_6797(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (DOES_BLIP_EXIST( (uParam0^) ))
    {
        g_U2220 = (uParam0^);
        g_U2235 = {uParam1};
        g_U2233 = uParam4;
    }
    return;
}

void sub_7242()
{
    if (IS_PLAYER_PLAYING( sub_7251() ))
    {
        sub_7300( ref l_U873._fU0 );
        sub_8430( ref l_U873._fU4 );
        sub_9157( ref l_U873._fU8 );
        sub_9758( ref l_U873._fU12 );
        sub_10055( ref l_U873._fU16 );
        l_U873._fU20 = -1;
        l_U873._fU24 = -1;
    }
    return;
}

void sub_7251()
{
    return CONVERT_INT_TO_PLAYERINDEX( GET_PLAYER_ID() );
}

void sub_7300(unknown uParam0)
{
    int iVar3;
    int iVar4;
    int I;
    int iVar6;
    int iVar7;
    boolean bVar8;

    iVar3 = GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 1 );
    iVar4 = GET_CHAR_TEXTURE_VARIATION( sub_4155(), 1 );
    bVar8 = false;
    for ( I = 0; I < 45; I++ )
    {
        if (NOT bVar8)
        {
            sub_7370( I, ref iVar6, ref iVar7 );
            if ((iVar7 == iVar4) AND (iVar6 == iVar3))
            {
                (uParam0^) = I;
                bVar8 = true;
            }
        }
    }
    if (NOT bVar8)
    {
        (uParam0^) = 45;
    }
    return;
}

void sub_7370(unknown uParam0, unknown uParam1, unknown uParam2)
{
    switch (uParam0)
    {
        case 0:
        (uParam1^) = 0;
        (uParam2^) = 0;
        break;
        case 1:
        (uParam1^) = 0;
        (uParam2^) = 1;
        break;
        case 2:
        (uParam1^) = 0;
        (uParam2^) = 2;
        break;
        case 15:
        (uParam1^) = 1;
        (uParam2^) = 0;
        break;
        case 16:
        (uParam1^) = 1;
        (uParam2^) = 1;
        break;
        case 17:
        (uParam1^) = 1;
        (uParam2^) = 2;
        break;
        case 3:
        (uParam1^) = 2;
        (uParam2^) = 0;
        break;
        case 4:
        (uParam1^) = 2;
        (uParam2^) = 1;
        break;
        case 5:
        (uParam1^) = 2;
        (uParam2^) = 2;
        break;
        case 6:
        (uParam1^) = 3;
        (uParam2^) = 0;
        break;
        case 7:
        (uParam1^) = 3;
        (uParam2^) = 1;
        break;
        case 8:
        (uParam1^) = 3;
        (uParam2^) = 2;
        break;
        case 18:
        (uParam1^) = 4;
        (uParam2^) = 0;
        break;
        case 19:
        (uParam1^) = 4;
        (uParam2^) = 1;
        break;
        case 20:
        (uParam1^) = 4;
        (uParam2^) = 2;
        break;
        case 28:
        (uParam1^) = 5;
        (uParam2^) = 0;
        break;
        case 29:
        (uParam1^) = 5;
        (uParam2^) = 1;
        break;
        case 30:
        (uParam1^) = 5;
        (uParam2^) = 2;
        break;
        case 41:
        (uParam1^) = 6;
        (uParam2^) = 0;
        break;
        case 42:
        (uParam1^) = 8;
        (uParam2^) = 0;
        break;
        case 21:
        (uParam1^) = 9;
        (uParam2^) = 0;
        break;
        case 22:
        (uParam1^) = 9;
        (uParam2^) = 1;
        break;
        case 23:
        (uParam1^) = 9;
        (uParam2^) = 2;
        break;
        case 9:
        (uParam1^) = 10;
        (uParam2^) = 0;
        break;
        case 10:
        (uParam1^) = 10;
        (uParam2^) = 1;
        break;
        case 11:
        (uParam1^) = 10;
        (uParam2^) = 2;
        break;
        case 31:
        (uParam1^) = 11;
        (uParam2^) = 0;
        break;
        case 32:
        (uParam1^) = 11;
        (uParam2^) = 1;
        break;
        case 33:
        (uParam1^) = 11;
        (uParam2^) = 2;
        break;
        case 34:
        (uParam1^) = 12;
        (uParam2^) = 0;
        break;
        case 35:
        (uParam1^) = 12;
        (uParam2^) = 1;
        break;
        case 36:
        (uParam1^) = 12;
        (uParam2^) = 2;
        break;
        case 37:
        (uParam1^) = 12;
        (uParam2^) = 3;
        break;
        case 38:
        (uParam1^) = 13;
        (uParam2^) = 0;
        break;
        case 39:
        (uParam1^) = 13;
        (uParam2^) = 1;
        break;
        case 40:
        (uParam1^) = 13;
        (uParam2^) = 2;
        break;
        case 12:
        (uParam1^) = 14;
        (uParam2^) = 0;
        break;
        case 13:
        (uParam1^) = 14;
        (uParam2^) = 1;
        break;
        case 14:
        (uParam1^) = 14;
        (uParam2^) = 2;
        break;
        case 24:
        (uParam1^) = 15;
        (uParam2^) = 0;
        break;
        case 25:
        (uParam1^) = 15;
        (uParam2^) = 1;
        break;
        case 26:
        (uParam1^) = 15;
        (uParam2^) = 2;
        break;
        case 27:
        (uParam1^) = 15;
        (uParam2^) = 3;
        break;
        case 43:
        (uParam1^) = 16;
        (uParam2^) = 0;
        break;
        case 44:
        (uParam1^) = 16;
        (uParam2^) = 1;
        break;
        default:
          case 45:
        (uParam1^) = 2147483647;
        (uParam2^) = 2147483647;
    }
    return;
}

void sub_8430(unknown uParam0)
{
    int iVar3;
    int iVar4;
    int I;
    int iVar6;
    int iVar7;
    boolean bVar8;

    iVar3 = GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 2 );
    iVar4 = GET_CHAR_TEXTURE_VARIATION( sub_4155(), 2 );
    bVar8 = false;
    for ( I = 0; I < 26; I++ )
    {
        if (NOT bVar8)
        {
            sub_8498( I, ref iVar6, ref iVar7 );
            if ((iVar7 == iVar4) AND (iVar6 == iVar3))
            {
                (uParam0^) = I;
                bVar8 = true;
            }
        }
    }
    if (NOT bVar8)
    {
        (uParam0^) = 26;
    }
    return;
}

void sub_8498(unknown uParam0, unknown uParam1, unknown uParam2)
{
    switch (uParam0)
    {
        case 0:
        (uParam1^) = 0;
        (uParam2^) = 0;
        break;
        case 1:
        (uParam1^) = 0;
        (uParam2^) = 1;
        break;
        case 2:
        (uParam1^) = 0;
        (uParam2^) = 2;
        break;
        case 3:
        (uParam1^) = 0;
        (uParam2^) = 3;
        break;
        case 4:
        (uParam1^) = 1;
        (uParam2^) = 0;
        break;
        case 19:
        (uParam1^) = 2;
        (uParam2^) = 0;
        break;
        case 20:
        (uParam1^) = 2;
        (uParam2^) = 1;
        break;
        case 21:
        (uParam1^) = 2;
        (uParam2^) = 2;
        break;
        case 22:
        (uParam1^) = 2;
        (uParam2^) = 3;
        break;
        case 23:
        (uParam1^) = 2;
        (uParam2^) = 4;
        break;
        case 24:
        (uParam1^) = 3;
        (uParam2^) = 0;
        break;
        case 14:
        (uParam1^) = 4;
        (uParam2^) = 0;
        break;
        case 15:
        (uParam1^) = 4;
        (uParam2^) = 1;
        break;
        case 16:
        (uParam1^) = 4;
        (uParam2^) = 2;
        break;
        case 17:
        (uParam1^) = 4;
        (uParam2^) = 3;
        break;
        case 18:
        (uParam1^) = 4;
        (uParam2^) = 4;
        break;
        case 8:
        (uParam1^) = 5;
        (uParam2^) = 0;
        break;
        case 9:
        (uParam1^) = 5;
        (uParam2^) = 1;
        break;
        case 10:
        (uParam1^) = 5;
        (uParam2^) = 2;
        break;
        case 11:
        (uParam1^) = 6;
        (uParam2^) = 0;
        break;
        case 12:
        (uParam1^) = 6;
        (uParam2^) = 1;
        break;
        case 13:
        (uParam1^) = 6;
        (uParam2^) = 2;
        break;
        case 5:
        (uParam1^) = 7;
        (uParam2^) = 0;
        break;
        case 6:
        (uParam1^) = 7;
        (uParam2^) = 1;
        break;
        case 7:
        (uParam1^) = 7;
        (uParam2^) = 2;
        break;
        case 25:
        (uParam1^) = 7;
        (uParam2^) = 3;
        break;
        default:
          case 26:
        (uParam1^) = 2147483647;
        (uParam2^) = 2147483647;
    }
    return;
}

void sub_9157(unknown uParam0)
{
    int iVar3;
    int iVar4;
    int I;
    int iVar6;
    int iVar7;
    boolean bVar8;

    iVar3 = GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 5 );
    iVar4 = GET_CHAR_TEXTURE_VARIATION( sub_4155(), 5 );
    bVar8 = false;
    for ( I = 0; I < 20; I++ )
    {
        if (NOT bVar8)
        {
            sub_9225( I, ref iVar6, ref iVar7 );
            if ((iVar7 == iVar4) AND (iVar6 == iVar3))
            {
                (uParam0^) = I;
                bVar8 = true;
            }
        }
    }
    if (NOT bVar8)
    {
        (uParam0^) = 20;
    }
    return;
}

void sub_9225(unknown uParam0, unknown uParam1, unknown uParam2)
{
    switch (uParam0)
    {
        case 0:
        (uParam1^) = 0;
        (uParam2^) = 0;
        break;
        case 1:
        (uParam1^) = 0;
        (uParam2^) = 1;
        break;
        case 7:
        (uParam1^) = 1;
        (uParam2^) = 0;
        break;
        case 8:
        (uParam1^) = 1;
        (uParam2^) = 1;
        break;
        case 9:
        (uParam1^) = 1;
        (uParam2^) = 2;
        break;
        case 13:
        (uParam1^) = 2;
        (uParam2^) = 0;
        break;
        case 14:
        (uParam1^) = 2;
        (uParam2^) = 1;
        break;
        case 15:
        (uParam1^) = 2;
        (uParam2^) = 2;
        break;
        case 2:
        (uParam1^) = 3;
        (uParam2^) = 0;
        break;
        case 3:
        (uParam1^) = 3;
        (uParam2^) = 1;
        break;
        case 10:
        (uParam1^) = 4;
        (uParam2^) = 0;
        break;
        case 11:
        (uParam1^) = 4;
        (uParam2^) = 1;
        break;
        case 12:
        (uParam1^) = 4;
        (uParam2^) = 2;
        break;
        case 16:
        (uParam1^) = 5;
        (uParam2^) = 0;
        break;
        case 17:
        (uParam1^) = 5;
        (uParam2^) = 1;
        break;
        case 18:
        (uParam1^) = 5;
        (uParam2^) = 2;
        break;
        case 4:
        (uParam1^) = 6;
        (uParam2^) = 0;
        break;
        case 5:
        (uParam1^) = 6;
        (uParam2^) = 1;
        break;
        case 6:
        (uParam1^) = 6;
        (uParam2^) = 2;
        break;
        case 19:
        (uParam1^) = 1;
        (uParam2^) = 3;
        break;
        default:
          case 20:
        (uParam1^) = 2147483647;
        (uParam2^) = 2147483647;
    }
    return;
}

void sub_9758(unknown uParam0)
{
    int iVar3;
    int I;
    int iVar5;
    boolean bVar6;
    int iVar7;
    int iVar8;

    GET_CHAR_PROP_INDEX( sub_4155(), 0, ref iVar3 );
    (uParam0^) = 4;
    bVar6 = false;
    for ( I = -1; I <= 4; I++ )
    {
        if (NOT bVar6)
        {
            sub_9811( I, ref iVar5 );
            if (iVar3 == iVar5)
            {
                (uParam0^) = I;
                bVar6 = true;
            }
        }
    }
    if ((uParam0^) == -1)
    {
        iVar7 = GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 8 );
        iVar8 = GET_CHAR_TEXTURE_VARIATION( sub_4155(), 8 );
        if ((iVar8 == 0) AND (iVar7 == 1))
        {
            (uParam0^) = 3;
        }
    }
    if (NOT bVar6)
    {
        (uParam0^) = 4;
    }
    return;
}

void sub_9811(unknown uParam0, unknown uParam1)
{
    switch (uParam0)
    {
        case -1:
        (uParam1^) = -1;
        break;
        case 0:
        (uParam1^) = 0;
        break;
        case 1:
        (uParam1^) = 1;
        break;
        case 2:
        (uParam1^) = 2;
        break;
        case 3:
        (uParam1^) = 99;
        break;
        default:
          case 4: (uParam1^) = 2147483647;
    }
    return;
}

void sub_10055(unknown uParam0)
{
    int iVar3;
    int I;
    int iVar5;
    boolean bVar6;

    GET_CHAR_PROP_INDEX( sub_4155(), 1, ref iVar3 );
    bVar6 = false;
    for ( I = -1; I <= 3; I++ )
    {
        if (NOT bVar6)
        {
            sub_10104( I, ref iVar5 );
            if (iVar3 == iVar5)
            {
                (uParam0^) = I;
                bVar6 = true;
            }
        }
    }
    if (NOT bVar6)
    {
        (uParam0^) = 3;
    }
    return;
}

void sub_10104(unknown uParam0, unknown uParam1)
{
    switch (uParam0)
    {
        case -1:
        (uParam1^) = -1;
        break;
        case 0:
        (uParam1^) = 0;
        break;
        case 1:
        (uParam1^) = 1;
        break;
        case 2:
        (uParam1^) = 2;
        break;
        default:
          case 3: (uParam1^) = 2147483647;
    }
    return;
}

void sub_10387()
{
    float fVar2;
    int iVar3;

    fVar2 = 0 + (1.00000000 * TIMESTEP());
    iVar3 = ROUND( fVar2 * 1000 );
    l_U853 += iVar3;
    if (l_U853 >= 10000000)
    {
        l_U853 = 0;
    }
    return;
}

int sub_10473()
{
    if (NOT (IS_VEH_DRIVEABLE( l_U678 )))
    {
        return 1;
        break;
    }
    if ((CHECK_STUCK_TIMER( l_U678, 0, 5000 )) || ((CHECK_STUCK_TIMER( l_U678, 1, 40000 )) || ((CHECK_STUCK_TIMER( l_U678, 2, 30000 )) || (CHECK_STUCK_TIMER( l_U678, 3, 60000 )))))
    {
        return 1;
        break;
    }
    return 0;
}

void sub_10625(unknown uParam0)
{
    sub_4222();
    sub_10641( uParam0 );
    sub_4418( ref l_U825, 0 );
    sub_4418( ref l_U831, 0 );
    switch (uParam0)
    {
        case 2:
        if ((l_U648) AND ((NOT (IS_CAR_DEAD( l_U678 ))) AND (NOT (IS_CHAR_DEAD( l_U672 )))))
        {
            sub_11032( "RB2_TRUCK", ref l_U831, 7, 1 );
        }
        break;
        case 3:
        if ((l_U648) AND ((NOT (IS_CAR_DEAD( l_U678 ))) AND (NOT (IS_CHAR_DEAD( l_U672 )))))
        {
            sub_11032( "RB2_DIE", ref l_U831, 7, 1 );
        }
        break;
    }
    l_U588 = uParam0;
    l_U578 = 12;
    SETTIMERB( 0 );
    return;
}

void sub_10641(int iParam0)
{
    if (NOT (IS_CHAR_DEAD( sub_4155() )))
    {
        if (iParam0 == 4)
        {
            if (NOT (IS_CHAR_INJURED( l_U672 )))
            {
                TASK_SMART_FLEE_CHAR( l_U672, sub_4155(), 10000, 10000 );
            }
            if (NOT (IS_CHAR_INJURED( l_U673 )))
            {
                TASK_SMART_FLEE_CHAR( l_U673, sub_4155(), 10000, 10000 );
            }
            if (NOT (IS_CHAR_INJURED( l_U674 )))
            {
                TASK_SMART_FLEE_CHAR( l_U674, sub_4155(), 10000, 10000 );
            }
        }
    }
    if (DOES_OBJECT_EXIST( l_U692 ))
    {
        DETACH_OBJECT( l_U692, 1 );
    }
    if (DOES_OBJECT_EXIST( l_U693 ))
    {
        DETACH_OBJECT( l_U693, 1 );
    }
    if (DOES_OBJECT_EXIST( l_U693 ))
    {
        DETACH_OBJECT( l_U693, 1 );
    }
    if (DOES_OBJECT_EXIST( l_U693 ))
    {
        DETACH_OBJECT( l_U693, 1 );
    }
    return;
}

void sub_11032(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_11053( uParam0, ref l_U0._fU0, uParam1, uParam2, uParam3 );
}

void sub_11053(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_11107( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_11107(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    int iVar12;

    iVar12 = 0;
    iParam1->_fU0 = uParam2;
    if (NOT (sub_11129( iParam1 )))
    {
        return 0;
    }
    l_U0._fU384 = 0;
    iParam1->_fU16 = 0;
    iParam1->_fU20 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU12)
        {
            iVar12 = iParam1->_fU8;
            iParam1->_fU12 = 0;
        }
    }
    else
    {
        iParam1->_fU12 = 0;
        if (bParam4)
        {
            iVar12 = uParam6;
            iParam1->_fU8 = uParam6;
            iParam1->_fU12 = 0;
        }
        else
        {
            iParam1->_fU8 = 0;
            iParam1->_fU12 = 0;
        }
    }
    iParam1->_fU16 = bParam4;
    for ( I = 0; I <= (g_U8499 - 1); I++ )
    {
        StrCopy( ref g_U8499[I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U8499[I] = {(uParam0^)[I]};
    }
    g_U8493 = {(iParam1^)};
    sub_11817( ref g_U8395, ref l_U0 );
    StrCopy( ref g_U8395._fU0, uParam7, 16 );
    g_U8395._fU388 = uParam8;
    g_U8394 = 1;
    return 1;
}

int sub_11129(int iParam0)
{
    if (IS_MOBILE_PHONE_CALL_ONGOING())
    {
        sub_11206( "\n !!!!! CANT PLAY SPEECH MOBILE PHONE CALL IS PLAYING" );
        return 0;
    }
    if (IS_THREAD_ACTIVE( g_U556[1] ))
    {
        switch (g_U91._fU0)
        {
            case 1010:
            case 1001:
            case 1000: break;
            default:
            sub_11206( "\n !!!!! CANT PLAY SPEECH CALLING SCRIPT IS STILL ACTIVE" );
            return 0;
            break;
        }
    }
    switch (g_U8394)
    {
        case 4:
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING())
    {
        if (g_U8392 > iParam0->_fU0)
        {
            sub_11206( "\n !!!!! CANT PLAY SPEECH CURRENT SPEECH HAS HIGHER PRIORITY" );
            return 0;
        }
        ABORT_SCRIPTED_CONVERSATION( 0 );
    }
    g_U8392 = iParam0->_fU0;
    g_U8393++;
    if (g_U8393 > 100000)
    {
        g_U8393 = 1;
    }
    iParam0->_fU4 = g_U8393;
    return 1;
}

void sub_11206(unknown uParam0)
{
    return;
}

void sub_11817(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU16[I] = {iParam1->_fU16[I]};
        iParam0->_fU344[I] = iParam1->_fU344[I];
    }
    iParam0->_fU384 = iParam1->_fU384;
    iParam0->_fU388 = iParam1->_fU388;
    return;
}

int sub_12102(unknown uParam0)
{
    int iVar3;

    if (g_U9079 == 0)
    {
        if (IS_VEH_DRIVEABLE( uParam0 ))
        {
            if (NOT (IS_CHAR_IN_CAR( sub_4155(), uParam0 )))
            {
                if (NOT (LOCATE_CHAR_ANY_MEANS_CAR_2D( sub_4155(), uParam0, 100.00000000, 100.00000000, 0 )))
                {
                    return 1;
                }
                if (NOT (LOCATE_CHAR_ANY_MEANS_CAR_2D( sub_4155(), uParam0, 50.00000000, 50.00000000, 0 )))
                {
                    GET_GAME_TIMER( ref iVar3 );
                    if ((iVar3 - l_U113) >= 180000)
                    {
                        return 1;
                    }
                }
                else
                {
                    GET_GAME_TIMER( ref l_U113 );
                }
            }
            else
            {
                GET_GAME_TIMER( ref l_U113 );
            }
        }
    }
    return 0;
}

int sub_12341()
{
    if ((NOT (IS_CHAR_INJURED( l_U674 ))) AND ((NOT (IS_CHAR_INJURED( l_U673 ))) AND (NOT (IS_CHAR_INJURED( l_U672 )))))
    {
        return 1;
        break;
    }
    return 0;
}

void sub_12536()
{
    if (NOT l_U647)
    {
        if ((NOT (l_U578 == 0)) AND (IS_WANTED_LEVEL_GREATER( sub_7251(), 0 )))
        {
            if (sub_12589( l_U825 ))
            {
                sub_4418( ref l_U825, 1 );
            }
            if (DOES_BLIP_EXIST( l_U699 ))
            {
                REMOVE_BLIP( l_U699 );
            }
            if (DOES_BLIP_EXIST( l_U700 ))
            {
                REMOVE_BLIP( l_U700 );
            }
            l_U647 = 1;
        }
    }
    else if (NOT l_U646)
    {
        sub_4418( ref l_U825, 0 );
        sub_4418( ref l_U831, 0 );
        if (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))
        {
            sub_11032( "RB2_COPS", ref l_U831, 7, 1 );
        }
        l_U646 = 1;
    }
    if ((l_U646) AND ((NOT (sub_12589( l_U831 ))) AND ((NOT (l_U578 == 3)) AND (NOT l_U645))))
    {
        PRINT_NOW( "RAY2_18", 7500, 1 );
        l_U645 = 1;
    }
    if (NOT (IS_WANTED_LEVEL_GREATER( sub_7251(), 0 )))
    {
        switch (l_U578)
        {
            case 4:
            if (l_U620)
            {
                PRINT_NOW( "RAY2_02", 7500, 1 );
            }
            if (NOT (DOES_BLIP_EXIST( l_U699 )))
            {
                ADD_BLIP_FOR_COORD( l_U707._fU0, l_U707._fU4, l_U707._fU8, ref l_U699 );
                SET_ROUTE( l_U699, 1 );
            }
            l_U645 = 0;
            break;
            case 6:
            PRINT_NOW( "RAY2_03", 7500, 1 );
            if (NOT (DOES_BLIP_EXIST( l_U700 )))
            {
                ADD_BLIP_FOR_COORD( l_U710._fU0, l_U710._fU4, l_U710._fU8, ref l_U700 );
                SET_ROUTE( l_U700, 1 );
            }
            l_U645 = 0;
            break;
            case 2:
            if (NOT IS_MESSAGE_BEING_DISPLAYED())
            {
                PRINT_NOW( "RAY2_04", 7500, 1 );
                l_U645 = 0;
            }
            break;
        }
        l_U645 = 0;
        l_U647 = 0;
        l_U646 = 0;
    }
    return;
}

int sub_12589(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    if ((g_U8394 == 2) || ((g_U8394 == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING())))
    {
        if (uParam0._fU4 == g_U8393)
        {
            return 1;
        }
        else
        {
            sub_11206( "\n speech is playing, but not from this structure" );
        }
    }
    else
    {
        sub_11206( "\n speech is not playing" );
    }
    return 0;
}

void sub_13433()
{
    if (l_U824 >= 0.10000000)
    {
        sub_13463( ref l_U672, 1 );
        sub_13463( ref l_U673, 0 );
        sub_13463( ref l_U674, 0 );
        l_U824 = 0.00000000;
    }
    else
    {
        l_U824 += 1.00000000 * TIMESTEP();
    }
    if ((HAS_CHAR_BEEN_DAMAGED_BY_CHAR( l_U674, sub_4155(), 0 )) || ((HAS_CHAR_BEEN_DAMAGED_BY_CHAR( l_U673, sub_4155(), 0 )) || (HAS_CHAR_BEEN_DAMAGED_BY_CHAR( l_U672, sub_4155(), 0 ))))
    {
        REMOVE_BLIP( l_U698 );
        sub_10625( 4 );
    }
    if ((sub_13907( 1, 1 )) AND (LOCATE_CHAR_ON_FOOT_3D( sub_4155(), l_U725._fU0, l_U725._fU4, l_U725._fU8, 17.00000000, 17.00000000, 17.00000000, 0 )))
    {
        SET_ROUTE( l_U698, 0 );
        REMOVE_BLIP( l_U698 );
        if (NOT (IS_CHAR_INJURED( l_U672 )))
        {
            SET_CHAR_PROOFS( l_U672, 1, 1, 1, 1, 1 );
        }
        if (NOT (IS_CHAR_INJURED( l_U673 )))
        {
            SET_CHAR_PROOFS( l_U673, 1, 1, 1, 1, 1 );
        }
        if (NOT (IS_CHAR_INJURED( l_U674 )))
        {
            SET_CHAR_PROOFS( l_U674, 1, 1, 1, 1, 1 );
        }
        l_U578 = 1;
        SETTIMERB( 0 );
    }
    return;
}

void sub_13463(unknown uParam0, boolean bParam1)
{
    unknown uVar4;

    GET_SCRIPT_TASK_STATUS( (uParam0^), 80, ref l_U872 );
    if (l_U872 == 7)
    {
        GENERATE_RANDOM_INT_IN_RANGE( 0, 15, ref l_U847 );
        if (l_U847 == 1)
        {
            if (NOT bParam1)
            {
                GENERATE_RANDOM_INT_IN_RANGE( 0, 2, ref uVar4 );
                switch (uVar4)
                {
                    case 0:
                    TASK_PLAY_ANIM( (uParam0^), "GBGE_SCRATCHNECK", l_U871, 3.00000000, 0, 0, 0, 0, -1 );
                    break;
                    case 1:
                    TASK_PLAY_ANIM( (uParam0^), "GBGE_STRETCHBACK", l_U871, 3.00000000, 0, 0, 0, 0, -1 );
                    break;
                }
            }
            else
            {
                TASK_PLAY_ANIM( (uParam0^), "GBGE_SMOKE", l_U871, 3.00000000, 0, 0, 0, 0, -1 );
            }
        }
    }
    return;
}

int sub_13907(boolean bParam0, boolean bParam1)
{
    unknown uVar4;
    int iVar5;
    float fVar6;

    if (IS_MINIGAME_IN_PROGRESS())
    {
        return 0;
    }
    if (bParam1)
    {
        if (IS_CHAR_IN_ANY_CAR( sub_4155() ))
        {
            STORE_CAR_CHAR_IS_IN_NO_SAVE( sub_4155(), ref uVar4 );
            if (NOT (IS_CAR_DEAD( uVar4 )))
            {
                GET_CAR_UPRIGHT_VALUE( uVar4, ref fVar6 );
                if ((fVar6 > 1.01100000) || (fVar6 < 0.95000000))
                {
                    return 0;
                }
            }
        }
    }
    if (bParam0)
    {
        if (IS_CHAR_IN_ANY_CAR( sub_4155() ))
        {
            STORE_CAR_CHAR_IS_IN_NO_SAVE( sub_4155(), ref uVar4 );
            if (NOT (IS_CAR_DEAD( uVar4 )))
            {
                GET_DRIVER_OF_CAR( uVar4, ref iVar5 );
                if (NOT (iVar5 == sub_4155()))
                {
                    return 0;
                }
            }
        }
    }
    if (IS_CHAR_IN_ANY_CAR( sub_4155() ))
    {
        if (NOT (IS_CHAR_SITTING_IN_ANY_CAR( sub_4155() )))
        {
            return 0;
        }
    }
    if (NOT (IS_PLAYER_READY_FOR_CUTSCENE( sub_7251() )))
    {
        return 0;
    }
    if (NOT (CAN_PLAYER_START_MISSION( sub_7251() )))
    {
        return 0;
    }
    return 1;
}

void sub_14355()
{
    unknown uVar2;
    int iVar3;
    int iVar4;

    switch (l_U584)
    {
        case 0:
        DO_SCREEN_FADE_OUT( 500 );
        while (NOT IS_SCREEN_FADED_OUT())
        {
            WAIT( 0 );
        }
        SET_PLAYER_CONTROL( sub_7251(), 0 );
        REMOVE_PLAYER_HELMET( sub_7251(), 1 );
        sub_14462();
        GET_PLAYERS_LAST_CAR_NO_SAVE( ref uVar2 );
        if (IS_VEH_DRIVEABLE( uVar2 ))
        {
            SET_CAR_AS_MISSION_CAR( uVar2 );
            GET_CAR_MODEL( uVar2, ref iVar3 );
            GET_DRIVER_OF_CAR( uVar2, ref iVar4 );
            if ((iVar4 == nil) AND (NOT (iVar3 == 1917016601)))
            {
                if (IS_CAR_IN_AREA_2D( uVar2, -100.10000000, -252.61000000, -87.17000000, -234.88000000, 0 ))
                {
                    CLEAR_AREA( -101.50950000, -238.43900000, 12.99870000, 7.00000000, 1 );
                    SET_CAR_COORDINATES( uVar2, -101.50950000, -238.43900000, 12.99870000 );
                    SET_CAR_HEADING( uVar2, 270 );
                    SET_CAR_ON_GROUND_PROPERLY( uVar2 );
                    WAIT( 1000 );
                }
                else if (LOCATE_CAR_2D( uVar2, -127.58460000, -257.53450000, 4.00000000, 4.00000000, 0 ))
                {
                    MARK_CAR_AS_NO_LONGER_NEEDED( ref uVar2 );
                }
            }
            else
            {
                DELETE_CAR( ref uVar2 );
            }
        }
        CLEAR_AREA( -127.58460000, -257.53450000, 5, 15.00000000, 1 );
        EXTINGUISH_FIRE_AT_POINT( -127.58460000, -257.53450000, 5, 20.00000000 );
        CLEAR_AREA_OF_CHARS( l_U725._fU0, l_U725._fU4, l_U725._fU8, 100 );
        SET_PED_DENSITY_MULTIPLIER( 0.00000000 );
        HIDE_CHAR_WEAPON_FOR_SCRIPTED_CUTSCENE( sub_4155(), 1 );
        CLEAR_PRINTS();
        l_U584 = 1;
        break;
        case 1:
        MAKE_PLAYER_SAFE_FOR_CUTSCENE( sub_7251() );
        LOAD_ADDITIONAL_TEXT( "RB2AUD", 6 );
        START_CUTSCENE_NOW( "imRay2" );
        while (NOT HAS_CUTSCENE_LOADED())
        {
            WAIT( 0 );
        }
        while (NOT HAS_CUTSCENE_FINISHED())
        {
            WAIT( 0 );
        }
        CLEAR_NAMED_CUTSCENE( "imRay2" );
        l_U584 = 2;
        break;
        case 2:
        CLEAR_PRINTS();
        sub_5340( 0 );
        WAIT( 1000 );
        if ((sub_12341()) AND (NOT sub_10473()))
        {
            WARP_CHAR_INTO_CAR_AS_PASSENGER( l_U672, l_U678, 0 );
            CLEAR_CHAR_TASKS( l_U672 );
            SET_CHAR_STAY_IN_CAR_WHEN_JACKED( l_U672, 1 );
            SET_CHAR_CANT_BE_DRAGGED_OUT( l_U672, 1 );
            ATTACH_PED_TO_CAR( l_U673, l_U678, 0, l_U767, 0.00000000, 0.00000000, 1, 1 );
            CLEAR_CHAR_TASKS( l_U673 );
            TASK_PLAY_ANIM_NON_INTERRUPTABLE( l_U673, "GBGE_HANGR", l_U871, 8.00000000, 1, 0, 0, 0, -1 );
            ATTACH_PED_TO_CAR( l_U674, l_U678, 0, l_U770, 0.00000000, 0.00000000, 1, 1 );
            CLEAR_CHAR_TASKS( l_U674 );
            TASK_PLAY_ANIM_NON_INTERRUPTABLE( l_U674, "GBGE_HANGL", l_U871, 8.00000000, 1, 0, 0, 0, -1 );
            SET_CHAR_ONLY_DAMAGED_BY_PLAYER( l_U672, 1 );
            SET_CHAR_ONLY_DAMAGED_BY_PLAYER( l_U673, 1 );
            SET_CHAR_ONLY_DAMAGED_BY_PLAYER( l_U674, 1 );
            SET_CHAR_PROOFS( l_U672, 0, 0, 0, 1, 0 );
            SET_CHAR_PROOFS( l_U673, 0, 0, 0, 1, 0 );
            SET_CHAR_PROOFS( l_U674, 0, 0, 0, 1, 0 );
            l_U580 = 1;
            l_U581 = 1;
        }
        if ((NOT (IS_CHAR_DEAD( sub_4155() ))) AND (IS_VEH_DRIVEABLE( l_U678 )))
        {
            SET_CAR_ENGINE_ON( l_U678, 1, 1 );
            SET_CAR_CAN_BE_VISIBLY_DAMAGED( l_U678, 0 );
            SET_CHAR_COORDINATES_NO_OFFSET( sub_4155(), -93.83719000, -247.41730000, 12.66880000 );
            SET_CHAR_HEADING( sub_4155(), 0 );
            FREEZE_CAR_POSITION( l_U678, 0 );
            SET_GAME_CAM_HEADING( 0.00000000 );
        }
        CREATE_OBJECT( l_U687, l_U743._fU0, l_U743._fU4, l_U743._fU8, ref l_U692, 1 );
        CREATE_OBJECT( l_U687, l_U746._fU0, l_U746._fU4, l_U746._fU8, ref l_U693, 1 );
        FREEZE_OBJECT_POSITION( l_U692, 1 );
        FREEZE_OBJECT_POSITION( l_U693, 1 );
        SET_CHAR_COMPONENT_VARIATION( sub_4155(), 1, 8, 0 );
        SET_CHAR_COMPONENT_VARIATION( sub_4155(), 2, 7, 0 );
        SET_CHAR_COMPONENT_VARIATION( sub_4155(), 5, 0, 0 );
        HIDE_CHAR_WEAPON_FOR_SCRIPTED_CUTSCENE( sub_4155(), 0 );
        SET_WANTED_MULTIPLIER( 0.10000000 );
        SET_PED_DENSITY_MULTIPLIER( 0.20000000 );
        SET_CAR_DENSITY_MULTIPLIER( 0.30000000 );
        ADD_BLIP_FOR_CAR( l_U678, ref l_U698 );
        SET_BLIP_AS_FRIENDLY( l_U698, 1 );
        if (NOT (IS_CHAR_DEAD( sub_4155() )))
        {
            CLEAR_CHAR_TASKS_IMMEDIATELY( sub_4155() );
            SET_CHAR_HEADING( sub_4155(), 270 );
            SET_GAME_CAM_HEADING( 90 );
        }
        WAIT( 1000 );
        PRINT_NOW( "RAY2_01a", 7500, 1 );
        if (IS_VEH_DRIVEABLE( uVar2 ))
        {
            MARK_CAR_AS_NO_LONGER_NEEDED( ref uVar2 );
        }
        g_U8361 = 0;
        l_U648 = 1;
        DO_SCREEN_FADE_IN( 500 );
        while (NOT IS_SCREEN_FADED_IN())
        {
            WAIT( 0 );
        }
        SET_PLAYER_CONTROL( sub_7251(), 1 );
        SETTIMERA( 0 );
        l_U578 = 2;
        break;
    }
    return;
}

void sub_14462()
{
    if (DOES_CHAR_EXIST( l_U672 ))
    {
        DELETE_CHAR( ref l_U672 );
        MARK_MODEL_AS_NO_LONGER_NEEDED( -681942840 );
    }
    if (DOES_CHAR_EXIST( l_U673 ))
    {
        DELETE_CHAR( ref l_U673 );
        MARK_MODEL_AS_NO_LONGER_NEEDED( 1384833284 );
    }
    if (DOES_CHAR_EXIST( l_U674 ))
    {
        DELETE_CHAR( ref l_U674 );
        MARK_MODEL_AS_NO_LONGER_NEEDED( -1014976873 );
    }
    if (DOES_OBJECT_EXIST( l_U696 ))
    {
        DETACH_OBJECT( l_U696, 1 );
        DELETE_OBJECT( ref l_U696 );
        MARK_MODEL_AS_NO_LONGER_NEEDED( -268530289 );
    }
    return;
}

void sub_16095()
{
    if ((NOT l_U657) AND (TIMERA() >= 4000))
    {
        l_U657 = 1;
    }
    if (NOT sub_10473())
    {
        if (IS_CHAR_SITTING_IN_CAR( sub_4155(), l_U678 ))
        {
            if ((NOT l_U647) AND (NOT l_U625))
            {
                sub_11032( "RB2_B1AV1", ref l_U831, 7, 1 );
                if (NOT (DOES_BLIP_EXIST( l_U699 )))
                {
                    ADD_BLIP_FOR_COORD( l_U707._fU0, l_U707._fU4, l_U707._fU8, ref l_U699 );
                    SET_ROUTE( l_U699, 1 );
                }
                CLEAR_PRINTS();
                l_U625 = 1;
            }
            if ((NOT l_U647) AND ((NOT IS_MESSAGE_BEING_DISPLAYED()) AND ((NOT l_U626) AND (l_U620))))
            {
                switch (g_U64955)
                {
                    case 0:
                    sub_11032( "RB2_B1AV2", ref l_U825, 7, 1 );
                    break;
                    case 1:
                    sub_11032( "RB2_B1V2", ref l_U825, 7, 1 );
                    break;
                    case 2:
                    SAY_AMBIENT_SPEECH( l_U672, "LISTEN_TO_RADIO", 0, 0, 0 );
                    break;
                }
                l_U669 = g_U64955;
                if (g_U64955 < 2)
                {
                    g_U64955++;
                }
                l_U626 = 1;
            }
            if ((NOT l_U647) AND ((NOT l_U641) AND ((NOT l_U620) AND (NOT (sub_12589( l_U831 ))))))
            {
                PRINT_NOW( "RAY2_02", 7500, 1 );
                l_U620 = 1;
            }
            if ((l_U853 >= 3000) AND ((sub_16574( l_U825 )) AND (l_U626)))
            {
                switch (l_U669)
                {
                    case 0:
                    sub_16657( "RB2_B1AV2", ref l_U825, 7, 1 );
                    break;
                    case 1:
                    sub_16657( "RB2_B1V2", ref l_U825, 7, 1 );
                    break;
                }
            }
            if (NOT l_U647)
            {
                if (l_U609)
                {
                    GET_CAR_SPEED( l_U678, ref l_U870 );
                    if (l_U870 < 0.10000000)
                    {
                        SET_CAMERA_CONTROLS_DISABLED_WITH_PLAYER_CONTROLS( 1 );
                        SET_PLAYER_CONTROL( sub_7251(), 1 );
                        SET_WANTED_MULTIPLIER( 0.00000000 );
                        l_U578 = 5;
                        SETTIMERB( 0 );
                        REMOVE_BLIP( l_U699 );
                        sub_4418( ref l_U825, 0 );
                    }
                }
                if (NOT l_U609)
                {
                    if (LOCATE_CHAR_IN_CAR_3D( sub_4155(), l_U707._fU0, l_U707._fU4, l_U707._fU8, 3.20000000, 3.20000000, 3.20000000, 1 ))
                    {
                        SET_CAMERA_CONTROLS_DISABLED_WITH_PLAYER_CONTROLS( 0 );
                        SET_PLAYER_CONTROL( sub_7251(), 0 );
                        l_U609 = 1;
                    }
                    else if (LOCATE_CHAR_IN_CAR_3D( sub_4155(), l_U707._fU0, l_U707._fU4, l_U707._fU8, 12.00000000, 12.00000000, 4.00000000, 0 ))
                    {
                        if (NOT l_U641)
                        {
                            l_U641 = 1;
                        }
                    }
                }
            }
            if (NOT l_U612)
            {
                if (NOT (LOCATE_CHAR_ANY_MEANS_3D( sub_4155(), l_U725._fU0, l_U725._fU4, l_U725._fU8, 30.00000000, 30.00000000, 30.00000000, 0 )))
                {
                    SWITCH_ROADS_BACK_TO_ORIGINAL( 65410, 65289, -10, 65475, 65317, 100 );
                    l_U612 = 1;
                }
            }
        }
        else
        {
            l_U578 = 2;
        }
        sub_17203();
    }
    return;
}

void sub_16574(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    return uParam0._fU12;
}

void sub_16657(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_16678( uParam0, ref l_U0._fU0, uParam1, uParam2, uParam3 );
}

int sub_16678(unknown uParam0, unknown uParam1, int iParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    if (iParam2->_fU12)
    {
        StrCopy( ref cVar11[0], uParam0, 16 );
        StrCopy( ref cVar11[1], "END", 16 );
        return sub_11107( ref cVar11, iParam2, uParam3, 1, 0, 0, 0, ref cVar7, uParam4 );
    }
    return 0;
}

void sub_17203()
{
    GET_CAR_COORDINATES( l_U678, ref l_U867, ref l_U868, ref l_U869 );
    GET_DISTANCE_BETWEEN_COORDS_3D( l_U867, l_U868, l_U869, l_U707._fU0, l_U707._fU4, l_U707._fU8, ref l_U870 );
    if ((l_U603) AND (l_U870 < 350.00000000))
    {
        SWITCH_ROADS_OFF( l_U800._fU0, l_U800._fU4, l_U800._fU8, l_U803._fU0, l_U803._fU4, l_U803._fU8 );
        l_U603 = 0;
    }
    else if ((NOT l_U603) AND (l_U870 > 350.00000000))
    {
        SWITCH_ROADS_BACK_TO_ORIGINAL( l_U800._fU0, l_U800._fU4, l_U800._fU8, l_U803._fU0, l_U803._fU4, l_U803._fU8 );
        l_U603 = 1;
    }
    return;
}

void sub_17464()
{
    int iVar2;

    if ((NOT l_U657) AND (TIMERA() >= 4000))
    {
        l_U657 = 1;
    }
    if (IS_VEH_DRIVEABLE( l_U678 ))
    {
        if (IS_CHAR_SITTING_IN_CAR( sub_4155(), l_U678 ))
        {
            l_U853 = 0;
            CLEAR_PRINTS();
            REMOVE_BLIP( l_U698 );
            if (NOT ((l_U580 == 11) || (l_U580 == 1)))
            {
                iVar2++;
                sub_17602( ref l_U673, 2, ref l_U580 );
            }
            if (NOT ((l_U581 == 11) || (l_U581 == 1)))
            {
                iVar2 += 2;
                sub_17602( ref l_U674, 3, ref l_U581 );
            }
            if (iVar2 > 0)
            {
                switch (iVar2)
                {
                    case 1:
                    PRINT_NOW( "RAY2_16", 7500, 1 );
                    if (NOT (DOES_BLIP_EXIST( l_U702 )))
                    {
                        ADD_BLIP_FOR_CHAR( l_U673, ref l_U702 );
                        SET_BLIP_AS_FRIENDLY( l_U702, 1 );
                    }
                    break;
                    case 2:
                    PRINT_NOW( "RAY2_17", 7500, 1 );
                    if (NOT (DOES_BLIP_EXIST( l_U703 )))
                    {
                        ADD_BLIP_FOR_CHAR( l_U674, ref l_U703 );
                        SET_BLIP_AS_FRIENDLY( l_U703, 1 );
                    }
                    break;
                    case 3:
                    PRINT_NOW( "RAY2_15", 7500, 1 );
                    if (NOT (DOES_BLIP_EXIST( l_U702 )))
                    {
                        ADD_BLIP_FOR_CHAR( l_U673, ref l_U702 );
                        SET_BLIP_AS_FRIENDLY( l_U702, 1 );
                    }
                    if (NOT (DOES_BLIP_EXIST( l_U703 )))
                    {
                        ADD_BLIP_FOR_CHAR( l_U674, ref l_U703 );
                        SET_BLIP_AS_FRIENDLY( l_U703, 1 );
                    }
                    break;
                }
                if (l_U664 == 0)
                {
                    l_U579 = 4;
                }
                else if (l_U664 == 1)
                {
                    l_U579 = 6;
                }
                else if (l_U664 == 2)
                {
                    l_U579 = 9;
                };;;
                l_U578 = 3;
            }
            else if (l_U664 == 0)
            {
                l_U578 = 4;
                if (NOT l_U647)
                {
                    if ((l_U625) AND (l_U620))
                    {
                        PRINT_NOW( "RAY2_02", 7500, 1 );
                    }
                    if ((l_U625) AND (NOT (DOES_BLIP_EXIST( l_U699 ))))
                    {
                        ADD_BLIP_FOR_COORD( l_U707._fU0, l_U707._fU4, l_U707._fU8, ref l_U699 );
                        SET_ROUTE( l_U699, 1 );
                    }
                }
                else
                {
                    PRINT_NOW( "RAY2_18", 7500, 1 );
                }
            }
            else if (l_U664 == 1)
            {
                l_U578 = 6;
                if (NOT l_U647)
                {
                    if ((l_U627) AND (l_U621))
                    {
                        PRINT_NOW( "RAY2_03", 7500, 1 );
                    }
                    if (NOT (DOES_BLIP_EXIST( l_U700 )))
                    {
                        ADD_BLIP_FOR_COORD( l_U710._fU0, l_U710._fU4, l_U710._fU8, ref l_U700 );
                        SET_ROUTE( l_U700, 1 );
                    }
                }
                else
                {
                    PRINT_NOW( "RAY2_18", 7500, 1 );
                }
            }
            else if (l_U664 == 2)
            {
                l_U578 = 9;
                if (NOT (DOES_BLIP_EXIST( l_U701 )))
                {
                    ADD_BLIP_FOR_COORD( l_U713._fU0, l_U713._fU4, l_U713._fU8, ref l_U701 );
                    SET_ROUTE( l_U701, 1 );
                }
                if (l_U629)
                {
                    PRINT_NOW( "RAY2_05", 7500, 1 );
                }
            };;;
            if (NOT l_U605)
            {
                l_U605 = 1;
            }
            l_U633 = 0;
            l_U632 = 0;;
        }
        else if (l_U605)
        {
            sub_18711();
        }
    }
    return;
}

void sub_17602(unknown uParam0, int iParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;

    if (iParam1 == 2)
    {
        uVar5 = {l_U794};
    }
    else
    {
        uVar5 = {l_U797};
    }
    CLEAR_CHAR_TASKS( (uParam0^) );
    CLEAR_CHAR_SECONDARY_TASK( (uParam0^) );
    GET_CHAR_COORDINATES( (uParam0^), ref l_U861, ref l_U862, ref l_U863 );
    GET_DISTANCE_BETWEEN_COORDS_2D( l_U861, l_U862, uVar5._fU0, uVar5._fU4, ref l_U870 );
    if (l_U870 >= 4.00000000)
    {
        TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), uVar5._fU0, uVar5._fU4, uVar5._fU8, 3, -2, 1.00000000 );
    }
    else
    {
        TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), uVar5._fU0, uVar5._fU4, uVar5._fU8, 2, -2, 1.00000000 );
    }
    (uParam2^) = 9;
    return;
}

void sub_18711()
{
    if (NOT l_U632)
    {
        if (DOES_BLIP_EXIST( l_U699 ))
        {
            REMOVE_BLIP( l_U699 );
        }
        if (DOES_BLIP_EXIST( l_U700 ))
        {
            REMOVE_BLIP( l_U700 );
        }
        if (DOES_BLIP_EXIST( l_U701 ))
        {
            REMOVE_BLIP( l_U701 );
        }
        if (NOT (DOES_BLIP_EXIST( l_U698 )))
        {
            ADD_BLIP_FOR_CAR( l_U678, ref l_U698 );
            SET_BLIP_AS_FRIENDLY( l_U698, 1 );
        }
        if (sub_12589( l_U825 ))
        {
            sub_18885( ref l_U825 );
        }
        if (NOT (IS_CHAR_INJURED( l_U673 )))
        {
            sub_11032( "RB2_BACKIN", ref l_U831, 7, 1 );
        }
        l_U632 = 1;
    }
    if ((NOT (sub_12589( l_U831 ))) AND ((NOT l_U633) AND (l_U632)))
    {
        l_U633 = 1;
        PRINT_NOW( "RAY2_04", 7500, 1 );
    }
    return;
}

int sub_18885(int iParam0)
{
    if (iParam0->_fU12)
    {
        sub_11206( "\n already paused" );
    }
    else if ((g_U8394 == 2) || ((g_U8394 == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING())))
    {
        if (iParam0->_fU4 == g_U8393)
        {
            iParam0->_fU8 += (ABORT_SCRIPTED_CONVERSATION( 0 )) + 1;
            sub_11206( "\n CONVERSATION PAUSED AT LINE " );
            sub_19041( iParam0->_fU8 );
            iParam0->_fU12 = 1;
            iParam0->_fU16 = 0;
            return 1;
        }
        else
        {
            sub_11206( "\n NOT pausing the line as scripted and global speech id dont match or the speech is already paused" );
        }
    }
    else
    {
        sub_11206( "\n NOT pausing the line as conversation is not playing" );
    }
    if (NOT iParam0->_fU12)
    {
        iParam0->_fU8 = -1;
        sub_11206( "\n reseting paused struct line" );
    }
    return 0;
}

void sub_19041(unknown uParam0)
{
    return;
}

void sub_19442()
{
    int iVar2;

    iVar2 = 0;
    if ((l_U580 == 1) || (l_U580 == 11))
    {
        if (DOES_BLIP_EXIST( l_U702 ))
        {
            REMOVE_BLIP( l_U702 );
        }
        iVar2++;
    }
    if ((l_U581 == 1) || (l_U581 == 11))
    {
        if (DOES_BLIP_EXIST( l_U703 ))
        {
            REMOVE_BLIP( l_U703 );
        }
        iVar2++;
    }
    if (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))
    {
        if (iVar2 == 2)
        {
            l_U578 = l_U579;
            l_U580 = 1;
            l_U581 = 1;
            l_U853 = 0;
            switch (l_U579)
            {
                case 4:
                if (NOT (DOES_BLIP_EXIST( l_U699 )))
                {
                    ADD_BLIP_FOR_COORD( l_U707._fU0, l_U707._fU4, l_U707._fU8, ref l_U699 );
                    SET_ROUTE( l_U699, 1 );
                }
                if (NOT l_U647)
                {
                    if (l_U620)
                    {
                        PRINT_NOW( "RAY2_02", 7500, 1 );
                    }
                }
                else
                {
                    PRINT_NOW( "RAY2_18", 7500, 1 );
                }
                break;
                case 6:
                if (NOT (DOES_BLIP_EXIST( l_U700 )))
                {
                    ADD_BLIP_FOR_COORD( l_U710._fU0, l_U710._fU4, l_U710._fU8, ref l_U700 );
                    SET_ROUTE( l_U700, 1 );
                }
                if (NOT l_U647)
                {
                    if (l_U621)
                    {
                        PRINT_NOW( "RAY2_03", 7500, 1 );
                    }
                }
                else
                {
                    PRINT_NOW( "RAY2_18", 7500, 1 );
                }
                break;
                case 9:
                if (NOT (DOES_BLIP_EXIST( l_U701 )))
                {
                    ADD_BLIP_FOR_COORD( l_U713._fU0, l_U713._fU4, l_U713._fU8, ref l_U701 );
                    SET_ROUTE( l_U701, 1 );
                }
                PRINT_NOW( "RAY2_05", 7500, 1 );
                break;
            }
        }
    }
    return;
}

void sub_20040(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    if (TIMERB() <= 3000)
    {
        if (IS_VEH_DRIVEABLE( l_U678 ))
        {
            SET_CAR_FORWARD_SPEED( l_U678, 0.00000000 );
        }
    }
    if ((NOT l_U619) AND ((NOT (sub_12589( l_U831 ))) AND (l_U618)))
    {
        if ((IS_CHAR_IN_CAR( sub_4155(), l_U678 )) AND ((NOT (l_U589 == 2)) AND (NOT (l_U589 == 1))))
        {
            PRINT_NOW( "RAY2_14", 7500, 1 );
            l_U619 = 1;
        }
    }
    if (iParam0 == 1)
    {
        if ((NOT l_U623) AND ((NOT (sub_12589( l_U825 ))) AND ((NOT (sub_12589( l_U831 ))) AND (l_U640))))
        {
            if (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))
            {
                PRINT_NOW( "RAY2_08", 7500, 1 );
            }
            l_U623 = 1;
        }
        if ((NOT (sub_12589( l_U831 ))) AND ((NOT (sub_12589( l_U825 ))) AND (NOT l_U640)))
        {
            if (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))
            {
                sub_11032( "RB2_PIC1A", ref l_U831, 7, 1 );
            }
            l_U640 = 1;
        }
        if ((IS_CHAR_IN_CAR( sub_4155(), l_U678 )) AND (l_U599))
        {
            if ((NOT (sub_12589( l_U831 ))) AND (NOT IS_MESSAGE_BEING_DISPLAYED()))
            {
                if (NOT l_U631)
                {
                    sub_11032( "RB2_PIC1B", ref l_U831, 7, 1 );
                    l_U631 = 1;
                }
                if ((NOT l_U627) AND ((l_U600) AND (l_U631)))
                {
                    sub_11032( "RB2_B2AV1", ref l_U831, 7, 1 );
                    l_U627 = 1;
                }
            }
        }
    }
    else if (iParam0 == 2)
    {
        if ((NOT (sub_12589( l_U831 ))) AND ((NOT (sub_12589( l_U825 ))) AND (NOT l_U642)))
        {
            if (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))
            {
                sub_11032( "RB2_PIC2A", ref l_U831, 7, 1 );
            }
            l_U642 = 1;
        }
    }
    if ((IS_CHAR_IN_CAR( sub_4155(), l_U678 )) AND ((l_U581 == 11) AND (l_U580 == 11)))
    {
        if (iParam0 == 1)
        {
            sub_20684();
        }
        else if (iParam0 == 2)
        {
            sub_21070();
        }
    }
    else
    {
        sub_21201();
        if (NOT (IS_CHAR_IN_CAR( sub_4155(), l_U678 )))
        {
            if (NOT l_U606)
            {
                PRINT_NOW( "RAY2_04", 7500, 1 );
                l_U607 = 0;
                l_U608 = 0;
                if (DOES_BLIP_EXIST( l_U702 ))
                {
                    REMOVE_BLIP( l_U702 );
                }
                if (DOES_BLIP_EXIST( l_U703 ))
                {
                    REMOVE_BLIP( l_U703 );
                }
                ADD_BLIP_FOR_CAR( l_U678, ref l_U698 );
                SET_BLIP_AS_FRIENDLY( l_U698, 1 );
                l_U606 = 1;
            }
        }
        else if (l_U606)
        {
            REMOVE_BLIP( l_U698 );
            if (LOCATE_CHAR_ANY_MEANS_3D( sub_4155(), uParam1._fU0, uParam1._fU4, uParam1._fU8, 15.00000000, 15.00000000, 6.00000000, 0 ))
            {
                if (l_U618)
                {
                    if (NOT ((l_U589 == 2) || (l_U589 == 1)))
                    {
                        PRINT_NOW( "RAY2_14", 7500, 1 );
                        PRINT_HELP( "RAY2_12" );
                    }
                    else
                    {
                        PRINT_NOW( "RAY2_08comp", 7500, 1 );
                    }
                }
                else
                {
                    PRINT_NOW( "RAY2_08comp", 7500, 1 );
                }
            }
            l_U606 = 0;
        }
        if (NOT (LOCATE_CHAR_ANY_MEANS_3D( sub_4155(), uParam1._fU0, uParam1._fU4, uParam1._fU8, 15.00000000, 15.00000000, 6.00000000, 0 )))
        {
            if (NOT l_U607)
            {
                l_U666 = 0;
                l_U607 = 1;
                REMOVE_BLIP( l_U698 );
                if (NOT (l_U580 == 11))
                {
                    sub_21903( ref l_U673, ref l_U580, l_U591, 0, 2 );
                    ADD_BLIP_FOR_CHAR( l_U673, ref l_U702 );
                    SET_BLIP_AS_FRIENDLY( l_U702, 1 );
                    l_U666++;
                }
                if (NOT (l_U581 == 11))
                {
                    sub_21903( ref l_U674, ref l_U581, l_U592, 0, 3 );
                    ADD_BLIP_FOR_CHAR( l_U674, ref l_U703 );
                    SET_BLIP_AS_FRIENDLY( l_U703, 1 );
                    l_U666++;
                }
            }
            if (NOT l_U608)
            {
                if (NOT (sub_12589( l_U831 )))
                {
                    if (l_U666 == 1)
                    {
                        if (l_U580 == 6)
                        {
                            PRINT_NOW( "RAY2_10A", 7500, 1 );
                        }
                        else
                        {
                            PRINT_NOW( "RAY2_10B", 7500, 1 );
                        }
                    }
                    else if (l_U666 == 2)
                    {
                        PRINT_NOW( "RAY2_09", 7500, 1 );
                    }
                    l_U608 = 1;
                }
            }
        }
        else if (l_U607)
        {
            l_U607 = 0;
            l_U608 = 0;
            l_U666 = 0;
            if (DOES_BLIP_EXIST( l_U702 ))
            {
                REMOVE_BLIP( l_U702 );
            }
            if (DOES_BLIP_EXIST( l_U703 ))
            {
                REMOVE_BLIP( l_U703 );
            }
            if (l_U618)
            {
                if (NOT ((l_U589 == 2) || (l_U589 == 1)))
                {
                    PRINT_NOW( "RAY2_14", 7500, 1 );
                    PRINT_HELP( "RAY2_12" );
                }
                else
                {
                    PRINT_NOW( "RAY2_08comp", 7500, 1 );
                }
            }
            else
            {
                PRINT_NOW( "RAY2_08comp", 7500, 1 );
            }
            if (l_U580 == 6)
            {
                if (l_U591)
                {
                    l_U580 = 4;
                }
                else if (l_U593)
                {
                    sub_17602( ref l_U673, 2, ref l_U580 );
                }
                else if (iParam0 == 1)
                {
                    sub_22784( ref l_U673, ref l_U580, ref l_U692 );
                }
                else if (iParam0 == 2)
                {
                    sub_22784( ref l_U673, ref l_U580, ref l_U694 );
                };;;;
            }
            if (l_U581 == 6)
            {
                if (l_U592)
                {
                    l_U581 = 4;
                }
                else if (l_U594)
                {
                    sub_17602( ref l_U674, 3, ref l_U581 );
                }
                else if (iParam0 == 1)
                {
                    sub_22784( ref l_U674, ref l_U581, ref l_U693 );
                }
                else if (iParam0 == 2)
                {
                    sub_22784( ref l_U674, ref l_U581, ref l_U695 );
                };;;;
            }
        };;;
    }
    return;
}

void sub_20684()
{
    l_U664 = 1;
    l_U580 = 1;
    l_U581 = 1;
    REMOVE_BLIP( l_U702 );
    REMOVE_BLIP( l_U703 );
    REMOVE_BLIP( l_U698 );
    l_U606 = 0;
    l_U607 = 0;
    l_U593 = 0;
    l_U594 = 0;
    l_U623 = 0;
    l_U618 = 0;
    l_U619 = 0;
    CREATE_OBJECT( l_U687, l_U749._fU0, l_U749._fU4, l_U749._fU8, ref l_U694, 1 );
    CREATE_OBJECT( l_U687, l_U752._fU0, l_U752._fU4, l_U752._fU8, ref l_U695, 1 );
    SET_OBJECT_PROOFS( l_U694, 1, 1, 1, 1, 1 );
    SET_OBJECT_PROOFS( l_U695, 1, 1, 1, 1, 1 );
    FREEZE_OBJECT_POSITION( l_U694, 1 );
    FREEZE_OBJECT_POSITION( l_U695, 1 );
    REMOVE_BLIP( l_U699 );
    if (NOT (DOES_BLIP_EXIST( l_U700 )))
    {
        ADD_BLIP_FOR_COORD( l_U710._fU0, l_U710._fU4, l_U710._fU8, ref l_U700 );
        SET_ROUTE( l_U700, 1 );
    }
    l_U849[0] = 700;
    l_U849[1] = 100;
    SET_WANTED_MULTIPLIER( 0.10000000 );
    l_U578 = 6;
    SETTIMERB( 0 );
    return;
}

void sub_21070()
{
    l_U664 = 2;
    l_U580 = 1;
    l_U581 = 1;
    REMOVE_BLIP( l_U702 );
    REMOVE_BLIP( l_U703 );
    REMOVE_BLIP( l_U698 );
    l_U606 = 0;
    l_U607 = 0;
    l_U618 = 0;
    l_U619 = 0;
    SET_WANTED_MULTIPLIER( 0.10000000 );
    SET_PLAYER_CONTROL( sub_7251(), 0 );
    l_U578 = 8;
    return;
}

void sub_21201()
{
    float fVar2;
    float fVar3;

    if (l_U580 >= 9)
    {
        l_U667 = 3;
    }
    else if (l_U581 >= 9)
    {
        l_U667 = 2;
    }
    else
    {
        GET_CHAR_COORDINATES( l_U673, ref l_U861, ref l_U862, ref l_U863 );
        GET_DISTANCE_BETWEEN_COORDS_3D( l_U788._fU0, l_U788._fU4, l_U788._fU8, l_U861, l_U862, l_U863, ref fVar2 );
        GET_CHAR_COORDINATES( l_U674, ref l_U861, ref l_U862, ref l_U863 );
        GET_DISTANCE_BETWEEN_COORDS_3D( l_U791._fU0, l_U791._fU4, l_U791._fU8, l_U861, l_U862, l_U863, ref fVar3 );
        if (fVar2 <= fVar3)
        {
            l_U667 = 2;
        }
        else
        {
            l_U667 = 3;
        }
    }
    return;
}

void sub_21903(unknown uParam0, unknown uParam1, unknown uParam2, boolean bParam3, int iParam4)
{
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (iParam4 == 2)
    {
        uVar7 = l_U593;
    }
    else if (iParam4 == 3)
    {
        uVar7 = l_U594;
    }
    if (NOT bParam3)
    {
        if ((uParam2) || (uVar7))
        {
            if (l_U664 == 0)
            {
                uVar8 = {l_U707};
            }
            else
            {
                uVar8 = {l_U710};
            }
            if (iParam4 == 2)
            {
                TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), uVar8._fU0, uVar8._fU4 + 1, uVar8._fU8, 2, -2, 2.00000000 );
            }
            else if (iParam4 == 3)
            {
                TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), uVar8._fU0 + 2, uVar8._fU4, uVar8._fU8, 2, -2, 2.00000000 );
            }
        }
        else
        {
            GET_CAR_COORDINATES( l_U678, ref l_U867, ref l_U868, ref l_U869 );
            TASK_TURN_CHAR_TO_FACE_COORD( (uParam0^), l_U867, l_U868, l_U869 );
        }
        (uParam1^) = 6;
    }
    else
    {
        GET_CAR_COORDINATES( l_U678, ref l_U867, ref l_U868, ref l_U869 );
        TASK_TURN_CHAR_TO_FACE_COORD( (uParam0^), l_U867, l_U868, l_U869 );
        (uParam1^) = 5;
    }
    return;
}

void sub_22784(unknown uParam0, unknown uParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;

    GET_OBJECT_COORDINATES( (uParam2^), ref uVar5, ref uVar6, ref uVar7 );
    if (NOT (IS_CHAR_INJURED( (uParam0^) )))
    {
        UNLOCK_RAGDOLL( (uParam0^), 0 );
        OPEN_SEQUENCE_TASK( ref l_U689 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, uVar5, uVar6, uVar7, 3, -2, 1.00000000 );
        TASK_TURN_CHAR_TO_FACE_COORD( 0, uVar5, uVar6, uVar7 );
        TASK_PAUSE( 0, 500 );
        TASK_PLAY_ANIM_NON_INTERRUPTABLE( 0, "GBGE_PICKUPRUBBISH", l_U871, 4.00000000, 0, 0, 0, 0, -1 );
        CLOSE_SEQUENCE_TASK( l_U689 );
        TASK_PERFORM_SEQUENCE( (uParam0^), l_U689 );
        CLEAR_SEQUENCE_TASK( l_U689 );
        (uParam1^) = 3;
    }
    return;
}

void sub_23148()
{
    if (((DOES_OBJECT_EXIST( l_U693 )) || (DOES_OBJECT_EXIST( l_U692 ))) AND (NOT l_U634))
    {
        if (TIMERB() >= 8000)
        {
            l_U634 = 1;
            if (NOT (l_U589 == 0))
            {
                if (NOT (l_U589 == 3))
                {
                    l_U589 = 3;
                    STOP_SOUND( l_U852 );
                    PLAY_SOUND_FROM_VEHICLE( l_U852, "GARBAGE_COMPACTOR_WITH_RUBBISH", l_U678 );
                }
                l_U635 = 1;
            }
        }
    }
    if (NOT l_U603)
    {
        if (NOT (LOCATE_CHAR_ANY_MEANS_3D( sub_4155(), l_U707._fU0, l_U707._fU4, l_U707._fU8, 50, 50, 10, 0 )))
        {
            SWITCH_ROADS_BACK_TO_ORIGINAL( l_U800._fU0, l_U800._fU4, l_U800._fU8, l_U803._fU0, l_U803._fU4, l_U803._fU8 );
            l_U603 = 1;
        }
    }
    if (IS_VEH_DRIVEABLE( l_U678 ))
    {
        if (IS_CHAR_SITTING_IN_CAR( sub_4155(), l_U678 ))
        {
            if ((NOT (sub_12589( l_U831 ))) AND ((NOT l_U627) AND (NOT IS_MESSAGE_BEING_DISPLAYED())))
            {
                sub_11032( "RB2_B2AV1", ref l_U831, 7, 1 );
                l_U627 = 1;
            }
            if ((TIMERA() >= 12500) AND ((NOT l_U647) AND ((NOT (sub_12589( l_U831 ))) AND ((NOT IS_MESSAGE_BEING_DISPLAYED()) AND ((NOT l_U628) AND (l_U621))))))
            {
                switch (g_U64956)
                {
                    case 0:
                    sub_11032( "RB2_B2AV2", ref l_U825, 7, 1 );
                    break;
                    case 1:
                    sub_11032( "RB2_B2V2", ref l_U825, 7, 1 );
                    break;
                    case 2:
                    SAY_AMBIENT_SPEECH( l_U672, "LISTEN_TO_RADIO", 0, 0, 0 );
                    break;
                }
                l_U670 = g_U64956;
                if (g_U64956 < 2)
                {
                    g_U64956++;
                }
                l_U628 = 1;
            }
            if ((NOT l_U647) AND ((l_U627) AND ((NOT l_U643) AND ((NOT l_U621) AND (NOT (sub_12589( l_U831 )))))))
            {
                PRINT_NOW( "RAY2_03", 7500, 1 );
                SETTIMERA( 0 );
                l_U621 = 1;
            }
            if ((l_U853 >= 3000) AND ((sub_16574( l_U825 )) AND (l_U628)))
            {
                switch (l_U670)
                {
                    case 0:
                    sub_16657( "RB2_B2AV2", ref l_U825, 7, 1 );
                    break;
                    case 1:
                    sub_16657( "RB2_B2V2", ref l_U825, 7, 1 );
                    break;
                }
            }
            if (NOT l_U647)
            {
                if (l_U610)
                {
                    GET_CAR_SPEED( l_U678, ref l_U870 );
                    if (l_U870 < 0.10000000)
                    {
                        SET_CAMERA_CONTROLS_DISABLED_WITH_PLAYER_CONTROLS( 1 );
                        SET_PLAYER_CONTROL( sub_7251(), 1 );
                        SET_WANTED_MULTIPLIER( 0.00000000 );
                        l_U578 = 7;
                        SETTIMERB( 0 );
                        REMOVE_BLIP( l_U700 );
                        sub_4418( ref l_U825, 0 );
                    }
                }
                if (NOT l_U610)
                {
                    if (LOCATE_CHAR_IN_CAR_3D( sub_4155(), l_U710._fU0, l_U710._fU4, l_U710._fU8, 3.20000000, 3.20000000, 3.20000000, 1 ))
                    {
                        SET_CAMERA_CONTROLS_DISABLED_WITH_PLAYER_CONTROLS( 0 );
                        SET_PLAYER_CONTROL( sub_7251(), 0 );
                        l_U610 = 1;
                    }
                    else if (LOCATE_CHAR_IN_CAR_3D( sub_4155(), l_U710._fU0, l_U710._fU4, l_U710._fU8, 12.00000000, 12.00000000, 6.00000000, 0 ))
                    {
                        if (NOT l_U643)
                        {
                            l_U643 = 1;
                        }
                    }
                }
            }
        }
        else
        {
            l_U578 = 2;
        }
        sub_24270();
    }
    return;
}

void sub_24270()
{
    GET_CAR_COORDINATES( l_U678, ref l_U867, ref l_U868, ref l_U869 );
    GET_DISTANCE_BETWEEN_COORDS_3D( l_U867, l_U868, l_U869, l_U710._fU0, l_U710._fU4, l_U710._fU8, ref l_U870 );
    if ((l_U604) AND (l_U870 < 350.00000000))
    {
        SWITCH_ROADS_OFF( l_U806._fU0, l_U806._fU4, l_U806._fU8, l_U809._fU0, l_U809._fU4, l_U809._fU8 );
        l_U604 = 0;
    }
    else if ((NOT l_U604) AND (l_U870 > 350.00000000))
    {
        SWITCH_ROADS_BACK_TO_ORIGINAL( l_U806._fU0, l_U806._fU4, l_U806._fU8, l_U809._fU0, l_U809._fU4, l_U809._fU8 );
        l_U604 = 1;
    }
    return;
}

void sub_24548()
{
    int I;

    if (l_U656)
    {
        l_U585 = 4;
    }
    if ((TIMERB() >= 1000) AND ((IS_SCREEN_FADED_IN()) AND ((NOT (l_U585 == 4)) AND ((NOT (l_U585 == 0)) AND (sub_24573())))))
    {
        CLEAR_PRINTS();
        CLEAR_HELP();
        sub_4418( ref l_U831, 1 );
        DO_SCREEN_FADE_OUT( 500 );
        while (NOT IS_SCREEN_FADED_OUT())
        {
            WAIT( 0 );
        }
        if ((IS_PLAYBACK_GOING_ON_FOR_CAR( l_U679 )) AND (IS_VEH_DRIVEABLE( l_U679 )))
        {
            STOP_PLAYBACK_RECORDED_CAR( l_U679 );
            REQUEST_CAR_RECORDING( 325 );
            while (NOT (HAS_CAR_RECORDING_BEEN_LOADED( 325 )))
            {
                WAIT( 0 );
            }
            if (IS_VEH_DRIVEABLE( l_U679 ))
            {
                START_PLAYBACK_RECORDED_CAR( l_U679, 325 );
                SKIP_TO_END_AND_STOP_PLAYBACK_RECORDED_CAR( l_U679 );
            }
        }
        l_U656 = 1;
        SETTIMERA( 0 );
    }
    if (NOT l_U637)
    {
        if (l_U636)
        {
            GET_SCRIPT_TASK_STATUS( l_U673, 80, ref l_U872 );
            if ((NOT (IS_CHAR_INJURED( l_U673 ))) AND (l_U872 == 7))
            {
                TASK_PLAY_ANIM_NON_INTERRUPTABLE( l_U673, "GBGE_HANGR", l_U871, 16.00000000, 1, 0, 0, 0, -1 );
                l_U637 = 1;
            }
        }
    }
    switch (l_U585)
    {
        case 0:
        if (NOT l_U611)
        {
            l_U611 = 1;
            DO_SCREEN_FADE_OUT( 500 );
        }
        else if (IS_SCREEN_FADED_OUT())
        {
            sub_4418( ref l_U831, 1 );
            sub_4418( ref l_U825, 1 );
            CLEAR_PRINTS();
            ENABLE_CHASE_AUDIO( 1 );
            REQUEST_CAR_RECORDING( 325 );
            while (NOT (HAS_CAR_RECORDING_BEEN_LOADED( 325 )))
            {
                WAIT( 0 );
            }
            SET_USE_HIGHDOF( 1 );
            if (NOT (IS_CAR_DEAD( l_U678 )))
            {
                CONTROL_CAR_DOOR( l_U678, 5, 1, 0.00000000 );
                l_U820 = 0.00000000;
                l_U589 = 0;
                STOP_SOUND( l_U852 );
            }
            if (DOES_OBJECT_EXIST( l_U694 ))
            {
                DELETE_OBJECT( ref l_U694 );
            }
            if (DOES_OBJECT_EXIST( l_U695 ))
            {
                DELETE_OBJECT( ref l_U695 );
            }
            SET_INSTANT_WIDESCREEN_BORDERS( 1 );
            CLEAR_AREA( l_U710._fU0, l_U710._fU4, l_U710._fU8, 80.00000000, 1 );
            WAIT( 0 );
            if (IS_VEH_DRIVEABLE( l_U678 ))
            {
                SET_CAR_FORWARD_SPEED( l_U678, 0.00000000 );
            }
            if (NOT (IS_CHAR_INJURED( l_U673 )))
            {
                DETACH_PED( l_U673, 1 );
                SWITCH_PED_TO_ANIMATED( l_U673, 1 );
                ATTACH_PED_TO_CAR( l_U673, l_U678, 0, l_U767, 0.00000000, 0.00000000, 1, 1 );
                TASK_PLAY_ANIM_NON_INTERRUPTABLE( l_U673, "GBGE_HANGON", l_U871, 8.00000000, 1, 0, 0, 0, -1 );
                l_U582 = 0;
            }
            REQUEST_MODEL( l_U682 );
            REQUEST_MODEL( l_U686 );
            REQUEST_MODEL( -196312163 );
            LOAD_ALL_OBJECTS_NOW();
            while ((NOT (HAS_MODEL_LOADED( -196312163 ))) || ((NOT (HAS_MODEL_LOADED( l_U686 ))) || (NOT (HAS_MODEL_LOADED( l_U682 )))))
            {
                WAIT( 0 );
            }
            BEGIN_CAM_COMMANDS( ref l_U665 );
            CREATE_CAM( 14, ref l_U840 );
            CREATE_CAM( 14, ref l_U841 );
            CREATE_CAM( 14, ref l_U842 );
            CREATE_CAM( 3, ref l_U845 );
            SET_CAM_POS( l_U840, -363.56440000, -45.51610000, 14.88093000 );
            SET_CAM_ROT( l_U840, -0.27154900, -0.00000000, -164.92200000 );
            SET_CAM_POS( l_U841, -363.56440000, -45.51610000, 14.88093000 );
            SET_CAM_ROT( l_U841, -0.27154900, 0.00000000, -100.05060000 );
            SET_CAM_FOV( l_U840, 36.00000000 );
            SET_CAM_FOV( l_U841, 36.00000000 );
            SET_CAM_NEAR_DOF( l_U840, 1.00000000 );
            SET_CAM_NEAR_DOF( l_U841, 1.00000000 );
            SET_CAM_FAR_DOF( l_U840, 50.00000000 );
            SET_CAM_FAR_DOF( l_U841, 50.00000000 );
            SET_CAM_ACTIVE( l_U840, 1 );
            SET_CAM_PROPAGATE( l_U840, 1 );
            SET_CAM_ACTIVE( l_U841, 1 );
            SET_CAM_PROPAGATE( l_U841, 1 );
            ACTIVATE_SCRIPTED_CAMS( 1, 1 );
            END_CAM_COMMANDS( ref l_U665 );
            LOAD_SCENE( -363.56440000, -45.51610000, 14.88093000 );
            WAIT( 2000 );
            CLEAR_AREA_OF_CARS( l_U737._fU0, l_U737._fU4, l_U737._fU8, 500.00000000 );
            SET_CAR_DENSITY_MULTIPLIER( 0.00000000 );
            SET_PED_DENSITY_MULTIPLIER( 0.00000000 );
            WAIT( 0 );
            CREATE_CAR( l_U682, l_U737._fU0, l_U737._fU4, l_U737._fU8, ref l_U679, 1 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 1, 1 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 2, 1 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 3, 1 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 4, 1 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 5, 0 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 6, 0 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 7, 0 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 8, 1 );
            TURN_OFF_VEHICLE_EXTRA( l_U679, 9, 1 );
            CREATE_CHAR_INSIDE_CAR( l_U679, 26, l_U686, ref l_U675[0] );
            CREATE_CHAR_AS_PASSENGER( l_U679, 26, l_U686, 0, ref l_U675[1] );
            if ((sub_26317()) AND ((sub_12341()) AND ((NOT sub_10473()) AND (IS_VEH_DRIVEABLE( l_U679 )))))
            {
                SET_CHAR_RANDOM_COMPONENT_VARIATION( l_U675[0] );
                SET_CHAR_RANDOM_COMPONENT_VARIATION( l_U675[1] );
                SET_CHAR_KEEP_TASK( l_U675[0], 1 );
                SET_CHAR_KEEP_TASK( l_U675[1], 1 );
                SET_CHAR_ONLY_DAMAGED_BY_PLAYER( l_U675[0], 1 );
                LOCK_CAR_DOORS( l_U679, 2 );
                # -sub_C1FFC0-0xc214c8( 2, ref l_U838 );
                LOAD_COMBAT_DECISION_MAKER( 3, ref l_U839 );
                SET_DECISION_MAKER_ATTRIBUTE_WEAPON_ACCURACY( l_U839, 6 );
                for ( I = 0; I <= 1; I++ )
                {
                    SET_CHAR_RELATIONSHIP_GROUP( l_U675[I], 23 );
                    SET_CHAR_DECISION_MAKER( l_U675[I], l_U838 );
                    SET_COMBAT_DECISION_MAKER( l_U675[I], l_U839 );
                }
                SET_COMBAT_DECISION_MAKER( l_U672, l_U839 );
                SET_CHAR_WILL_USE_CARS_IN_COMBAT( l_U675[0], 1 );
                START_PLAYBACK_RECORDED_CAR( l_U679, 325 );
                SKIP_TIME_IN_PLAYBACK_RECORDED_CAR( l_U679, 5000 );
                SET_PLAYBACK_SPEED( l_U679, 1.20000000 );
                if (NOT (IS_CHAR_DEAD( l_U675[1] )))
                {
                    GIVE_WEAPON_TO_CHAR( l_U675[1], 12, 30000, 0 );
                    SET_CURRENT_CHAR_WEAPON( l_U675[1], 12, 0 );
                }
                if (NOT (IS_CHAR_DEAD( l_U672 )))
                {
                    GIVE_WEAPON_TO_CHAR( l_U672, 12, 30000, 0 );
                    SET_CURRENT_CHAR_WEAPON( l_U672, 12, 0 );
                }
            }
            BEGIN_CAM_COMMANDS( ref l_U665 );
            SET_CAM_INTERP_STYLE_CORE( l_U845, l_U840, l_U841, 5100, 0 );
            SET_CAM_ACTIVE( l_U845, 1 );
            SET_CAM_PROPAGATE( l_U845, 1 );
            END_CAM_COMMANDS( ref l_U665 );
            l_U585 = 1;
            l_U611 = 0;
            DO_SCREEN_FADE_IN( 500 );
            while (NOT IS_SCREEN_FADED_IN())
            {
                WAIT( 0 );
            }
            SETTIMERA( 0 );
            SETTIMERB( 0 );
        }
        break;
        case 1:
        if (TIMERA() > 3350)
        {
            BEGIN_CAM_COMMANDS( ref l_U665 );
            if ((NOT (IS_CHAR_DEAD( l_U673 ))) AND (NOT (IS_CAR_DEAD( l_U678 ))))
            {
                ATTACH_CAM_TO_VEHICLE( l_U842, l_U678 );
                SET_CAM_ATTACH_OFFSET( l_U842, 1.70000000, -6.31000000, 0.92299990 );
                SET_CAM_ATTACH_OFFSET_IS_RELATIVE( l_U842, 1 );
                POINT_CAM_AT_PED( l_U842, l_U673 );
                SET_CAM_POINT_OFFSET( l_U842, -0.21200000, 0.22000000, 0.52400000 );
                SET_CAM_POINT_OFFSET_IS_RELATIVE( l_U842, 1 );
                SET_CAM_FOV( l_U842, 55.30000000 );
                SET_CAM_NEAR_DOF( l_U842, 0.25000000 );
                SET_CAM_FAR_DOF( l_U842, 12.00000000 );
            }
            SET_CAM_ACTIVE( l_U845, 0 );
            SET_CAM_PROPAGATE( l_U845, 0 );
            SET_CAM_ACTIVE( l_U840, 0 );
            SET_CAM_PROPAGATE( l_U840, 0 );
            SET_CAM_ACTIVE( l_U841, 0 );
            SET_CAM_PROPAGATE( l_U841, 0 );
            SET_CAM_ACTIVE( l_U842, 1 );
            SET_CAM_PROPAGATE( l_U842, 1 );
            END_CAM_COMMANDS( ref l_U665 );
            l_U585 = 2;
            SETTIMERA( 0 );
        }
        break;
        case 2:
        if ((NOT (IS_CHAR_DEAD( l_U673 ))) AND (NOT l_U636))
        {
            TASK_PLAY_ANIM( l_U673, "GBGE_WARN", l_U871, 10.00000000, 0, 0, 0, 0, -1 );
            l_U636 = 1;
            sub_4418( ref l_U831, 0 );
            sub_11032( "RB2_CHASE", ref l_U831, 7, 1 );
        }
        if (TIMERA() > 2350)
        {
            l_U585 = 4;
            SETTIMERA( 0 );
            l_U870 = 0;
        }
        break;
        case 4:
        BEGIN_CAM_COMMANDS( ref l_U665 );
        SET_CAM_ACTIVE( l_U840, 0 );
        SET_CAM_PROPAGATE( l_U840, 0 );
        SET_CAM_ACTIVE( l_U842, 0 );
        SET_CAM_PROPAGATE( l_U842, 0 );
        ACTIVATE_SCRIPTED_CAMS( 0, 0 );
        DESTROY_ALL_CAMS();
        END_CAM_COMMANDS( ref l_U665 );
        SET_USE_HIGHDOF( 0 );
        SET_GAME_CAM_HEADING( 0.00000000 );
        if (IS_VEH_DRIVEABLE( l_U679 ))
        {
            if (IS_PLAYBACK_GOING_ON_FOR_CAR( l_U679 ))
            {
                STOP_PLAYBACK_RECORDED_CAR( l_U679 );
            }
            sub_27591();
        }
        if ((NOT (IS_CHAR_DEAD( l_U672 ))) AND (NOT (IS_CHAR_DEAD( l_U675[1] ))))
        {
            TASK_DRIVE_BY( l_U675[1], sub_4155(), 0, 0.00000000, 0.00000000, 0.00000000, 40.00000000, 4, 1, 25 );
            TASK_DRIVE_BY( l_U672, 0, l_U679, 0.00000000, 0.00000000, 0.00000000, 20.00000000, 4, 1, 20 );
        }
        if (NOT (IS_CHAR_DEAD( l_U673 )))
        {
            TASK_PLAY_ANIM_NON_INTERRUPTABLE( l_U673, "GBGE_HANGR", l_U871, 16.00000000, 1, 0, 0, 0, -1 );
        }
        if (NOT (IS_CHAR_DEAD( l_U674 )))
        {
            DETACH_PED( l_U674, 1 );
            SWITCH_PED_TO_ANIMATED( l_U674, 1 );
            ATTACH_PED_TO_CAR( l_U674, l_U678, 0, l_U773, 0.00000000, 0.00000000, 1, 1 );
            GIVE_WEAPON_TO_CHAR( l_U674, 7, 30000, 0 );
            SET_CURRENT_CHAR_WEAPON( l_U674, 7, 1 );
            TASK_PLAY_ANIM_NON_INTERRUPTABLE( l_U674, "GBGE_shoot", l_U871, 16.00000000, 1, 0, 0, 0, -1 );
            l_U583 = 0;
        }
        SET_INSTANT_WIDESCREEN_BORDERS( 0 );
        l_U664 = 2;
        if (NOT (DOES_BLIP_EXIST( l_U701 )))
        {
            ADD_BLIP_FOR_COORD( l_U713._fU0, l_U713._fU4, l_U713._fU8, ref l_U701 );
            SET_ROUTE( l_U701, 1 );
        }
        l_U578 = 9;
        l_U617 = 1;
        SET_WANTED_MULTIPLIER( 0.10000000 );
        SET_CAR_DENSITY_MULTIPLIER( 0.30000000 );
        SET_PED_DENSITY_MULTIPLIER( 0.20000000 );
        ENABLE_CHASE_AUDIO( 0 );
        l_U647 = 0;
        l_U645 = 0;
        if (l_U656)
        {
            DO_SCREEN_FADE_IN( 500 );
            while (NOT IS_SCREEN_FADED_IN())
            {
                WAIT( 0 );
            }
        }
        else
        {
            INCREMENT_INT_STAT_NO_MESSAGE( 373, 1 );
        }
        l_U656 = 0;
        SETTIMERA( 0 );
        SETTIMERB( 0 );
        SET_PLAYER_CONTROL( sub_7251(), 1 );
        break;
    }
    return;
}

int sub_24573()
{
    if (((IS_CONTROL_JUST_PRESSED( 2, 98 )) AND (NOT IS_USING_CONTROLLER())) || (((IS_CONTROL_JUST_PRESSED( 2, 137 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_JUST_PRESSED( 2, 77 )) || (IS_CONTROL_JUST_PRESSED( 0, 77 )))))
    {
        return 1;
        break;
    }
    return 0;
}

int sub_26317()
{
    if ((NOT (IS_CHAR_INJURED( l_U675[1] ))) AND (NOT (IS_CHAR_INJURED( l_U675[0] ))))
    {
        return 1;
        break;
    }
    return 0;
}

void sub_27591()
{
    if ((NOT (IS_CHAR_INJURED( l_U675[0] ))) AND (IS_VEH_DRIVEABLE( l_U679 )))
    {
        TASK_CAR_MISSION( l_U675[0], l_U679, l_U678, 7, 25, 2, 12, -1 );
    }
    return;
}

void sub_28268()
{
    boolean bVar2;

    if (IS_VEH_DRIVEABLE( l_U678 ))
    {
        if (l_U616)
        {
            if (NOT sub_28304())
            {
                if (TIMERB() <= 50000)
                {
                    if (NOT ((LOCATE_CHAR_IN_CAR_3D( sub_4155(), l_U713._fU0, l_U713._fU4, l_U713._fU8, 150, 150, 150, 0 )) AND (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))))
                    {
                        sub_28505();
                    }
                    else
                    {
                        sub_30140();
                        l_U616 = 0;
                    }
                }
                else if ((LOCATE_CHAR_IN_CAR_3D( sub_4155(), l_U713._fU0, l_U713._fU4, l_U713._fU8, 150, 150, 150, 0 )) AND (IS_CHAR_IN_CAR( sub_4155(), l_U678 )))
                {
                    sub_30140();
                    l_U616 = 0;
                }
            }
            else if (NOT l_U651)
            {
                sub_30431();
            }
            l_U616 = 0;;
        }
        else if (l_U650)
        {
            if (NOT l_U651)
            {
                if (IS_VEH_DRIVEABLE( l_U679 ))
                {
                    if (sub_28304())
                    {
                        sub_30431();
                    }
                }
                else
                {
                    sub_30431();
                }
            }
        }
        else if (NOT l_U651)
        {
            sub_30431();
        };;;
        if (NOT l_U652)
        {
            if ((IS_CHAR_INJURED( l_U675[1] )) AND (IS_CHAR_INJURED( l_U675[0] )))
            {
                if (NOT (IS_CAR_DEAD( l_U679 )))
                {
                    LOCK_CAR_DOORS( l_U679, 1 );
                    l_U652 = 1;
                }
            }
        }
        if (IS_CHAR_SITTING_IN_CAR( sub_4155(), l_U678 ))
        {
            if (DOES_BLIP_EXIST( l_U698 ))
            {
                REMOVE_BLIP( l_U698 );
            }
            if (NOT (DOES_BLIP_EXIST( l_U701 )))
            {
                ADD_BLIP_FOR_COORD( l_U713._fU0, l_U713._fU4, l_U713._fU8, ref l_U701 );
                SET_ROUTE( l_U701, 1 );
            }
            if (l_U606)
            {
                l_U606 = 0;
                l_U632 = 0;
                l_U633 = 0;
                PRINT_NOW( "RAY2_05", 7500, 1 );
                l_U853 = 0;
            }
            if ((NOT (sub_12589( l_U831 ))) AND ((NOT l_U629) AND (NOT IS_MESSAGE_BEING_DISPLAYED())))
            {
                sub_11032( "RB2_B3AV1", ref l_U831, 7, 1 );
                l_U629 = 1;
            }
            if ((NOT (sub_12589( l_U831 ))) AND ((NOT IS_MESSAGE_BEING_DISPLAYED()) AND ((NOT l_U654) AND ((NOT l_U653) AND ((NOT l_U630) AND (l_U622))))))
            {
                switch (g_U64957)
                {
                    case 0:
                    sub_11032( "RB2_B3AV2", ref l_U825, 7, 1 );
                    break;
                    case 1:
                    sub_11032( "RB2_B3V3", ref l_U825, 7, 1 );
                    break;
                    case 2:
                    SAY_AMBIENT_SPEECH( l_U672, "LISTEN_TO_RADIO", 0, 0, 0 );
                    break;
                }
                l_U671 = g_U64957;
                if (g_U64957 < 2)
                {
                    g_U64957++;
                }
                l_U630 = 1;
            }
            if ((l_U629) AND ((NOT l_U622) AND (NOT (sub_12589( l_U831 )))))
            {
                PRINT_NOW( "RAY2_05", 7500, 1 );
                l_U622 = 1;
            }
            if ((NOT (sub_12589( l_U825 ))) AND (NOT (sub_12589( l_U831 ))))
            {
                if ((l_U853 >= 3000) AND ((NOT l_U653) AND (NOT l_U654)))
                {
                    if ((DOES_VEHICLE_EXIST( l_U679 )) AND ((IS_CHAR_DEAD( l_U675[0] )) || (l_U649)))
                    {
                        sub_11032( "RB2_MAFDIE", ref l_U831, 7, 1 );
                        l_U653 = 1;
                    }
                    else if (l_U651)
                    {
                        sub_11032( "RB2_LOST", ref l_U831, 7, 1 );
                        l_U654 = 1;
                    }
                }
            }
            if ((l_U853 >= 3000) AND ((sub_16574( l_U825 )) AND (l_U630)))
            {
                if (NOT ((IS_CHAR_DEAD( l_U675[0] )) || (l_U649)))
                {
                    switch (l_U671)
                    {
                        case 0:
                        sub_16657( "RB2_B3AV2", ref l_U825, 7, 1 );
                        break;
                        case 1:
                        sub_16657( "RB2_B3V3", ref l_U825, 7, 1 );
                        break;
                    }
                }
            }
            if ((l_U616) AND ((NOT (IS_CHAR_INJURED( l_U672 ))) AND (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))))
            {
                if ((NOT IS_MESSAGE_BEING_DISPLAYED()) AND ((l_U630) AND ((NOT (sub_12589( l_U831 ))) AND (NOT (sub_12589( l_U825 ))))))
                {
                    bVar2 = false;
                    if ((NOT (IS_CHAR_INJURED( l_U675[1] ))) AND (NOT (IS_CAR_DEAD( l_U679 ))))
                    {
                        if (HAS_CAR_BEEN_DAMAGED_BY_CHAR( l_U678, l_U675[1] ))
                        {
                            GENERATE_RANDOM_INT_IN_RANGE( 0, 14, ref l_U847 );
                            if (l_U847 == 0)
                            {
                                sub_11032( "RB2_BASH", ref l_U831, 6, 1 );
                                CLEAR_CAR_LAST_DAMAGE_ENTITY( l_U678 );
                                l_U822 = 0.00000000;
                                GENERATE_RANDOM_FLOAT_IN_RANGE( 9.00000000, 12.00000000, ref l_U823 );
                                bVar2 = true;
                            }
                            else if (l_U847 == 1)
                            {
                                if (NOT (IS_CHAR_INJURED( l_U673 )))
                                {
                                    sub_11032( "RB2_SHOUTS", ref l_U831, 6, 1 );
                                    CLEAR_CAR_LAST_DAMAGE_ENTITY( l_U678 );
                                    l_U822 = 0.00000000;
                                    GENERATE_RANDOM_FLOAT_IN_RANGE( 9.00000000, 12.00000000, ref l_U823 );
                                    bVar2 = true;
                                }
                            }
                        }
                    }
                    if (NOT bVar2)
                    {
                        if (l_U822 >= l_U823)
                        {
                            if (IS_CHAR_SHOOTING( l_U672 ))
                            {
                                sub_11032( "RB2_SHOOT", ref l_U831, 6, 1 );
                            }
                            else
                            {
                                sub_11032( "RB2_LYELL", ref l_U831, 6, 1 );
                            }
                            l_U822 = 0.00000000;
                            GENERATE_RANDOM_FLOAT_IN_RANGE( 9.00000000, 12.00000000, ref l_U823 );
                        }
                        else
                        {
                            l_U822 += 1.00000000 * TIMESTEP();
                        }
                    }
                }
            }
            if ((sub_13907( 1, 1 )) AND (LOCATE_CHAR_IN_CAR_3D( sub_4155(), l_U713._fU0, l_U713._fU4, l_U713._fU8, 3.20000000, 3.20000000, 3.20000000, 1 )))
            {
                SET_PLAYER_CONTROL( sub_7251(), 0 );
                SETTIMERB( 0 );
                SET_WANTED_MULTIPLIER( 0.00000000 );
                l_U578 = 10;
            }
            else if ((NOT l_U644) AND (LOCATE_CHAR_IN_CAR_3D( sub_4155(), l_U713._fU0, l_U713._fU4, l_U713._fU8, 18.00000000, 18.00000000, 5.00000000, 0 )))
            {
                CLEAR_PRINTS();
                sub_4418( ref l_U825, 0 );
                sub_11032( "RB2_END", ref l_U831, 8, 1 );
                l_U644 = 1;
            }
        }
        else if (NOT l_U606)
        {
            l_U606 = 1;
        }
        sub_18711();;
    }
    return;
}

int sub_28304()
{
    if (IS_CAR_DEAD( l_U679 ))
    {
        return 1;
        break;
    }
    if ((NOT (LOCATE_CHAR_ANY_MEANS_CAR_3D( sub_4155(), l_U679, 115, 115, 115, 0 ))) AND (IS_CHAR_IN_CAR( sub_4155(), l_U678 )))
    {
        return 1;
        break;
    }
    return 0;
}

void sub_28505()
{
    unknown uVar2;

    GET_CAR_SPEED( l_U678, ref uVar2 );
    if ((NOT (IS_CHAR_INJURED( l_U675[0] ))) AND (IS_VEH_DRIVEABLE( l_U679 )))
    {
        if (NOT (LOCATE_CHAR_ANY_MEANS_CAR_3D( sub_4155(), l_U679, 25.00000000, 25.00000000, 25.00000000, 0 )))
        {
            if (NOT (IS_CAR_ON_SCREEN( l_U679 )))
            {
                sub_28635( ref l_U679, 25.00000000, 16.00000000, uVar2, 8 );
            }
        }
    }
    return;
}

int sub_28635(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (NOT (IS_CAR_DEAD( (uParam0^) )))
    {
        if (NOT (LOCATE_CHAR_ANY_MEANS_CAR_3D( sub_4155(), (uParam0^), uParam1, uParam1, uParam1, 0 )))
        {
            if (NOT (IS_CAR_ON_SCREEN( (uParam0^) )))
            {
                if (iParam4 == 8)
                {
                    uVar8 = {sub_28717( uParam0, uParam2 )};
                }
                else
                {
                    uVar8 = {sub_28832( iParam4, uParam2, 0 )};
                }
                return sub_29763( uParam0, uVar8, uParam3 );
            }
        }
    }
    return 0;
}

void sub_28717(unknown uParam0, unknown uParam1)
{
    vector Result;
    vector vVar7;

    GET_CAR_COORDINATES( (uParam0^), ref Result.x, ref Result.y, ref Result.z );
    GET_CHAR_COORDINATES( sub_4155(), ref vVar7.x, ref vVar7.y, ref vVar7.z );
    Result = {Result - vVar7};
    Result = {Result * (uParam1 / (VMAG( Result )))};
    Result = {Result + vVar7};
    return Result;
}

void sub_28832(unknown uParam0, unknown uParam1, boolean bParam2)
{
    unknown Result;
    unknown uVar6;
    unknown uVar7;

    switch (uParam0)
    {
        case 0:
        if (bParam2)
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), (uParam1 * 0.80000000) * -1.00000000, uParam1 * 0.80000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        else
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), uParam1 * -1.00000000, uParam1, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        break;
        case 1:
        if (bParam2)
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), 0.00000000, uParam1, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        else
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), 0.00000000, uParam1, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        break;
        case 2:
        if (bParam2)
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), uParam1 * 0.80000000, uParam1 * 0.80000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        else
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), uParam1 * 0.80000000, uParam1 * 0.80000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        break;
        case 3:
        if (bParam2)
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), uParam1 * 0.80000000, 0.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        else
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), uParam1, 0.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        break;
        case 4:
        if (bParam2)
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), uParam1 * 0.65000000, (uParam1 * 0.65000000) * -1.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        else
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), uParam1 * 0.80000000, (uParam1 * 0.80000000) * -1.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        break;
        case 5:
        if (bParam2)
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), 0.00000000, (uParam1 * -1.00000000) * 0.65000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        else
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), 0.00000000, uParam1 * -1.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        break;
        case 6:
        if (bParam2)
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), (uParam1 * 0.65000000) * -1.00000000, (uParam1 * 0.65000000) * -1.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        else
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), (uParam1 * 0.80000000) * -1.00000000, (uParam1 * 0.80000000) * -1.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        break;
        case 7:
        if (bParam2)
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), (uParam1 * -1.00000000) * 0.80000000, 0.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        else
        {
            GET_OFFSET_FROM_CHAR_IN_WORLD_COORDS( sub_4155(), uParam1 * -1.00000000, 0.00000000, 0.00000000, ref Result._fU0, ref Result._fU4, ref Result._fU8 );
        }
        break;
    }
    return Result;
}

int sub_29763(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    float fVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;

    if (NOT (IS_CAR_DEAD( (uParam0^) )))
    {
        GET_CHAR_COORDINATES( sub_4155(), ref uVar7._fU0, ref uVar7._fU4, ref uVar7._fU8 );
        GET_NTH_CLOSEST_CAR_NODE_FAVOUR_DIRECTION( uParam1, uVar7, 1, ref uVar10, ref uVar13 );
        if (NOT (IS_POINT_OBSCURED_BY_A_MISSION_ENTITY( uVar10._fU0, uVar10._fU4, uVar10._fU8, 10.00000000, 10.00000000, 10.00000000 )))
        {
            GET_GAME_VIEWPORT_ID( ref uVar14 );
            if (NOT (CAM_IS_SPHERE_VISIBLE( uVar14, uVar10._fU0, uVar10._fU4, uVar10._fU8, 8.00000000 )))
            {
                CLEAR_AREA( uVar10._fU0, uVar10._fU4, uVar10._fU8, 6.00000000, 0 );
                SET_CAR_COORDINATES( (uParam0^), uVar10._fU0, uVar10._fU4, uVar10._fU8 );
                uVar16 = {-SIN( uVar13 ), COS( uVar13 ), 0.00000000};
                GET_ANGLE_BETWEEN_2D_VECTORS( uVar16._fU0, uVar16._fU4, uVar7._fU0 - uVar10._fU0, uVar7._fU4 - uVar10._fU4, ref fVar15 );
                if (fVar15 > 90.00000000)
                {
                    SET_CAR_HEADING( (uParam0^), uVar13 + 180.00000000 );
                }
                else
                {
                    SET_CAR_HEADING( (uParam0^), uVar13 );
                }
                SET_CAR_FORWARD_SPEED( (uParam0^), uParam4 );
                return 1;
            }
        }
    }
    return 0;
}

void sub_30140()
{
    if (IS_VEH_DRIVEABLE( l_U679 ))
    {
        if (NOT (IS_CHAR_INJURED( l_U675[0] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U688 );
            TASK_CAR_DRIVE_TO_COORD( 0, l_U679, l_U737._fU0, l_U737._fU4, l_U737._fU8, 10.00000000, 0, l_U682, 2, -1, -1 );
            TASK_CAR_DRIVE_WANDER( 0, l_U679, 10.00000000, 2 );
            CLOSE_SEQUENCE_TASK( l_U688 );
            TASK_PERFORM_SEQUENCE( l_U675[0], l_U688 );
            CLEAR_SEQUENCE_TASK( l_U688 );
        }
    }
    l_U650 = 1;
    return;
}

void sub_30431()
{
    if (DOES_VEHICLE_EXIST( l_U679 ))
    {
        MARK_CAR_AS_NO_LONGER_NEEDED( ref l_U679 );
        MARK_MODEL_AS_NO_LONGER_NEEDED( l_U682 );
    }
    if (DOES_CHAR_EXIST( l_U675[0] ))
    {
        MARK_CHAR_AS_NO_LONGER_NEEDED( ref l_U675[0] );
    }
    if (DOES_CHAR_EXIST( l_U675[1] ))
    {
        MARK_CHAR_AS_NO_LONGER_NEEDED( ref l_U675[1] );
        MARK_MODEL_AS_NO_LONGER_NEEDED( l_U686 );
    }
    l_U651 = 1;
    return;
}

void sub_32348()
{
    if ((TIMERB() >= 1000) AND ((IS_SCREEN_FADED_IN()) AND ((NOT (l_U586 == 2)) AND ((NOT (l_U586 == 0)) AND (sub_24573())))))
    {
        CLEAR_PRINTS();
        sub_4418( ref l_U831, 0 );
        DO_SCREEN_FADE_OUT( 500 );
        while (NOT IS_SCREEN_FADED_OUT())
        {
            WAIT( 0 );
        }
        l_U586 = 2;
        l_U656 = 1;
        SETTIMERA( 0 );
    }
    switch (l_U586)
    {
        case 0:
        if (NOT l_U611)
        {
            DO_SCREEN_FADE_OUT( 500 );
            l_U611 = 1;
        }
        else if (IS_SCREEN_FADED_OUT())
        {
            while (sub_12589( l_U831 ))
            {
                WAIT( 0 );
            }
            CLEAR_PRINTS();
            CLEAR_AREA( l_U713._fU0, l_U713._fU4, l_U713._fU8, 6, 1 );
            EXTINGUISH_FIRE_AT_POINT( l_U713._fU0, l_U713._fU4, l_U713._fU8, 30 );
            CLEAR_WANTED_LEVEL( sub_7251() );
            SET_INSTANT_WIDESCREEN_BORDERS( 1 );
            SWITCH_ROADS_BACK_TO_ORIGINAL( l_U806._fU0, l_U806._fU4, l_U806._fU8, l_U809._fU0, l_U809._fU4, l_U809._fU8 );
            l_U604 = 1;
            REMOVE_BLIP( l_U701 );
            BEGIN_CAM_COMMANDS( ref l_U665 );
            SET_USE_HIGHDOF( 1 );
            CREATE_CAM( 14, ref l_U843 );
            CREATE_CAM( 14, ref l_U844 );
            CREATE_CAM( 3, ref l_U845 );
            SET_CAM_POS( l_U843, 357.54910000, -378.28270000, 4.94550700 );
            SET_CAM_ROT( l_U843, 0.25323400, -0.00000000, -16.27912000 );
            SET_CAM_POS( l_U844, 358.46730000, -381.09680000, 4.94050600 );
            SET_CAM_ROT( l_U844, 2.91000000, -0.00000000, -24.50000000 );
            SET_CAM_FOV( l_U843, 42.30000000 );
            SET_CAM_FOV( l_U844, 42.30000000 );
            SET_CAM_NEAR_DOF( l_U843, 0.50000000 );
            SET_CAM_NEAR_DOF( l_U844, 0.50000000 );
            SET_CAM_FAR_DOF( l_U843, 10.00000000 );
            SET_CAM_FAR_DOF( l_U844, 10.00000000 );
            SET_CAM_INTERP_STYLE_CORE( l_U845, l_U843, l_U844, 6000, 0 );
            SET_CAM_ACTIVE( l_U843, 1 );
            SET_CAM_PROPAGATE( l_U843, 1 );
            SET_CAM_ACTIVE( l_U844, 1 );
            SET_CAM_PROPAGATE( l_U844, 1 );
            SET_CAM_ACTIVE( l_U845, 1 );
            SET_CAM_PROPAGATE( l_U845, 1 );
            ACTIVATE_SCRIPTED_CAMS( 1, 1 );
            END_CAM_COMMANDS( ref l_U665 );
            if (IS_VEH_DRIVEABLE( l_U678 ))
            {
                CLEAR_AREA( 360.50390000, -371.62610000, 4.45250000, 9.00000000, 1 );
                SET_CAR_COORDINATES( l_U678, 360.50390000, -371.62610000, 4.45250000 );
                SET_CAR_HEADING( l_U678, 0 );
                SET_CAR_ON_GROUND_PROPERLY( l_U678 );
            }
            WAIT( 0 );
            REQUEST_ANIMS( "gestures@niko" );
            while (NOT (HAVE_ANIMS_LOADED( "gestures@niko" )))
            {
                WAIT( 0 );
            }
            if ((IS_VEH_DRIVEABLE( l_U678 )) AND (NOT (IS_CHAR_INJURED( sub_4155() ))))
            {
                if (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))
                {
                    WARP_CHAR_FROM_CAR_TO_COORD( sub_4155(), 357.90000000, -373.19860000, 3.66900000 );
                }
                else
                {
                    SET_CHAR_COORDINATES_NO_OFFSET( sub_4155(), 357.90000000, -373.19860000, 4.66900000 );
                }
                SET_CHAR_HEADING( sub_4155(), 180 );
                CLEAR_CHAR_TASKS_IMMEDIATELY( sub_4155() );
                SET_CURRENT_CHAR_WEAPON( sub_4155(), 0, 1 );
                OPEN_SEQUENCE_TASK( ref l_U688 );
                TASK_GO_STRAIGHT_TO_COORD( 0, 358.68000000, -377.91010000, 3.66950000, 2, -1 );
                TASK_ACHIEVE_HEADING( 0, 247.30000000 );
                if (NOT (IS_CHAR_DEAD( l_U672 )))
                {
                    TASK_LOOK_AT_CHAR( 0, l_U672, 50000, 0 );
                }
                CLOSE_SEQUENCE_TASK( l_U688 );
                TASK_PERFORM_SEQUENCE( sub_4155(), l_U688 );
                CLEAR_SEQUENCE_TASK( l_U688 );
            }
            if (NOT (IS_CHAR_INJURED( l_U672 )))
            {
                WARP_CHAR_FROM_CAR_TO_COORD( l_U672, 362.69000000, -376.24000000, 3.66960000 );
                SET_CHAR_HEADING( l_U672, 180 );
                CLEAR_CHAR_TASKS_IMMEDIATELY( l_U672 );
                OPEN_SEQUENCE_TASK( ref l_U688 );
                TASK_GO_STRAIGHT_TO_COORD( 0, 361.71830000, -378.06000000, 3.66960000, 2, -1 );
                TASK_ACHIEVE_HEADING( 0, 86.40000000 );
                if (NOT (IS_CHAR_DEAD( sub_4155() )))
                {
                    TASK_LOOK_AT_CHAR( 0, sub_4155(), 50000, 0 );
                }
                CLOSE_SEQUENCE_TASK( l_U688 );
                TASK_PERFORM_SEQUENCE( l_U672, l_U688 );
                CLEAR_SEQUENCE_TASK( l_U688 );
                HIDE_CHAR_WEAPON_FOR_SCRIPTED_CUTSCENE( l_U672, 1 );
                SET_CHAR_PROP_INDEX( l_U672, 0, 0 );
            }
            if (NOT (IS_CHAR_INJURED( l_U673 )))
            {
                CLEAR_CHAR_TASKS_IMMEDIATELY( l_U673 );
                DETACH_PED( l_U673, 1 );
                SWITCH_PED_TO_ANIMATED( l_U673, 1 );
                SET_CHAR_COORDINATES_NO_OFFSET( l_U673, 359.76000000, -379.56570000, 4.66950000 );
                SET_CHAR_HEADING( l_U673, 354.40000000 );
                HIDE_CHAR_WEAPON_FOR_SCRIPTED_CUTSCENE( l_U673, 1 );
                if (NOT (IS_CHAR_DEAD( sub_4155() )))
                {
                    TASK_LOOK_AT_CHAR( l_U673, sub_4155(), 50000, 0 );
                }
            }
            if (NOT (IS_CHAR_INJURED( l_U674 )))
            {
                CLEAR_CHAR_TASKS_IMMEDIATELY( l_U674 );
                DETACH_PED( l_U674, 1 );
                SWITCH_PED_TO_ANIMATED( l_U674, 1 );
                SET_CHAR_COORDINATES_NO_OFFSET( l_U674, 360.77000000, -379.30000000, 4.66950000 );
                SET_CHAR_HEADING( l_U674, 42.88690000 );
                HIDE_CHAR_WEAPON_FOR_SCRIPTED_CUTSCENE( l_U674, 1 );
                if (NOT (IS_CHAR_DEAD( sub_4155() )))
                {
                    TASK_LOOK_AT_CHAR( l_U674, sub_4155(), 50000, 0 );
                }
            }
            while (sub_12589( l_U831 ))
            {
                WAIT( 0 );
            }
            WAIT( 300 );
            DO_SCREEN_FADE_IN( 500 );
            while (NOT IS_SCREEN_FADED_IN())
            {
                WAIT( 0 );
            }
            sub_11032( "RB2_DONE", ref l_U831, 7, 1 );
            l_U586 = 1;
            SETTIMERA( 0 );
            SETTIMERB( 0 );
        }
        break;
        case 1:
        if (NOT (IS_CHAR_IN_ANY_CAR( sub_4155() )))
        {
            SET_CURRENT_CHAR_WEAPON( sub_4155(), 0, 1 );
        }
        if ((l_U848 == 1) AND ((sub_34297( l_U831 )) == 2))
        {
            SET_CAM_ACTIVE( l_U844, 0 );
            SET_CAM_PROPAGATE( l_U844, 0 );
            SET_CAM_ACTIVE( l_U845, 0 );
            SET_CAM_PROPAGATE( l_U845, 0 );
            SET_CAM_POS( l_U843, 357.12000000, -378.54860000, 5.38109100 );
            SET_CAM_ROT( l_U843, -3.52449100, -0.00000000, -73.61899000 );
            SET_CAM_FOV( l_U843, 18.10000000 );
            SET_CAM_NEAR_DOF( l_U843, 0.10000000 );
            SET_CAM_FAR_DOF( l_U843, 6.00000000 );
            l_U848 = 2;
        }
        if ((l_U848 == 2) AND ((sub_34297( l_U831 )) == 5))
        {
            if ((NOT (IS_CHAR_DEAD( l_U672 ))) AND (NOT (IS_CHAR_DEAD( l_U673 ))))
            {
                TASK_LOOK_AT_CHAR( l_U673, l_U672, 20000, 0 );
            }
            SET_CAM_POS( l_U843, 364.42000000, -379.12250000, 5.34808500 );
            SET_CAM_ROT( l_U843, -5.01404000, -0.00000000, 79.64317000 );
            SET_CAM_FOV( l_U843, 28.90000000 );
            SET_CAM_NEAR_DOF( l_U843, 0.10000000 );
            SET_CAM_FAR_DOF( l_U843, 7.00000000 );
            l_U848 = 3;
        }
        if ((l_U848 == 3) AND ((sub_34297( l_U831 )) == 7))
        {
            SET_CAM_POS( l_U843, 356.81380000, -377.04910000, 5.32549800 );
            SET_CAM_ROT( l_U843, -4.82942800, -0.00000000, -116.89710000 );
            SET_CAM_FOV( l_U843, 29.40000000 );
            SET_CAM_NEAR_DOF( l_U843, 0.50000000 );
            SET_CAM_FAR_DOF( l_U843, 10.00000000 );
            l_U848 = 4;
        }
        if ((l_U848 == 4) AND (TIMERA() >= 30000))
        {
            if (IS_VEH_DRIVEABLE( l_U678 ))
            {
                SET_NEXT_DESIRED_MOVE_STATE( 2 );
                TASK_CLEAR_LOOK_AT( l_U672 );
                TASK_ENTER_CAR_AS_DRIVER( l_U672, l_U678, -2 );
            }
            l_U848 = 5;
        }
        if ((l_U848 == 5) AND (TIMERA() >= 31200))
        {
            if (IS_VEH_DRIVEABLE( l_U678 ))
            {
                SET_NEXT_DESIRED_MOVE_STATE( 2 );
                TASK_CLEAR_LOOK_AT( l_U673 );
                TASK_ENTER_CAR_AS_PASSENGER( l_U673, l_U678, -2, 0 );
            }
            l_U848 = 6;
        }
        if ((l_U848 == 6) AND (TIMERA() >= 31800))
        {
            if (IS_VEH_DRIVEABLE( l_U678 ))
            {
                GET_CAR_COORDINATES( l_U678, ref l_U867, ref l_U868, ref l_U869 );
                TASK_CLEAR_LOOK_AT( l_U674 );
                TASK_GO_STRAIGHT_TO_COORD( l_U674, l_U867, l_U868, l_U869, 2, -1 );
            }
            l_U848 = 7;
        }
        if ((NOT l_U655) AND (TIMERA() >= 31000))
        {
            TASK_CLEAR_LOOK_AT( sub_4155() );
            TASK_GO_STRAIGHT_TO_COORD( sub_4155(), l_U740._fU0, l_U740._fU4, l_U740._fU8, 2, -1 );
            l_U655 = 1;
        }
        if (TIMERA() >= 32500)
        {
            l_U586 = 2;
            DO_SCREEN_FADE_OUT( 500 );
            while (NOT IS_SCREEN_FADED_OUT())
            {
                WAIT( 0 );
            }
        }
        break;
        case 2:
        SET_CHAR_COORDINATES( sub_4155(), l_U740._fU0, l_U740._fU4, l_U740._fU8 );
        SET_CHAR_HEADING( sub_4155(), l_U816 );
        HIDE_CHAR_WEAPON_FOR_SCRIPTED_CUTSCENE( sub_4155(), 0 );
        BEGIN_CAM_COMMANDS( ref l_U665 );
        SET_CAM_ACTIVE( l_U843, 0 );
        SET_CAM_PROPAGATE( l_U843, 0 );
        ACTIVATE_SCRIPTED_CAMS( 0, 0 );
        END_CAM_COMMANDS( ref l_U665 );
        SET_GAME_CAM_HEADING( 0.00000000 );
        SET_CAM_BEHIND_PED( sub_4155() );
        DELETE_CHAR( ref l_U672 );
        DELETE_CHAR( ref l_U673 );
        DELETE_CHAR( ref l_U674 );
        DELETE_CAR( ref l_U678 );
        if (DOES_OBJECT_EXIST( l_U694 ))
        {
            DELETE_OBJECT( ref l_U694 );
        }
        if (DOES_OBJECT_EXIST( l_U695 ))
        {
            DELETE_OBJECT( ref l_U695 );
        }
        SET_WIDESCREEN_BORDERS( 0 );
        SET_USE_HIGHDOF( 0 );
        if (NOT l_U656)
        {
            INCREMENT_INT_STAT_NO_MESSAGE( 373, 1 );
        }
        while (sub_12589( l_U831 ))
        {
            WAIT( 0 );
        }
        REMOVE_ANIMS( "gestures@niko" );
        CLEAR_PRINTS();
        WAIT( 1000 );
        DO_SCREEN_FADE_IN( 500 );
        while (NOT IS_SCREEN_FADED_IN())
        {
            WAIT( 0 );
        }
        SET_PLAYER_CONTROL( sub_7251(), 1 );
        l_U578 = 13;
        break;
    }
    return;
}

void sub_34297(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    int Result;

    Result = -1;
    if (sub_12589( uParam0 ))
    {
        Result = GET_CURRENT_SCRIPTED_CONVERSATION_LINE();
        if (Result != -1)
        {
            Result += uParam0._fU8;
        }
    }
    return Result;
}

void sub_35727()
{
    sub_35736();
    return;
}

void sub_35736()
{
    sub_35745();
    TRIGGER_MISSION_COMPLETE_AUDIO( 57 );
    CLEAR_WANTED_LEVEL( sub_7251() );
    sub_47357( 16 );
    sub_48965( l_U837, "RB2_CALL12", "RB2AUD", 0 );
    sub_3686();
    return;
}

void sub_35745()
{
    sub_35754();
    return;
}

void sub_35754()
{
    int iVar2;
    int iVar3;
    int iVar4;

    iVar2 = 1;
    iVar3 = 0;
    iVar4 = 0;
    sub_35772();
    sub_35831( iVar2, iVar3, iVar4 );
    return;
}

void sub_35772()
{
    int I;

    I = 0;
    for ( I = 0; I < 5; I++ )
    {
        l_U483[I] = 4;
    }
    return;
}

void sub_35831(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = 14;
    sub_35864( iVar5, uParam0, uParam1, uParam2, "Contact_16" );
    return;
}

void sub_35864(int iParam0, boolean bParam1, boolean bParam2, boolean bParam3, unknown uParam4)
{
    int iVar7;
    int iVar8;
    char[64] cVar9;
    int iVar25;
    int iVar26;
    boolean bVar27;
    unknown uVar28;
    unknown uVar29;
    int iVar30;
    boolean bVar31;

    iVar7 = -1;
    iVar8 = -1;
    StrCopy( ref cVar9, "", 64 );
    if (bParam3)
    {
        if (g_U13391[iParam0]._fU80._fU0 == 0)
        {
            StrCopy( ref cVar9, uParam4, 64 );
            ConcatString(ref cVar9, " Pass_Stats: friend mission", 64);
            sub_35960( ref cVar9 );
            return;
        }
        if (g_U13391[iParam0]._fU80._fU4 == -1)
        {
            StrCopy( ref cVar9, uParam4, 64 );
            ConcatString(ref cVar9, " Pass_Stats: friend missionID", 64);
            sub_35960( ref cVar9 );
            return;
        }
        iVar7 = g_U13391[iParam0]._fU80._fU4;
    }
    else if (bParam2)
    {
        if (NOT g_U13391[iParam0]._fU160._fU80)
        {
            StrCopy( ref cVar9, uParam4, 64 );
            ConcatString(ref cVar9, " Pass_Stats: proc mission", 64);
            sub_35960( ref cVar9 );
            return;
        }
        if (g_U13391[iParam0]._fU160._fU76 == -1)
        {
            StrCopy( ref cVar9, uParam4, 64 );
            ConcatString(ref cVar9, " Pass_Stats: proc missionID", 64);
            sub_35960( ref cVar9 );
            return;
        }
        iVar7 = g_U13391[iParam0]._fU160._fU76;
    }
    else if (g_U13391[iParam0]._fU0._fU0 == 0)
    {
        StrCopy( ref cVar9, uParam4, 64 );
        ConcatString(ref cVar9, " Pass_Stats: mission", 64);
        sub_35960( ref cVar9 );
        return;
    }
    if (g_U13391[iParam0]._fU0._fU4 == -1)
    {
        StrCopy( ref cVar9, uParam4, 64 );
        ConcatString(ref cVar9, " Pass_Stats: missionID", 64);
        sub_35960( ref cVar9 );
        return;
    }
    iVar7 = g_U13391[iParam0]._fU0._fU4;
    iVar8 = sub_36537( iParam0, iVar7 );;;
    iVar25 = 0;
    if (bParam1)
    {
        g_U10981[iParam0]._fU24 = iVar7;
    }
    if (bParam2)
    {
        iVar25 = g_U13391[iParam0]._fU160._fU84;
    }
    if (bParam3)
    {
        g_U10981[iParam0]._fU144._fU8++;
        if ((g_U10981[iParam0]._fU144._fU8 >= g_U10981[iParam0]._fU144._fU4) AND (NOT g_U10981[iParam0]._fU144._fU12))
        {
            iVar26 = 0;
            GET_GAME_TIMER( ref iVar26 );
            g_U10981[iParam0]._fU144._fU16 = iVar26 + 60000;
        }
        if (g_U10981[iParam0]._fU144._fU8 == 1)
        {
            if (iParam0 == 3)
            {
                sub_36934( 0, 3 );
            }
            if (iParam0 == 8)
            {
                sub_36934( 0, 4 );
            }
        }
    }
    if (NOT (sub_37023( iParam0, iVar7, iVar25, bParam1, bParam2, bParam3 )))
    {
        return;
    }
    if (bParam2)
    {
        g_U13391[iParam0]._fU160._fU84++;
    }
    if ((iVar7 == 12) AND (iParam0 == 0))
    {
        SET_PLAYER_MOOD_PISSED_OFF( sub_7251(), 150 );
    }
    else
    {
        SET_PLAYER_MOOD_NORMAL( sub_7251() );
    }
    sub_2784();
    bVar27 = true;
    uVar28 = sub_36537( iParam0, iVar7 );
    uVar29 = sub_2241( iParam0 );
    if (bParam1)
    {
        iVar30 = g_U13391[iParam0]._fU0._fU56;
        if ((iVar30 == 6) || (iVar30 == 5))
        {
            bVar27 = false;
        }
        if (NOT g_U0)
        {
            bVar31 = true;
            if (IS_BIT_SET( g_U26758[uVar28]._fU108, 2 ))
            {
                REGISTER_MISSION_PASSED( ref g_U9921 );
                sub_46399( 9, ref g_U13391[iParam0]._fU0._fU24 );
                if ((g_U10978) AND (NOT bVar27))
                {
                    bVar31 = false;
                }
                if (bVar31)
                {
                    sub_46829();
                    g_U9914._fU8 = 1;
                    g_U9914._fU20 = sub_46914( iParam0, iVar7 );
                }
            }
            if (bVar27)
            {
                sub_46971( iParam0 );
                sub_47010( 0 );
                sub_2682( uVar29, 0 );
            }
            g_U10981[iParam0]._fU12 = 1;
        }
        if (bVar27)
        {
            sub_47118();
        }
    }
    if (bParam2)
    {
        sub_46829();
        sub_47206();
        sub_47010( 0 );
    }
    if (bParam3)
    {
        sub_46829();
        sub_47246();
        sub_47010( 0 );
        sub_2682( uVar29, 0 );
    }
    sub_2128();
    return;
}

void sub_35960(unknown uParam0)
{
    PRINTSTRING( "FLOW WARNING: " );
    PRINTSTRING( uParam0 );
    PRINTNL();
    SCRIPT_ASSERT( "FLOW WARNING: Press IGNORE button and look at console window for details" );
    return;
}

int sub_36537(int iParam0, int iParam1)
{
    unknown uVar4;
    int iVar5;
    int Result;

    if ((iParam0 >= 28) || (iParam0 < 0))
    {
        sub_2640( "Main_Missions: Find_Trigger(): Illegal Strand ID" );
    }
    uVar4 = g_U32640[iParam0]._fU0;
    iVar5 = g_U32640[iParam0]._fU4;
    for ( Result = uVar4; Result <= iVar5; Result++ )
    {
        if (g_U26758[Result]._fU4 == iParam1)
        {
            return Result;
        }
    }
    return -1;
}

void sub_36934(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = 0;
    GET_GAME_TIMER( ref iVar4 );
    g_U15874[uParam0]._fU0 = uParam1;
    g_U15874[uParam0]._fU4 = iVar4 + 7200000;
    return;
}

int sub_37023(unknown uParam0, unknown uParam1, unknown uParam2, boolean bParam3, unknown uParam4, unknown uParam5)
{
    boolean bVar8;
    unknown uVar9;
    int iVar10;

    bVar8 = false;
    switch (uParam0)
    {
        case 0:
        bVar8 = sub_37231( uParam1 );
        break;
        case 1:
        bVar8 = sub_39309( uParam1 );
        break;
        case 2:
        bVar8 = sub_39535( uParam1 );
        break;
        case 3:
        bVar8 = sub_39685( uParam1 );
        break;
        case 4:
        bVar8 = sub_39963( uParam1 );
        break;
        case 5:
        bVar8 = sub_40266( uParam1 );
        break;
        case 6:
        bVar8 = sub_40465( uParam1 );
        break;
        case 7:
        bVar8 = sub_40691( uParam1 );
        break;
        case 8:
        bVar8 = sub_40926( uParam1 );
        break;
        case 9:
        bVar8 = sub_41301( uParam1 );
        break;
        case 10:
        bVar8 = sub_41548( uParam1 );
        break;
        case 11:
        bVar8 = sub_41687( uParam1 );
        break;
        case 12:
        bVar8 = sub_41986( uParam1 );
        break;
        case 13:
        bVar8 = sub_42214( uParam1 );
        break;
        case 14:
        bVar8 = sub_42501( uParam1 );
        break;
        case 15:
        bVar8 = sub_42783( uParam1 );
        break;
        case 16:
        bVar8 = sub_43065( uParam1 );
        break;
        case 17:
        bVar8 = sub_43266( uParam1 );
        break;
        case 18:
        bVar8 = sub_43339( uParam1 );
        break;
        case 19:
        bVar8 = sub_43553( uParam1 );
        break;
        case 20:
        bVar8 = sub_43806( uParam1 );
        break;
        case 21:
        bVar8 = sub_44053( uParam1 );
        break;
        case 22:
        bVar8 = sub_44254( uParam1 );
        break;
        default:
        PRINTSTRING( "Strand ID: " );
        PRINTINT( uParam0 );
        PRINTNL();
        sub_38914( "Flow_Pass_Stats: Flow_Pass_Strand_Mission(): Unknown strand ID." );
    }
    if (NOT bVar8)
    {
        return 0;
    }
    uVar9 = sub_36537( uParam0, uParam1 );
    if (bParam3)
    {
        iVar10 = g_U13391[uParam0]._fU0._fU56;
        if ((NOT (iVar10 == 6)) AND (NOT (iVar10 == 5)))
        {
            sub_44577( uVar9, uParam0 );
        }
    }
    return 1;
}

int sub_37231(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 0;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 25, 5, 2, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 30, 5, 2, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 0, 5, 0, 0, 0 );
        break;
        case 4:
        sub_37510( iVar3, 50, 5, 2, 0, 0 );
        break;
        case 5:
        sub_37510( iVar3, 100, 5, 2, 0, 0 );
        break;
        case 6:
        sub_37510( iVar3, 150, 5, 2, 0, 0 );
        break;
        case 8:
        sub_37510( iVar3, 0, 5, 2, 0, 0 );
        break;
        case 9:
        sub_37510( iVar3, 0, 5, 2, 0, 0 );
        break;
        case 10:
        sub_37510( iVar3, 0, 5, 2, 0, 0 );
        break;
        case 11:
        sub_37510( iVar3, 0, 5, 2, 0, 0 );
        break;
        case 12:
        sub_37510( iVar3, 0, 5, 2, 0, 0 );
        break;
        case 13:
        sub_37510( iVar3, 0, 5, 2, 0, 0 );
        break;
        case 15:
        sub_37510( iVar3, 250000, 5, 2, 0, 0 );
        break;
        case 16:
        sub_37510( iVar3, 0, 0, 0, 0, 0 );
        break;
        case 20:
        if (g_U15654[12])
        {
            sub_37510( iVar3, 0, 5, 2, 0, 0 );
        }
        else
        {
            sub_37510( iVar3, 250000, 0, 0, 0, 0 );
        }
        break;
        case 7:
        sub_37510( iVar3, 0, 3, 1, 0, 0 );
        break;
        case 3:
        case 30:
        case 14:
        case 37:
        case 18:
        case 19:
        case 17:
        case 21: break;
        case 22:
        case 23:
        case 24:
        case 25:
        case 26:
        case 27:
        case 28:
        sub_37510( iVar3, 0, sub_38792(), sub_39058(), 0, 0 );
        break;
        default:
        sub_39217( "Friend 1", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Friend 1", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

void sub_37510(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5)
{
    sub_37521( uParam1 );
    sub_37695( uParam0, 0, uParam2 );
    sub_37695( uParam0, 1, uParam3 );
    sub_37695( uParam0, 2, uParam4 );
    ProtectedSet(g_U26747[4], ProtectedGet(g_U26747[4]) + iParam5);
    sub_35772();
    return;
}

void sub_37521(unknown uParam0)
{
    ADD_SCORE( sub_7251(), uParam0 );
    sub_37546( uParam0 );
    return;
}

void sub_37546(int iParam0)
{
    if (g_U0)
    {
        return;
    }
    if (iParam0 < 0)
    {
        sub_2640( "Flow_Achievements_Increase_Cash_From_Missions: negative cash given. Tell Keith." );
    }
    INCREMENT_INT_STAT_NO_MESSAGE( 93, iParam0 );
    return;
}

void sub_37695(unknown uParam0, int iParam1, int iParam2)
{
    g_U10981[uParam0]._fU40[iParam1] += iParam2;
    if (g_U10981[uParam0]._fU40[iParam1] < 0)
    {
        g_U10981[uParam0]._fU40[iParam1] = 0;
    }
    if (g_U10981[uParam0]._fU40[iParam1] > 100)
    {
        g_U10981[uParam0]._fU40[iParam1] = 100;
    }
    if (iParam1 == 1)
    {
        sub_37852( uParam0 );
    }
    return;
}

void sub_37852(unknown uParam0)
{
    if (g_U0)
    {
        return;
    }
    if (IS_BIT_SET( ProtectedGet(g_U64791), 11 ))
    {
        return;
    }
    if (g_U10981[uParam0]._fU40[1] < 90)
    {
        return;
    }
    switch (uParam0)
    {
        case 0:
        SET_BIT( 1, 6 );
        break;
        break;
        2;
        1;
        ref g_U64791;
        1;
        ref g_U64791;
        break;
        case 3:
        SET_BIT( 1, 7 );
        break;
        break;
        2;
        1;
        ref g_U64791;
        1;
        ref g_U64791;
        break;
        case 7:
        SET_BIT( 1, 8 );
        break;
        break;
        2;
        1;
        ref g_U64791;
        1;
        ref g_U64791;
        break;
        case 8:
        SET_BIT( 1, 9 );
        break;
        break;
        2;
        1;
        ref g_U64791;
        1;
        ref g_U64791;
        break;
        case 13:
        SET_BIT( 1, 10 );
        break;
        break;
        2;
        1;
        ref g_U64791;
        1;
        ref g_U64791;
        break;
    }
    if ((NOT (IS_BIT_SET( ProtectedGet(g_U64791), 5 ))) || ((NOT (IS_BIT_SET( ProtectedGet(g_U64791), 4 ))) || ((NOT (IS_BIT_SET( ProtectedGet(g_U64791), 3 ))) || ((NOT (IS_BIT_SET( ProtectedGet(g_U64791), 2 ))) || (NOT (IS_BIT_SET( ProtectedGet(g_U64791), 1 )))))))
    {
        return;
    }
    if (NOT (IS_BIT_SET( ProtectedGet(g_U64791), 7 )))
    {
        return;
    }
    if (NOT (IS_BIT_SET( ProtectedGet(g_U64791), 9 )))
    {
        return;
    }
    if (NOT (IS_BIT_SET( ProtectedGet(g_U64791), 10 )))
    {
        return;
    }
    if (g_U10981[0]._fU8)
    {
        if (NOT (IS_BIT_SET( ProtectedGet(g_U64791), 6 )))
        {
            return;
        }
    }
    if (g_U10981[7]._fU8)
    {
        if (NOT (IS_BIT_SET( ProtectedGet(g_U64791), 8 )))
        {
            return;
        }
    }
    SET_BIT( 1, 11 );
    AWARD_ACHIEVEMENT( 35 );
    return;
    break;
    2;
    1;
    ref g_U64791;
    1;
    ref g_U64791;
    break;
}

int sub_38792()
{
    switch (l_U483[0])
    {
        case 0: return 14;
        case 1: return 8;
        case 2: return 6;
        case 3: return 1;
        case 4: return 0;
    }
    sub_38914( "Get_TRUST(): Unknown Friend Pass ID" );
    return 0;
}

void sub_38914(unknown uParam0)
{
    PRINTSTRING( "FLOW ERROR: " );
    PRINTSTRING( uParam0 );
    PRINTNL();
    SCRIPT_ASSERT( "FLOW ERROR: Press IGNORE button and look at console window for details" );
    return;
}

int sub_39058()
{
    switch (l_U483[1])
    {
        case 0: return 10;
        case 1: return 6;
        case 2: return 3;
        case 3: return 1;
        case 4: return 0;
    }
    sub_38914( "Get_LIKE(): Unknown Friend Pass ID" );
    return 0;
}

void sub_39217(unknown uParam0, unknown uParam1)
{
    return;
}

int sub_39309(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 1;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 50, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 100, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 150, 5, 5, 0, 0 );
        break;
        case 3:
        sub_37510( iVar3, 200, 5, 5, 0, 0 );
        break;
        default:
        sub_39217( "Contact 2", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 2", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_39535(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 2;
    bVar4 = false;
    switch (uParam0)
    {
        case 1:
        sub_37510( iVar3, 0, 5, 5, 0, 0 );
        break;
        case 0: break;
        default:
        sub_39217( "Girl 3", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Girl 3", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_39685(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 3;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 200, 5, 2, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 250, 5, 2, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 250, 3, 1, 0, 0 );
        break;
        case 3:
        case 4:
        case 5:
        case 6:
        case 7:
        case 8:
        case 9:
        sub_37510( iVar3, 0, sub_38792(), sub_39058(), 0, 0 );
        break;
        default:
        sub_39217( "Friend 4", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Friend 4", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_39963(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 4;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 200, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 400, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 500, 5, 5, 0, 0 );
        break;
        case 3:
        sub_37510( iVar3, 600, 5, 5, 0, 0 );
        break;
        case 4:
        sub_37510( iVar3, 700, 5, 5, 0, 0 );
        break;
        case 5:
        sub_37510( iVar3, 0, 5, 5, 0, 0 );
        break;
        case 6:
        sub_37510( iVar3, 0, 5, 5, 0, 0 );
        break;
        default:
        sub_39217( "Contact 5", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 5", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_40266(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 5;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 1000, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 1100, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 1500, 5, 5, 0, 0 );
        break;
        default:
        sub_39217( "Contact 7", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 7", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_40465(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 6;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 1500, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 2000, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 2500, 5, 5, 0, 0 );
        break;
        case 3:
        sub_37510( iVar3, 0, 5, 5, 0, 0 );
        break;
        default:
        sub_39217( "Contact 7b", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 7b", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_40691(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 7;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 6000, 5, 2, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 6250, 5, 2, 0, 0 );
        break;
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        sub_37510( iVar3, 0, sub_38792(), sub_39058(), 0, 0 );
        break;
        default:
        sub_39217( "Friend 8", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Friend 8", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_40926(unknown uParam0)
{
    int iVar3;
    boolean bVar4;
    int iVar5;

    iVar3 = 8;
    bVar4 = false;
    iVar5 = 500;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 3500, 5, 2, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 3500, 5, 2, 0, 0 );
        break;
        case 4:
        sub_37510( iVar3, 6750, 5, 2, 0, 0 );
        break;
        case 5:
        sub_37510( iVar3, 0, 5, 2, 0, 0 );
        break;
        case 2:
        case 3: break;
        case 6:
        sub_37510( iVar3, iVar5, 3, 1, 0, 0 );
        INCREMENT_INT_STAT_NO_MESSAGE( 109, iVar5 );
        break;
        case 7:
        case 8:
        case 9:
        case 10:
        case 11:
        case 12:
        case 13:
        case 14:
        sub_37510( iVar3, 0, sub_38792(), sub_39058(), 0, 0 );
        break;
        default:
        sub_39217( "Friend 9", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Friend 9", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_41301(unknown uParam0)
{
    int iVar3;
    int iVar4;
    boolean bVar5;

    iVar3 = 9;
    iVar4 = 7;
    bVar5 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 6500, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 6750, 5, 5, 0, 0 );
        break;
        case 3:
        if (g_U15654[39])
        {
            sub_37510( iVar4, 0, 5, 10, 0, 0 );
        }
        else
        {
            sub_37510( iVar3, 0, 5, 5, 0, 0 );
        }
        break;
        case 2: break;
        default:
        sub_39217( "Contact 10", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar5)
    {
        sub_39217( "Contact 10", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_41548(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 10;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 0, 1, 1, 0, 0 );
        break;
        default:
        sub_39217( "Girl 11", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Girl 11", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_41687(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 11;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 1000, 5, 5, 0, 0 );
        break;
        case 3:
        sub_37510( iVar3, 1000, 5, 5, 0, 0 );
        break;
        case 4:
        sub_37510( iVar3, 5000, 5, 5, 0, 0 );
        break;
        case 5:
        sub_37510( iVar3, 5000, 5, 5, 0, 0 );
        break;
        case 6:
        sub_37510( iVar3, 0, 5, 5, 0, 0 );
        break;
        case 7:
        sub_37510( iVar3, 0, 5, 5, 0, 0 );
        break;
        case 1:
        case 2: break;
        default:
        sub_39217( "Contact 12", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 12", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_41986(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 12;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 6500, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 6750, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 7000, 5, 5, 0, 0 );
        break;
        case 3:
        sub_37510( iVar3, 7500, 5, 5, 0, 0 );
        break;
        default:
        sub_39217( "Contact 13", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 13", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_42214(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 13;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 7500, 5, 2, 0, 5 );
        break;
        case 1:
        sub_37510( iVar3, 8000, 5, 2, 0, 5 );
        break;
        case 3:
        sub_37510( iVar3, 250000, 5, 2, 0, 5 );
        break;
        case 4:
        case 5:
        case 6:
        case 7:
        case 8:
        case 9:
        sub_37510( iVar3, 0, sub_38792(), sub_39058(), 0, 0 );
        break;
        case 2: break;
        default:
        sub_39217( "Friend 15", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Friend 15", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_42501(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 14;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 8500, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 9000, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 9500, 5, 5, 0, 0 );
        break;
        case 3:
        sub_37510( iVar3, 9500, 5, 5, 0, 0 );
        break;
        case 4:
        sub_37510( iVar3, 9500, 5, 5, 0, 0 );
        break;
        case 5:
        sub_37510( iVar3, 11000, 5, 5, 0, 0 );
        break;
        default:
        sub_39217( "Contact 16", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 16", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_42783(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 15;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 9000, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 9250, 5, 5, 0, 0 );
        break;
        case 4:
        sub_37510( iVar3, 9500, 5, 5, 0, 0 );
        break;
        case 6:
        sub_37510( iVar3, 9750, 5, 5, 0, 0 );
        break;
        case 7:
        sub_37510( iVar3, 0, 5, 5, 0, 0 );
        break;
        case 2:
        case 3:
        case 5: break;
        default:
        sub_39217( "Contact 18", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 18", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_43065(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 16;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 6500, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 7000, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 7500, 5, 5, 0, 0 );
        break;
        default:
        sub_39217( "Contact 19", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 19", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_43266(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 17;
    bVar4 = false;
    if (bVar4)
    {
        sub_39217( "Girl 20", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_43339(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 18;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 6000, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 6250, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 6500, 5, 5, 0, 0 );
        break;
        case 3: break;
        default:
        sub_39217( "Contact 21", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 21", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_43553(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 19;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 7500, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 10500, 5, 5, 0, 0 );
        break;
        case 3:
        sub_37510( iVar3, 11000, 5, 5, 0, 0 );
        break;
        case 4:
        sub_37510( iVar3, 12000, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 0, 3, 3, 0, 0 );
        break;
        default:
        sub_39217( "Contact 22", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 22", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_43806(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 20;
    bVar4 = false;
    switch (uParam0)
    {
        case 1:
        sub_37510( iVar3, 10500, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 0, 5, 5, 0, 0 );
        break;
        case 3:
        sub_37510( iVar3, 13000, 5, 5, 0, 0 );
        break;
        case 5:
        sub_37510( iVar3, 14500, 5, 5, 0, 0 );
        break;
        case 4:
        case 0: break;
        default:
        sub_39217( "Contact 24", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 24", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_44053(unknown uParam0)
{
    int iVar3;
    boolean bVar4;

    iVar3 = 21;
    bVar4 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar3, 12000, 5, 5, 0, 0 );
        break;
        case 1:
        sub_37510( iVar3, 13250, 5, 5, 0, 0 );
        break;
        case 2:
        sub_37510( iVar3, 14500, 5, 5, 0, 0 );
        break;
        default:
        sub_39217( "Contact 25", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar4)
    {
        sub_39217( "Contact 25", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

int sub_44254(unknown uParam0)
{
    int iVar3;
    int iVar4;
    boolean bVar5;

    iVar3 = 22;
    iVar4 = 8;
    bVar5 = false;
    switch (uParam0)
    {
        case 0:
        sub_37510( iVar4, 0, 3, 1, 0, 0 );
        break;
        default:
        sub_39217( "Girl 26", 1 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    if (bVar5)
    {
        sub_39217( "Girl 26", 0 );
        sub_37510( iVar3, 10, 0, 0, 0, 0 );
        return 0;
    }
    return 1;
}

void sub_44577(int iParam0, int iParam1)
{
    if (g_U0)
    {
        return;
    }
    if (iParam0 == -1)
    {
        return;
    }
    if (iParam1 == -1)
    {
        return;
    }
    if (sub_44625( iParam0, iParam1 ))
    {
        INCREMENT_INT_STAT_NO_MESSAGE( 253, 1 );
        sub_45356( iParam1 );
    }
    return;
}

int sub_44625(int iParam0, int iParam1)
{
    int iVar4;
    boolean bVar5;
    int iVar6;

    if (g_U0)
    {
        return 0;
    }
    if (iParam0 == -1)
    {
        return 0;
    }
    if (iParam1 == -1)
    {
        return 0;
    }
    iVar4 = g_U13391[iParam1]._fU0._fU56;
    bVar5 = iVar4 == 6;
    if (bVar5)
    {
        return 0;
    }
    iVar6 = 0;
    if (NOT (IS_BIT_SET( g_U26758[iParam0]._fU108, 3 )))
    {
        iVar6 = g_U26758[iParam0]._fU104;
        if (iVar6 > 0)
        {
            sub_44765( 0, iVar6 );
            g_U13334[iParam1]._fU4 += iVar6;
        }
        SET_BIT( ref g_U26758[iParam0]._fU108, 3 );
        return 1;
    }
    return 0;
}

void sub_44765(unknown uParam0, int iParam1)
{
    g_U32871[uParam0]._fU4 += iParam1;
    if (g_U32871[uParam0]._fU4 > g_U32871[uParam0]._fU0)
    {
        SCRIPT_ASSERT( "Flow_Achievements_Game_Progress_Made: Current Category is over target value" );
        g_U32871[uParam0]._fU4 = g_U32871[uParam0]._fU0;
    }
    sub_44947( 0 );
    return;
}

void sub_44947(boolean bParam0)
{
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    boolean bVar7;
    int I;

    fVar3 = 0.00000000;
    fVar4 = 0.00000000;
    fVar5 = 0.00000000;
    fVar6 = 0.00000000;
    bVar7 = true;
    I = 0;
    for ( I = 0; I < 8; I++ )
    {
        if (g_U32871[I]._fU4 == g_U32871[I]._fU0)
        {
            fVar4 = g_U32871[I]._fU8;
        }
        else
        {
            bVar7 = false;
            fVar5 = TO_FLOAT( g_U32871[I]._fU0 );
            fVar6 = TO_FLOAT( g_U32871[I]._fU4 );
            fVar4 = (fVar6 / fVar5) * g_U32871[I]._fU8;
        }
        fVar3 += fVar4;
    }
    if (fVar3 > 100.00000000)
    {
        fVar3 = 99.99000000;
    }
    if (bVar7)
    {
        fVar3 = 100.00000000;
    }
    SET_FLOAT_STAT( 0, fVar3 );
    if (bVar7)
    {
        sub_45202();
    }
    if ((NOT (# -NULL-0xc27c84())) AND ((NOT bParam0) AND (bVar7)))
    {
        PRINT_HELP( "GAME100" );
    }
    return;
}

void sub_45202()
{
    ENABLE_MAX_AMMO_CAP( 0 );
    return;
}

void sub_45356(int iParam0)
{
    float fVar3;
    float fVar4;
    float fVar5;

    if (g_U0)
    {
        return;
    }
    if (iParam0 == -1)
    {
        return;
    }
    if (g_U13334[iParam0]._fU0 == 0)
    {
        return;
    }
    fVar3 = 0.00000000;
    fVar4 = 0.00000000;
    fVar5 = 0.00000000;
    if (g_U13334[iParam0]._fU4 == g_U13334[iParam0]._fU0)
    {
        fVar3 = 100.00000000;
    }
    else
    {
        fVar4 = TO_FLOAT( g_U13334[iParam0]._fU0 );
        fVar5 = TO_FLOAT( g_U13334[iParam0]._fU4 );
        fVar3 = fVar5 / fVar4;
        fVar3 *= 100.00000000;
    }
    switch (iParam0)
    {
        case 0:
        sub_45689( 3 );
        SET_FLOAT_STAT( 3, fVar3 );
        break;
        case 1:
        sub_45689( 4 );
        SET_FLOAT_STAT( 4, fVar3 );
        break;
        case 3:
        sub_45689( 7 );
        SET_FLOAT_STAT( 7, fVar3 );
        break;
        case 4:
        sub_45689( 8 );
        SET_FLOAT_STAT( 8, fVar3 );
        break;
        case 5:
        sub_45689( 9 );
        SET_FLOAT_STAT( 9, fVar3 );
        break;
        case 6:
        sub_45689( 10 );
        SET_FLOAT_STAT( 10, fVar3 );
        break;
        case 7:
        sub_45689( 13 );
        SET_FLOAT_STAT( 13, fVar3 );
        break;
        case 8:
        sub_45689( 16 );
        SET_FLOAT_STAT( 16, fVar3 );
        break;
        case 9:
        sub_45689( 17 );
        SET_FLOAT_STAT( 17, fVar3 );
        break;
        case 11:
        sub_45689( 18 );
        SET_FLOAT_STAT( 18, fVar3 );
        break;
        case 12:
        sub_45689( 19 );
        SET_FLOAT_STAT( 19, fVar3 );
        break;
        case 13:
        sub_45689( 22 );
        SET_FLOAT_STAT( 22, fVar3 );
        break;
        case 14:
        sub_45689( 23 );
        SET_FLOAT_STAT( 23, fVar3 );
        break;
        case 15:
        sub_45689( 24 );
        SET_FLOAT_STAT( 24, fVar3 );
        break;
        case 16:
        sub_45689( 25 );
        SET_FLOAT_STAT( 25, fVar3 );
        break;
        case 18:
        sub_45689( 26 );
        SET_FLOAT_STAT( 26, fVar3 );
        break;
        case 19:
        sub_45689( 27 );
        SET_FLOAT_STAT( 27, fVar3 );
        break;
        case 20:
        sub_45689( 29 );
        SET_FLOAT_STAT( 29, fVar3 );
        break;
        case 21:
        sub_45689( 28 );
        SET_FLOAT_STAT( 28, fVar3 );
        break;
        default: return;
    }
    return;
}

void sub_45689(unknown uParam0)
{
    if ((GET_STAT_FRONTEND_VISIBILITY( uParam0 )) == 0)
    {
        SET_STAT_FRONTEND_VISIBILITY( uParam0, 1 );
    }
    return;
}

void sub_46399(unknown uParam0, unknown uParam1)
{
    sub_46418( uParam0, 0, 0.00000000, uParam1 );
    return;
}

void sub_46418(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;

    switch (uParam0)
    {
        case 0:
        PLAYSTATS_INT( "SPRUNK_BOUGHT", uParam1 );
        break;
        case 1:
        PLAYSTATS_INT( "HOTDOG_BOUGHT", uParam1 );
        break;
        case 2:
        PLAYSTATS_INT( "NUTS_BOUGHT", uParam1 );
        break;
        case 3:
        PLAYSTATS_INT( "BURGERS_BOUGHT", uParam1 );
        break;
        case 7:
        PLAYSTATS_INT( "DONATE_BEGGAR", uParam1 );
        break;
        case 8:
        PLAYSTATS_INT( "DONATE_BUSKER", uParam1 );
        break;
        case 4:
        PLAYSTATS_INT( "BSHOT_BOUGHT", uParam1 );
        break;
        case 5:
        PLAYSTATS_INT( "CBELL_BOUGHT", uParam1 );
        break;
        case 6:
        PLAYSTATS_INT( "CAFE_BOUGHT", uParam1 );
        break;
        case 9: break;
    }
    return;
}

void sub_46829()
{
    g_U9914._fU0 = 1;
    g_U9914._fU4 = 0;
    g_U9914._fU8 = 0;
    g_U9914._fU12 = 0;
    g_U9914._fU16 = 0;
    g_U9914._fU20 = 0;
    g_U9914._fU24 = 7;
    return;
}

int sub_46914(int iParam0, int iParam1)
{
    if (iParam0 == 0)
    {
        if (iParam1 == 20)
        {
            return 1;
        }
    }
    return 0;
}

void sub_46971(unknown uParam0)
{
    sub_2027();
    g_U10981[uParam0]._fU116 = 0;
    return;
}

void sub_47010(unknown uParam0)
{
    if (g_U9385)
    {
        g_U9385 = 0;
        return;
    }
    g_U9380._fU0 = 1;
    g_U9380._fU4 = uParam0;
    g_U9380._fU8 = 0;
    g_U9380._fU12 = 0;
    g_U9380._fU16 = 0;
    return;
}

void sub_47118()
{
    sub_47127();
    return;
}

void sub_47127()
{
    if (COMPARE_STRING( ref g_U9926, "" ))
    {
        return;
    }
    PLAYSTATS_MISSION_PASSED( ref g_U9926 );
    StrCopy( ref g_U9926, "", 16 );
    return;
}

void sub_47206()
{
    sub_47127();
    return;
}

void sub_47246()
{
    sub_47127();
    StrCopy( ref g_U9926, "FPASS", 16 );
    return;
}

void sub_47357(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    sub_47374( 3, uParam0, 0, uVar3, 0 );
    return;
}

void sub_47374(int iParam0, unknown uParam1, int iParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    INCREMENT_INT_STAT_NO_MESSAGE( 92, iParam2 );
    ADD_SCORE( sub_7251(), -1 * iParam2 );
    g_U8332[uParam1] = 1;
    switch (iParam0)
    {
        case 0:
        g_U8365 += iParam2;
        g_U8368++;
        break;
        case 1:
        g_U8366 += iParam2;
        g_U8369++;
        break;
        case 2:
        g_U8367 += iParam2;
        g_U8370++;
        break;
    }
    if (iParam0 != 3)
    {
        PLAY_SOUND_FRONTEND( -1, "WARDROBE_BUY" );
        sub_47582( 5, ref uParam3, iParam0, ref uParam9 );
    }
    return;
}

void sub_47582(int iParam0, unknown uParam1, int iParam2, unknown uParam3)
{
    char[16] cVar6;
    unknown uVar10;
    int iVar11;

    switch (iParam2)
    {
        case 0:
        StrCopy( ref cVar6, "CS1_", 16 );
        break;
        case 2:
        StrCopy( ref cVar6, "CS2_", 16 );
        break;
        case 1:
        StrCopy( ref cVar6, "CS3_", 16 );
        break;
        case 3:
        return 1;
        break;
        default:
          case 4: return 0;
    }
    switch (iParam0)
    {
        case 0:
        ConcatString(ref cVar6, "ATTACK", 16);
        break;
        case 1:
        ConcatString(ref cVar6, "GOAWAY", 16);
        break;
        case 2:
        ConcatString(ref cVar6, "GOODBYE", 16);
        break;
        case 3:
        ConcatString(ref cVar6, "GREET", 16);
        break;
        case 4:
        ConcatString(ref cVar6, "PANIC", 16);
        break;
        case 5:
        ConcatString(ref cVar6, "PURCH", 16);
        break;
        case 6:
        ConcatString(ref cVar6, "MONKEY", 16);
        break;
        case 7:
        ConcatString(ref cVar6, "TARGET", 16);
        break;
        case 8:
        ConcatString(ref cVar6, "NEG", 16);
        break;
        case 9:
        ConcatString(ref cVar6, "COMP", 16);
        break;
        case 10:
        ConcatString(ref cVar6, "ADVICE", 16);
        break;
        case 11:
        ConcatString(ref cVar6, "BARR", 16);
        break;
        case 12:
        ConcatString(ref cVar6, "WARN", 16);
        break;
        default:
          case 13: return 0;
    }
    if (NOT (IS_CHAR_DEAD( (uParam3^) )))
    {
        TASK_TURN_CHAR_TO_FACE_CHAR( (uParam3^), sub_4155() );
    }
    if ((GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT( "finale1c" )) >= 1)
    {
        GET_GROUP_SIZE( sub_48089(), ref uVar10, ref iVar11 );
        if (iVar11 >= 1)
        {
            PRINTSTRING( "  * skipping speech ''" );
            PRINTSTRING( ref cVar6 );
            PRINTSTRING( "'' because ''finale1c'' running and with iNumber_of_player_group_followers = " );
            PRINTINT( iVar11 );
            PRINTNL();
            return 0;
        }
    }
    if ((iParam2 == 0) AND (sub_48299()))
    {
        if (NOT g_U8358)
        {
            if (iParam0 == 5)
            {
                PRINTSTRING( "  * skipping speech ''" );
                PRINTSTRING( ref cVar6 );
                PRINTSTRING( "'' because ''roman3'' running and dateSpeech = CLOTHES_SHOP_PLAYER_PURCHASES  - " );
                PRINTSTRING( "gbPKMAL_25_displayed:" );
                sub_48543( g_U8358 );
                PRINTNL();
                g_U8358 = 1;
                return 0;
            }
        }
        if (NOT g_U8355)
        {
            if (iParam0 == 3)
            {
                PRINTSTRING( "  * skipping speech ''" );
                PRINTSTRING( ref cVar6 );
                PRINTSTRING( "'' because ''roman3'' running and dateSpeech = CLOTHES_SHOP_GREETING  - " );
                PRINTSTRING( "bClothes_bought_in_roman3:" );
                sub_48543( g_U8355 );
                PRINTNL();
                return 0;
            }
        }
    }
    if (NOT (IS_CHAR_INJURED( (uParam3^) )))
    {
        TASK_TURN_CHAR_TO_FACE_CHAR( (uParam3^), sub_4155() );
    }
    sub_11206( "  * PLAY_SHOP_ASST_SPEECH(''" );
    sub_11206( ref cVar6 );
    sub_11206( "'')\n" );
    return sub_11032( ref cVar6, uParam1, 1, 0 );
}

void sub_48089()
{
    unknown Result;

    GET_PLAYER_GROUP( CONVERT_INT_TO_PLAYERINDEX( GET_PLAYER_ID() ), ref Result );
    return Result;
}

void sub_48299()
{
    int Result;

    Result = 0;
    if ((GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT( "Roman3" )) >= 1)
    {
        Result = 1;
    }
    return Result;
}

void sub_48543(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    return;
}

void sub_48965(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    char[12] cVar6;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;

    array(ref cVar6, 2);
    StrCopy( ref cVar6[0], uParam1, 16 );
    StrCopy( ref cVar6[1], "END", 16 );
    sub_49009( uParam0, ref cVar6, uParam2, 10000, uParam3, 0 );
    return;
}

void sub_49009(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;
    unknown uVar36;
    int I;
    int iVar38;

    array(ref uVar8._fU32, 5);
    ref uVar8;
    iVar38 = uVar8._fU32;
    if (NOT (IS_THREAD_ACTIVE( g_U812 )))
    {
        uVar8._fU12 = uParam0;
        if ((uParam1^) > iVar38)
        {
            SCRIPT_ASSERT( "TELL SIMON END CALL ARRAY SIZE NEEDS INCREASING" );
            return;
        }
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            uVar8._fU32[I] = {(uParam1^)[I]};
        }
        if ((uParam1^) < iVar38)
        {
            StrCopy( ref uVar8._fU32[(uParam1^)], "END", 16 );
        }
        StrCopy( ref uVar8._fU16, uParam2, 16 );
        uVar8._fU0 = uParam3;
        uVar8._fU4 = uParam4;
        uVar8._fU8 = uParam5;
        REQUEST_SCRIPT( "SPcellphoneEndCall" );
        while (NOT (HAS_SCRIPT_LOADED( "SPcellphoneEndCall" )))
        {
            REQUEST_SCRIPT( "SPcellphoneEndCall" );
            WAIT( 0 );
        }
        g_U811 = 1;
        g_U812 = START_NEW_SCRIPT_WITH_ARGS( "SPcellphoneEndCall", ref uVar8, 29, 1024 );
        MARK_SCRIPT_AS_NO_LONGER_NEEDED( "SPcellphoneEndCall" );
    }
    else
    {
        SCRIPT_ASSERT( "MAKE_END_OF_MISSION_CALL() has been called more than once, might be in a loop" );
    }
    return;
}

void sub_49577()
{
    if ((TIMERB() >= 1000) AND ((IS_SCREEN_FADED_IN()) AND ((NOT (l_U587 == 2)) AND ((NOT (l_U587 == 0)) AND (sub_24573())))))
    {
        SETTIMERA( 0 );
        DO_SCREEN_FADE_OUT( 500 );
        while (NOT IS_SCREEN_FADED_OUT())
        {
            WAIT( 0 );
        }
        CLEAR_PRINTS();
        sub_4418( ref l_U831, 0 );
        l_U587 = 2;
        l_U656 = 1;
    }
    switch (l_U587)
    {
        case 0:
        while (IS_SCREEN_FADING())
        {
            WAIT( 0 );
        }
        DO_SCREEN_FADE_OUT( 500 );
        while (NOT IS_SCREEN_FADED_OUT())
        {
            WAIT( 0 );
        }
        REMOVE_PLAYER_HELMET( sub_7251(), 1 );
        CLEAR_WANTED_LEVEL( sub_7251() );
        SET_PLAYER_CONTROL( sub_7251(), 0 );
        CLEAR_PRINTS();
        sub_49849();
        REQUEST_MODEL( -1150599089 );
        while (NOT (HAS_MODEL_LOADED( -1150599089 )))
        {
            WAIT( 0 );
        }
        REQUEST_ANIMS( "MISSPASS" );
        while (NOT (HAVE_ANIMS_LOADED( "MISSPASS" )))
        {
            WAIT( 0 );
        }
        sub_4418( ref l_U831, 0 );
        sub_4418( ref l_U825, 0 );
        while ((sub_12589( l_U831 )) || (sub_12589( l_U825 )))
        {
            WAIT( 0 );
        }
        if (DOES_VEHICLE_EXIST( l_U678 ))
        {
            MARK_CAR_AS_NO_LONGER_NEEDED( ref l_U678 );
        }
        LOAD_SCENE( -127.58460000, -257.53450000, 12.15370000 );
        CLEAR_AREA( -127.58460000, -257.53450000, 12.15370000, 20.00000000, 1 );
        EXTINGUISH_FIRE_AT_POINT( -127.58460000, -257.53450000, 12.15370000, 20.00000000 );
        SET_PED_DENSITY_MULTIPLIER( 0.00000000 );
        SET_CAR_DENSITY_MULTIPLIER( 0.00000000 );
        CREATE_CAR( -1150599089, -127.58460000, -257.53450000, 12.15370000, ref l_U680, 1 );
        SET_CAR_HEADING( l_U680, 356.68590000 );
        SET_NEEDS_TO_BE_HOTWIRED( l_U680, 0 );
        SET_CAR_ENGINE_ON( l_U680, 1, 1 );
        if (NOT (IS_CHAR_DEAD( sub_4155() )))
        {
            WARP_CHAR_INTO_CAR( sub_4155(), l_U680 );
        }
        if (NOT (IS_CHAR_INJURED( l_U672 )))
        {
            CLEAR_CHAR_PROP( l_U672, 0 );
            WARP_CHAR_INTO_CAR_AS_PASSENGER( l_U672, l_U680, 0 );
        }
        if (NOT (IS_CHAR_INJURED( l_U673 )))
        {
            DETACH_PED( l_U673, 1 );
            CLEAR_CHAR_PROP( l_U673, 0 );
            WARP_CHAR_INTO_CAR_AS_PASSENGER( l_U673, l_U680, 2 );
        }
        if (NOT (IS_CHAR_INJURED( l_U674 )))
        {
            DETACH_PED( l_U674, 1 );
            CLEAR_CHAR_PROP( l_U674, 0 );
            WARP_CHAR_INTO_CAR_AS_PASSENGER( l_U674, l_U680, 1 );
        }
        l_U668 = 0;
        if (IS_CHAR_INJURED( l_U672 ))
        {
            l_U668++;
        }
        if (IS_CHAR_INJURED( l_U673 ))
        {
            l_U668 += 10;
        }
        if (IS_CHAR_INJURED( l_U674 ))
        {
            l_U668 += 100;
        }
        SET_CAR_ON_GROUND_PROPERLY( l_U680 );
        if (DOES_VEHICLE_EXIST( l_U678 ))
        {
            DELETE_CAR( ref l_U678 );
        }
        if (l_U588 == 3)
        {
            if (NOT (IS_CHAR_DEAD( l_U672 )))
            {
                l_U662 = 1;
            }
        }
        WAIT( 0 );
        WAIT( 1000 );
        SET_INSTANT_WIDESCREEN_BORDERS( 1 );
        BEGIN_CAM_COMMANDS( ref l_U665 );
        SET_USE_HIGHDOF( 1 );
        CREATE_CAM( 14, ref l_U846 );
        SET_CAM_POS( l_U846, -128.54280000, -254.49690000, 12.68438000 );
        SET_CAM_ROT( l_U846, -4.01277100, -0.00000000, -152.59410000 );
        SET_CAM_FOV( l_U846, 36.30000000 );
        SET_CAM_NEAR_DOF( l_U846, 0.50000000 );
        SET_CAM_FAR_DOF( l_U846, 8.00000000 );
        SET_CAM_ACTIVE( l_U846, 1 );
        SET_CAM_PROPAGATE( l_U846, 1 );
        ACTIVATE_SCRIPTED_CAMS( 1, 1 );
        END_CAM_COMMANDS( ref l_U665 );
        CLEAR_PRINTS();
        CLEAR_HELP();
        DO_SCREEN_FADE_IN( 500 );
        while (NOT IS_SCREEN_FADED_IN())
        {
            WAIT( 0 );
        }
        l_U587 = 1;
        SETTIMERB( 0 );
        break;
        case 1:
        if (NOT (IS_CHAR_INJURED( l_U672 )))
        {
            BLOCK_CHAR_AMBIENT_ANIMS( l_U672, 1 );
        }
        if (NOT (IS_CHAR_INJURED( l_U673 )))
        {
            BLOCK_CHAR_AMBIENT_ANIMS( l_U673, 1 );
        }
        if (NOT (IS_CHAR_INJURED( l_U674 )))
        {
            BLOCK_CHAR_AMBIENT_ANIMS( l_U674, 1 );
        }
        if ((NOT l_U658) AND (TIMERB() >= 200))
        {
            if ((l_U588 == 5) || (l_U588 == 2))
            {
                if (NOT (IS_CHAR_INJURED( l_U672 )))
                {
                    sub_11032( "RB2_TRUCKD", ref l_U831, 7, 1 );
                }
                else if (NOT (IS_CHAR_INJURED( l_U673 )))
                {
                    sub_11032( "RB2_DROPT", ref l_U831, 7, 1 );
                }
            }
            else if (NOT (IS_CHAR_INJURED( l_U672 )))
            {
                sub_11032( "RB2_DIED", ref l_U831, 7, 1 );
            }
            else if (NOT (IS_CHAR_INJURED( l_U673 )))
            {
                sub_11032( "RB2_DROPT", ref l_U831, 7, 1 );
            };;;
            l_U658 = 1;
        }
        if ((((TIMERB() >= 9000) AND (l_U662)) || (TIMERB() >= 11000)) AND (NOT l_U659))
        {
            if (NOT (IS_CHAR_INJURED( l_U672 )))
            {
                OPEN_SEQUENCE_TASK( ref l_U688 );
                TASK_PLAY_ANIM( 0, "partial_incar_bye", "MISSPASS", 10.00000000, 0, 0, 0, 0, -1 );
                TASK_LEAVE_ANY_CAR( 0 );
                TASK_FOLLOW_NAV_MESH_TO_COORD( 0, -121.34320000, -256.21000000, 12.68830000, 2, -1, 1.00000000 );
                CLOSE_SEQUENCE_TASK( l_U688 );
                TASK_PERFORM_SEQUENCE( l_U672, l_U688 );
                CLEAR_SEQUENCE_TASK( l_U688 );
            }
            l_U659 = 1;
        }
        if ((((TIMERB() >= 10500) AND (l_U662)) || (TIMERB() >= 12500)) AND (NOT l_U660))
        {
            if (NOT (IS_CHAR_INJURED( l_U673 )))
            {
                OPEN_SEQUENCE_TASK( ref l_U688 );
                TASK_LEAVE_ANY_CAR( 0 );
                TASK_FOLLOW_NAV_MESH_TO_COORD( 0, -123.56050000, -257.84650000, 12.68660000, 2, -1, 1.00000000 );
                CLOSE_SEQUENCE_TASK( l_U688 );
                TASK_PERFORM_SEQUENCE( l_U673, l_U688 );
                CLEAR_SEQUENCE_TASK( l_U688 );
            }
            l_U660 = 1;
        }
        if (NOT l_U661)
        {
            if (((TIMERB() >= 11000) AND (l_U662)) || (((TIMERB() >= 3000) AND ((IS_CHAR_INJURED( l_U673 )) AND (IS_CHAR_INJURED( l_U672 )))) || (TIMERB() >= 13000)))
            {
                if (NOT (IS_CHAR_INJURED( l_U674 )))
                {
                    OPEN_SEQUENCE_TASK( ref l_U688 );
                    TASK_LEAVE_ANY_CAR( 0 );
                    TASK_FOLLOW_NAV_MESH_TO_COORD( 0, -121.76940000, -258.02830000, 12.68640000, 2, -1, 1.00000000 );
                    CLOSE_SEQUENCE_TASK( l_U688 );
                    TASK_PERFORM_SEQUENCE( l_U674, l_U688 );
                    CLEAR_SEQUENCE_TASK( l_U688 );
                }
                l_U661 = 1;
            }
        }
        if (((TIMERB() >= 13500) AND (l_U662)) || (((TIMERB() >= 5600) AND ((IS_CHAR_INJURED( l_U673 )) AND (IS_CHAR_INJURED( l_U672 )))) || (TIMERB() >= 15500)))
        {
            l_U587 = 2;
        }
        break;
        case 2:
        if (NOT l_U656)
        {
            DO_SCREEN_FADE_OUT( 500 );
            while (NOT IS_SCREEN_FADED_OUT())
            {
                WAIT( 0 );
            }
        }
        if (DOES_CHAR_EXIST( l_U672 ))
        {
            DELETE_CHAR( ref l_U672 );
        }
        if (DOES_CHAR_EXIST( l_U673 ))
        {
            DELETE_CHAR( ref l_U673 );
        }
        if (DOES_CHAR_EXIST( l_U674 ))
        {
            DELETE_CHAR( ref l_U674 );
        }
        SET_WIDESCREEN_BORDERS( 0 );
        BEGIN_CAM_COMMANDS( ref l_U665 );
        SET_USE_HIGHDOF( 0 );
        SET_CAM_ACTIVE( l_U846, 0 );
        SET_CAM_PROPAGATE( l_U846, 0 );
        ACTIVATE_SCRIPTED_CAMS( 0, 0 );
        END_CAM_COMMANDS( ref l_U665 );
        SET_GAME_CAM_HEADING( 0.00000000 );
        if (NOT l_U656)
        {
            INCREMENT_INT_STAT_NO_MESSAGE( 373, 1 );
        }
        l_U656 = 0;
        WAIT( 2000 );
        DO_SCREEN_FADE_IN( 500 );
        while (NOT IS_SCREEN_FADED_IN())
        {
            WAIT( 0 );
        }
        SET_PLAYER_CONTROL( sub_7251(), 1 );
        switch (l_U588)
        {
            case 2:
            sub_48965( l_U837, "RB2_CALL1", "RB2AUD", 0 );
            break;
            case 3:
            switch (l_U668)
            {
                case 1:
                sub_48965( l_U837, "RB2_CALL13", "RB2AUD", 0 );
                break;
                case 10:
                sub_48965( l_U837, "RB2_CALL15", "RB2AUD", 0 );
                break;
                case 100:
                sub_48965( l_U837, "RB2_CALL8", "RB2AUD", 0 );
                break;
                case 11:
                sub_48965( l_U837, "RB2_CALL14", "RB2AUD", 0 );
                break;
                case 101:
                sub_48965( l_U837, "RB2_CALL16", "RB2AUD", 0 );
                break;
                case 110:
                sub_48965( l_U837, "RB2_CALL7", "RB2AUD", 0 );
                break;
                case 111:
                sub_48965( l_U837, "RB2_CALL10", "RB2AUD", 0 );
                break;
            }
            break;
        }
        if (g_U9930 > 1)
        {
            SET_PLAYER_MOOD_PISSED_OFF( sub_7251(), 150 );
            SAY_AMBIENT_SPEECH( sub_4155(), "MISSION_FAIL_RAGE", 0, 0, 0 );
        }
        sub_53296();
        sub_3686();
        break;
    }
    return;
}

void sub_49849()
{
    if (IS_PLAYER_PLAYING( sub_7251() ))
    {
        sub_49882( l_U873._fU0 );
        sub_49978( l_U873._fU4 );
        sub_50074( l_U873._fU8 );
        sub_50170( l_U873._fU12 );
        sub_50195( l_U873._fU16 );
        SET_CHAR_COMPONENT_VARIATION( sub_4155(), 4, 0, 0 );
        SET_CHAR_COMPONENT_VARIATION( sub_4155(), 3, 0, 0 );
    }
    return;
}

void sub_49882(unknown uParam0)
{
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;

    sub_7370( uParam0, ref iVar3, ref iVar4 );
    iVar5 = GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 1 );
    iVar6 = GET_CHAR_TEXTURE_VARIATION( sub_4155(), 1 );
    if ((iVar6 != iVar4) || (iVar5 != iVar3))
    {
        SET_CHAR_COMPONENT_VARIATION( sub_4155(), 1, iVar3, iVar4 );
    }
    return;
}

void sub_49978(unknown uParam0)
{
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;

    sub_8498( uParam0, ref iVar3, ref iVar4 );
    iVar5 = GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 2 );
    iVar6 = GET_CHAR_TEXTURE_VARIATION( sub_4155(), 2 );
    if ((iVar6 != iVar4) || (iVar5 != iVar3))
    {
        SET_CHAR_COMPONENT_VARIATION( sub_4155(), 2, iVar3, iVar4 );
    }
    return;
}

void sub_50074(unknown uParam0)
{
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;

    sub_9225( uParam0, ref iVar3, ref iVar4 );
    iVar5 = GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 5 );
    iVar6 = GET_CHAR_TEXTURE_VARIATION( sub_4155(), 5 );
    if ((iVar6 != iVar4) || (iVar5 != iVar3))
    {
        SET_CHAR_COMPONENT_VARIATION( sub_4155(), 5, iVar3, iVar4 );
    }
    return;
}

void sub_50170(int iParam0)
{
    int iVar3;
    int iVar4;

    if (iParam0 == 3)
    {
        sub_50170( -1 );
        sub_50195( -1 );
        if (((GET_CHAR_TEXTURE_VARIATION( sub_4155(), 8 )) != 0) || ((GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 8 )) != 1))
        {
            SET_CHAR_COMPONENT_VARIATION( sub_4155(), 8, 1, 0 );
        }
    }
    else
    {
        sub_9811( iParam0, ref iVar3 );
        GET_CHAR_PROP_INDEX( sub_4155(), 0, ref iVar4 );
        if (((GET_CHAR_TEXTURE_VARIATION( sub_4155(), 8 )) != 0) || ((GET_CHAR_DRAWABLE_VARIATION( sub_4155(), 8 )) != 0))
        {
            SET_CHAR_COMPONENT_VARIATION( sub_4155(), 8, 0, 0 );
        }
        if (iVar4 != iVar3)
        {
            if (iVar3 < 0)
            {
                CLEAR_CHAR_PROP( sub_4155(), 0 );
            }
            else
            {
                SET_CHAR_PROP_INDEX( sub_4155(), 0, iVar3 );
            }
        }
    }
    return;
}

void sub_50195(unknown uParam0)
{
    int iVar3;
    int iVar4;

    sub_10104( uParam0, ref iVar3 );
    GET_CHAR_PROP_INDEX( sub_4155(), 1, ref iVar4 );
    if (iVar4 != iVar3)
    {
        if (iVar3 < 0)
        {
            CLEAR_CHAR_PROP( sub_4155(), 1 );
        }
        else
        {
            SET_CHAR_PROP_INDEX( sub_4155(), 1, iVar3 );
        }
    }
    return;
}

void sub_53296()
{
    sub_53305();
    return;
}

void sub_53305()
{
    int iVar2;

    iVar2 = 14;
    sub_53319( iVar2 );
    sub_2775( iVar2 );
    return;
}

void sub_53319(unknown uParam0)
{
    if (g_U10981[uParam0]._fU12)
    {
        return;
    }
    SET_PLAYER_MOOD_PISSED_OFF( sub_7251(), 150 );
    CLEAR_HELP();
    sub_1599( uParam0 );
    return;
}

void sub_53432()
{
    sub_53441();
    if (NOT l_U663)
    {
        if (l_U588 == 2)
        {
            if (NOT (IS_CHAR_INJURED( l_U672 )))
            {
                if (IS_CHAR_IN_ANY_CAR( l_U672 ))
                {
                    OPEN_SEQUENCE_TASK( ref l_U688 );
                    TASK_LEAVE_ANY_CAR( 0 );
                    TASK_WANDER_STANDARD( 0 );
                    CLOSE_SEQUENCE_TASK( l_U688 );
                    TASK_PERFORM_SEQUENCE( l_U672, l_U688 );
                    CLEAR_SEQUENCE_TASK( l_U688 );
                }
            }
            l_U663 = 1;
        }
    }
    if ((NOT (sub_12589( l_U831 ))) AND (NOT l_U624))
    {
        switch (l_U588)
        {
            case 2:
            PRINT_NOW( "RAY2_06", 7000, 1 );
            break;
            case 5:
            PRINT_NOW( "RAY2_ABANDON", 7000, 1 );
            break;
            case 3:
            if (IS_CHAR_INJURED( l_U672 ))
            {
                PRINT_NOW( "RAY2_07", 7000, 1 );
            }
            else if (IS_CHAR_INJURED( l_U673 ))
            {
                PRINT_NOW( "RAY2_07A", 7000, 1 );
            }
            else if (IS_CHAR_INJURED( l_U674 ))
            {
                PRINT_NOW( "RAY2_07B", 7000, 1 );
            };;;
            break;
            case 4:
            PRINT_NOW( "RAY2_07C", 7000, 1 );
            break;
        }
        l_U624 = 1;
    }
    if ((sub_13907( 0, 1 )) AND ((TIMERB() >= 8500) AND (l_U624)))
    {
        if (l_U648)
        {
            if (IS_CHAR_INJURED( l_U672 ))
            {
                l_U668++;
            }
            else
            {
                SET_CHAR_PROOFS( l_U672, 1, 1, 1, 1, 1 );
            }
            if (IS_CHAR_INJURED( l_U673 ))
            {
                l_U668 += 10;
            }
            else
            {
                SET_CHAR_PROOFS( l_U673, 1, 1, 1, 1, 1 );
            }
            if (IS_CHAR_INJURED( l_U674 ))
            {
                l_U668 += 100;
            }
            else
            {
                SET_CHAR_PROOFS( l_U674, 1, 1, 1, 1, 1 );
            }
        }
        if ((NOT (l_U668 == 111)) AND (l_U648))
        {
            sub_54431();
            l_U578 = 11;
        }
        else if (l_U588 == 4)
        {
            sub_48965( l_U837, "RB2_CALL3", "RB2AUD", 0 );
        }
        else if (l_U588 == 2)
        {
            sub_48965( l_U837, "RB2_CALL1", "RB2AUD", 0 );
        }
        else
        {
            sub_48965( l_U837, "RB2_CALL10", "RB2AUD", 0 );
        }
        sub_53296();
        if (g_U9930 > 2)
        {
            SET_PLAYER_MOOD_PISSED_OFF( sub_7251(), 150 );
            SAY_AMBIENT_SPEECH( sub_4155(), "MISSION_FAIL_RAGE", 0, 0, 0 );
        }
        sub_3686();;
    }
    return;
}

void sub_53441()
{
    if (NOT (IS_CHAR_INJURED( l_U673 )))
    {
        GET_CHAR_HEALTH( l_U673, ref l_U859 );
        if ((l_U859 < 300) || (IS_CAR_DEAD( l_U678 )))
        {
            if (((l_U580 == 1) || (l_U580 == 11)) AND (NOT (l_U580 == 12)))
            {
                DETACH_PED( l_U673, 1 );
                CLEAR_CHAR_TASKS( l_U673 );
                if (NOT (IS_CHAR_INJURED( l_U673 )))
                {
                    STOP_PED_SPEAKING( l_U673, 1 );
                    DAMAGE_CHAR( l_U673, 800, 0 );
                }
                l_U580 = 12;
            }
        }
    }
    if (NOT (IS_CHAR_INJURED( l_U674 )))
    {
        GET_CHAR_HEALTH( l_U674, ref l_U859 );
        if ((l_U859 < 300) || (IS_CAR_DEAD( l_U678 )))
        {
            if (((l_U581 == 1) || (l_U581 == 11)) AND (NOT (l_U581 == 12)))
            {
                DETACH_PED( l_U674, 1 );
                CLEAR_CHAR_TASKS( l_U674 );
                if (NOT (IS_CHAR_INJURED( l_U674 )))
                {
                    STOP_PED_SPEAKING( l_U674, 1 );
                    DAMAGE_CHAR( l_U674, 800, 0 );
                }
                l_U581 = 12;
            }
        }
    }
    return;
}

void sub_54431()
{
    if ((GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT( "taxi" )) > 0)
    {
        g_U2229 = 1;
    }
    return;
}

void sub_54724()
{
    if (IS_VEH_DRIVEABLE( l_U678 ))
    {
        if ((l_U578 < 10) AND ((NOT (l_U578 == 8)) AND ((NOT l_U635) AND ((IS_CHAR_IN_CAR( sub_4155(), l_U678 )) AND (NOT (IS_CHAR_DEAD( sub_4155() )))))))
        {
            if ((sub_54865() == 1000) AND (sub_54810()))
            {
                switch (l_U589)
                {
                    case 0:
                    l_U589 = 1;
                    l_U618 = 0;
                    l_U619 = 0;
                    break;
                    case 1:
                    l_U589 = 3;
                    break;
                    case 2:
                    l_U589 = 3;
                    break;
                    case 3:
                    l_U589 = 1;
                    l_U618 = 0;
                    l_U619 = 0;
                    break;
                    default: break;
                }
                if ((l_U589 == 3) || (l_U589 == 1))
                {
                    PLAY_SOUND_FROM_VEHICLE( l_U852, "RB2_TAKING_IN_THE_TRASH_OPEN_COMPACTOR", l_U678 );
                }
            }
        }
        switch (l_U589)
        {
            case 0:
            CONTROL_CAR_DOOR( l_U678, 5, 4, 0.00000000 );
            break;
            case 2:
            CONTROL_CAR_DOOR( l_U678, 5, 4, 1.00000000 );
            break;
            case 1:
            l_U820 += 0.17000000 * TIMESTEP();
            if (l_U820 >= 1.00000000)
            {
                l_U820 = 1.00000000;
                l_U589 = 2;
                STOP_SOUND( l_U852 );
            }
            break;
            case 3:
            l_U820 -= 0.17000000 * TIMESTEP();
            if (l_U820 <= 0.00000000)
            {
                l_U820 = 0.00000000;
                l_U589 = 0;
                if (l_U635)
                {
                    l_U635 = 0;
                }
                if (l_U599)
                {
                    if (DOES_OBJECT_EXIST( l_U692 ))
                    {
                        DELETE_OBJECT( ref l_U692 );
                    }
                }
                if (l_U600)
                {
                    if (DOES_OBJECT_EXIST( l_U693 ))
                    {
                        DELETE_OBJECT( ref l_U693 );
                    }
                }
                if (l_U601)
                {
                    if (DOES_OBJECT_EXIST( l_U694 ))
                    {
                        DELETE_OBJECT( ref l_U694 );
                    }
                }
                if (l_U602)
                {
                    if (DOES_OBJECT_EXIST( l_U695 ))
                    {
                        DELETE_OBJECT( ref l_U695 );
                    }
                }
                PLAY_SOUND_FROM_VEHICLE( -1, "RB2_TAKING_IN_THE_TRASH_COMPACTOR_CLANG", l_U678 );
                STOP_SOUND( l_U852 );
            }
            break;
            default: break;
        }
        CONTROL_CAR_DOOR( l_U678, 5, 4, l_U820 );
    }
    return;
}

int sub_54810()
{
    if ((IS_CONTROL_JUST_PRESSED( 2, 77 )) || (IS_CONTROL_JUST_PRESSED( 0, 77 )))
    {
        return 1;
        break;
    }
    return 0;
}

void sub_54865()
{
    return g_U91._fU0;
}

void sub_55639()
{
    int iVar2;

    if (IS_VEH_DRIVEABLE( l_U678 ))
    {
        l_U870 = sub_55665();
        if (l_U870 >= 40.00000000)
        {
            iVar2 = 0;
            if ((l_U580 == 11) || (l_U580 == 1))
            {
                l_U582 = 5;
                iVar2++;
                sub_17602( ref l_U673, 2, ref l_U580 );
            }
            if ((l_U581 == 11) || (l_U581 == 1))
            {
                l_U583 = 5;
                iVar2 += 2;
                sub_17602( ref l_U674, 3, ref l_U581 );
            }
            if ((l_U578 == 9) || ((l_U578 == 6) || (l_U578 == 4)))
            {
                switch (iVar2)
                {
                    case 1:
                    PRINT_NOW( "RAY2_16", 7500, 1 );
                    if (NOT (DOES_BLIP_EXIST( l_U702 )))
                    {
                        ADD_BLIP_FOR_CHAR( l_U673, ref l_U702 );
                        SET_BLIP_AS_FRIENDLY( l_U702, 1 );
                    }
                    break;
                    case 2:
                    PRINT_NOW( "RAY2_17", 7500, 1 );
                    if (NOT (DOES_BLIP_EXIST( l_U703 )))
                    {
                        ADD_BLIP_FOR_CHAR( l_U674, ref l_U703 );
                        SET_BLIP_AS_FRIENDLY( l_U703, 1 );
                    }
                    break;
                    case 3:
                    PRINT_NOW( "RAY2_15", 7500, 1 );
                    if (NOT (DOES_BLIP_EXIST( l_U702 )))
                    {
                        ADD_BLIP_FOR_CHAR( l_U673, ref l_U702 );
                        SET_BLIP_AS_FRIENDLY( l_U702, 1 );
                    }
                    if (NOT (DOES_BLIP_EXIST( l_U703 )))
                    {
                        ADD_BLIP_FOR_CHAR( l_U674, ref l_U703 );
                        SET_BLIP_AS_FRIENDLY( l_U703, 1 );
                    }
                    break;
                }
                if (iVar2 > 0)
                {
                    if (sub_12589( l_U825 ))
                    {
                        sub_18885( ref l_U825 );
                    }
                    REMOVE_BLIP( l_U699 );
                    REMOVE_BLIP( l_U700 );
                    REMOVE_BLIP( l_U701 );
                    l_U579 = l_U578;
                    l_U578 = 3;
                }
            }
        }
    }
    return;
}

void sub_55665()
{
    float Result;

    GET_CAR_ROLL( l_U678, ref Result );
    if (Result < 0)
    {
        Result *= -1;
    }
    return Result;
}

void sub_56252()
{
    GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, 0.50000000, -6.30000000, 0.00000000, ref l_U788._fU0, ref l_U788._fU4, ref l_U788._fU8 );
    GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, -0.50000000, -6.30000000, 0.00000000, ref l_U791._fU0, ref l_U791._fU4, ref l_U791._fU8 );
    GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, l_U767._fU0, l_U767._fU4 - 0.20000000, l_U767._fU8, ref l_U794._fU0, ref l_U794._fU4, ref l_U794._fU8 );
    GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, l_U770._fU0, l_U770._fU4 - 0.20000000, l_U770._fU8, ref l_U797._fU0, ref l_U797._fU4, ref l_U797._fU8 );
    GET_CAR_SPEED( l_U678, ref l_U821 );
    if (l_U578 == 5)
    {
        if (NOT (IS_CHAR_INJURED( l_U673 )))
        {
            sub_56531( ref l_U673, 2, ref l_U580, ref l_U591, ref l_U692 );
        }
        if (NOT (IS_CHAR_INJURED( l_U674 )))
        {
            sub_56531( ref l_U674, 3, ref l_U581, ref l_U592, ref l_U693 );
        }
    }
    else if (l_U578 == 7)
    {
        if (NOT (IS_CHAR_INJURED( l_U673 )))
        {
            sub_56531( ref l_U673, 2, ref l_U580, ref l_U591, ref l_U694 );
        }
        if (NOT (IS_CHAR_INJURED( l_U674 )))
        {
            sub_56531( ref l_U674, 3, ref l_U581, ref l_U592, ref l_U695 );
        }
    }
    else if (NOT (IS_CHAR_INJURED( l_U673 )))
    {
        sub_56531( ref l_U673, 2, ref l_U580, ref l_U591, ref l_U697 );
    }
    if (NOT (IS_CHAR_INJURED( l_U674 )))
    {
        sub_56531( ref l_U674, 3, ref l_U581, ref l_U592, ref l_U697 );
    };;;
    sub_61075( ref l_U673, ref l_U582, l_U580, 2, ref l_U856 );
    sub_61075( ref l_U674, ref l_U583, l_U581, 3, ref l_U857 );
    return;
}

void sub_56531(unknown uParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    float fVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    switch ((uParam2^))
    {
        case 1:
        if ((l_U578 == 7) || (l_U578 == 5))
        {
            if (iParam1 == 2)
            {
                if (TIMERB() >= l_U849[0])
                {
                    CLEAR_CHAR_TASKS( (uParam0^) );
                    l_U582 = 4;
                    (uParam2^) = 2;
                }
            }
            else if (iParam1 == 3)
            {
                if (TIMERB() >= l_U849[1])
                {
                    CLEAR_CHAR_TASKS( (uParam0^) );
                    l_U583 = 4;
                    (uParam2^) = 2;
                }
            }
        }
        break;
        case 2:
        if (iParam1 == 2)
        {
            if (l_U582 == 0)
            {
                sub_22784( uParam0, uParam2, uParam4 );
            }
        }
        else if (iParam1 == 3)
        {
            if (l_U583 == 0)
            {
                sub_22784( uParam0, uParam2, uParam4 );
            }
        }
        break;
        case 3:
        if (NOT (uParam3^))
        {
            if (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_PICKUPRUBBISH" ))
            {
                GET_CHAR_ANIM_CURRENT_TIME( (uParam0^), l_U871, "GBGE_PICKUPRUBBISH", ref l_U860 );
                if (l_U860 > 0.60000000)
                {
                    ATTACH_OBJECT_TO_PED( (uParam4^), (uParam0^), 1232, l_U782, l_U785, 0 );
                    FREEZE_OBJECT_POSITION( (uParam4^), 0 );
                    if (iParam1 == 2)
                    {
                        l_U593 = 1;
                    }
                    else if (iParam1 == 3)
                    {
                        l_U594 = 1;
                    }
                    (uParam3^) = 1;
                    SET_CHAR_MOVE_ANIM_SPEED_MULTIPLIER( (uParam0^), 1.45000000 );
                }
            }
        }
        else
        {
            GET_SCRIPT_TASK_STATUS( (uParam0^), 29, ref l_U872 );
            if (l_U872 == 7)
            {
                if (l_U607)
                {
                    (uParam2^) = 6;
                }
                else
                {
                    (uParam2^) = 4;
                    if (NOT (IS_CHAR_INJURED( (uParam0^) )))
                    {
                        TASK_PLAY_ANIM_WITH_FLAGS( (uParam0^), "GBGE_WALKWITHRUBBISH", l_U871, 6.00000000, 0, 1296 );
                        if (iParam1 == 2)
                        {
                            TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), l_U788._fU0, l_U788._fU4, l_U788._fU8, 2, -2, 4.00000000 );
                        }
                        else
                        {
                            TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), l_U791._fU0, l_U791._fU4, l_U791._fU8, 2, -2, 4.00000000 );
                        }
                    }
                }
            }
        }
        break;
        case 4:
        if (((l_U667 == 3) AND ((LOCATE_CHAR_ON_FOOT_3D( (uParam0^), l_U791._fU0, l_U791._fU4, l_U791._fU8, 0.60000000, 0.60000000, 2.00000000, 0 )) AND (iParam1 == 3))) || ((l_U667 == 2) AND ((LOCATE_CHAR_ON_FOOT_3D( (uParam0^), l_U788._fU0, l_U788._fU4, l_U788._fU8, 0.60000000, 0.60000000, 2.00000000, 0 )) AND (iParam1 == 2))))
        {
            if (l_U589 == 2)
            {
                if (iParam1 == 2)
                {
                    sub_57429( uParam0, iParam1, uParam2, l_U788._fU0, l_U788._fU4, l_U788._fU8 );
                }
                else
                {
                    sub_57429( uParam0, iParam1, uParam2, l_U791._fU0, l_U791._fU4, l_U791._fU8 );
                }
            }
            else if ((NOT (l_U589 == 1)) AND (NOT l_U618))
            {
                if (IS_CHAR_IN_CAR( sub_4155(), l_U678 ))
                {
                    sub_11032( "RB2_OPENUP", ref l_U831, 7, 1 );
                    if (sub_54865() == 1000)
                    {
                        PRINT_HELP( "RAY2_12" );
                    }
                    else
                    {
                        PRINT_HELP( "RAY2_12b" );
                    }
                }
                l_U618 = 1;
            }
            sub_21903( uParam0, uParam2, 1, 1, iParam1 );;
        }
        else if (((NOT (l_U667 == 3)) AND ((LOCATE_CHAR_ON_FOOT_3D( (uParam0^), l_U791._fU0, l_U791._fU4, l_U791._fU8, 5.00000000, 5.00000000, 2.00000000, 0 )) AND (iParam1 == 3))) || ((NOT (l_U667 == 2)) AND ((LOCATE_CHAR_ON_FOOT_3D( (uParam0^), l_U788._fU0, l_U788._fU4, l_U788._fU8, 5.00000000, 5.00000000, 2.00000000, 0 )) AND (iParam1 == 2))))
        {
            if (NOT (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_STANDRUBBISH" )))
            {
                TASK_PLAY_ANIM_WITH_FLAGS( (uParam0^), "GBGE_STANDRUBBISH", l_U871, 6.00000000, 0, 1296 );
            }
        }
        else if (l_U821 >= 0.05000000)
        {
            GET_SCRIPT_TASK_STATUS( (uParam0^), 45, ref l_U872 );
            if (NOT (l_U872 == 1))
            {
                if (iParam1 == 2)
                {
                    TASK_TURN_CHAR_TO_FACE_COORD( (uParam0^), l_U788._fU0, l_U788._fU4, l_U788._fU8 );
                }
                else
                {
                    TASK_TURN_CHAR_TO_FACE_COORD( (uParam0^), l_U791._fU0, l_U791._fU4, l_U791._fU8 );
                }
                if (NOT (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_STANDRUBBISH" )))
                {
                    TASK_PLAY_ANIM_WITH_FLAGS( (uParam0^), "GBGE_STANDRUBBISH", l_U871, 6.00000000, 0, 1296 );
                }
            }
        }
        else
        {
            GET_SCRIPT_TASK_STATUS( (uParam0^), 27, ref l_U872 );
            if (NOT (l_U872 == 1))
            {
                if (iParam1 == 2)
                {
                    TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), l_U788._fU0, l_U788._fU4, l_U788._fU8, 2, -2, 0.60000000 );
                }
                else
                {
                    TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), l_U791._fU0, l_U791._fU4, l_U791._fU8, 2, -2, 0.60000000 );
                }
            }
            if (NOT (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_WALKWITHRUBBISH" )))
            {
                TASK_PLAY_ANIM_WITH_FLAGS( (uParam0^), "GBGE_WALKWITHRUBBISH", l_U871, 6.00000000, 0, 1296 );
            }
        };;;
        break;
        case 5:
        if (l_U589 == 2)
        {
            GET_CHAR_COORDINATES( (uParam0^), ref l_U861, ref l_U862, ref l_U863 );
            GET_CAR_COORDINATES( l_U678, ref l_U867, ref l_U868, ref l_U869 );
            GET_DISTANCE_BETWEEN_COORDS_3D( l_U861, l_U862, l_U863, l_U867, l_U868, l_U869, ref l_U870 );
            if (l_U870 <= 7.00000000)
            {
                if (iParam1 == 2)
                {
                    sub_57429( uParam0, iParam1, uParam2, l_U788._fU0, l_U788._fU4, l_U788._fU8 );
                }
                else
                {
                    sub_57429( uParam0, iParam1, uParam2, l_U791._fU0, l_U791._fU4, l_U791._fU8 );
                }
            }
            else
            {
                (uParam2^) = 4;
            }
        }
        else if (l_U821 >= 0.05000000)
        {
            (uParam2^) = 4;
        }
        if (NOT (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_STANDRUBBISH" )))
        {
            TASK_PLAY_ANIM_WITH_FLAGS( (uParam0^), "GBGE_STANDRUBBISH", l_U871, 6.00000000, 0, 1296 );
        }
        break;
        case 7:
        if ((uParam3^))
        {
            if (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_THROWRUBBISH" ))
            {
                GET_CHAR_ANIM_CURRENT_TIME( (uParam0^), l_U871, "GBGE_THROWRUBBISH", ref l_U860 );
                if (l_U860 > 0.50000000)
                {
                    if (DOES_OBJECT_EXIST( (uParam4^) ))
                    {
                        DETACH_OBJECT( (uParam4^), 1 );
                        GET_OBJECT_COORDINATES( (uParam4^), ref l_U861, ref l_U862, ref l_U863 );
                        GET_OFFSET_FROM_CAR_GIVEN_WORLD_COORDS( l_U678, l_U861, l_U862, l_U863, ref l_U861, ref l_U862, ref l_U863 );
                        ATTACH_OBJECT_TO_CAR( (uParam4^), l_U678, 0, l_U861, l_U862, l_U863, 0, 0, 0 );
                    }
                    UNLOCK_RAGDOLL( (uParam0^), 1 );
                    SET_CHAR_MOVE_ANIM_SPEED_MULTIPLIER( (uParam0^), 1.00000000 );
                    if (l_U664 == 0)
                    {
                        if (iParam1 == 2)
                        {
                            l_U595 = 1;
                            l_U755 = {l_U861, l_U862, l_U863};
                        }
                        else
                        {
                            l_U596 = 1;
                            l_U758 = {l_U861, l_U862, l_U863};
                        }
                    }
                    else if (iParam1 == 2)
                    {
                        l_U597 = 1;
                        l_U761 = {l_U861, l_U862, l_U863};
                    }
                    else
                    {
                        l_U598 = 1;
                        l_U764 = {l_U861, l_U862, l_U863};
                    }
                    (uParam3^) = 0;
                }
            }
        }
        else
        {
            GET_SCRIPT_TASK_STATUS( (uParam0^), 29, ref l_U872 );
            if (l_U872 == 7)
            {
                sub_17602( uParam0, iParam1, uParam2 );
            }
        }
        break;
        case 8:
        if (DOES_OBJECT_EXIST( (uParam4^) ))
        {
            if (IS_OBJECT_STATIC( (uParam4^) ))
            {
                UNLOCK_RAGDOLL( (uParam0^), 1 );
                FREEZE_OBJECT_POSITION( (uParam4^), 1 );
                sub_22784( uParam0, uParam2, uParam4 );
            }
        }
        break;
        case 9:
        GET_SCRIPT_TASK_STATUS( (uParam0^), 27, ref l_U872 );
        GET_CAR_HEADING( l_U678, ref l_U870 );
        fVar7 = sub_55665();
        GET_CHAR_HEIGHT_ABOVE_GROUND( (uParam0^), ref uVar8 );
        if (iParam1 == 2)
        {
            GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, l_U767._fU0, l_U767._fU4 - 0.00010000, l_U767._fU8, ref l_U861, ref l_U862, ref l_U863 );
        }
        else if (iParam1 == 3)
        {
            GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, l_U770._fU0, l_U770._fU4 - 0.00010000, l_U770._fU8, ref l_U861, ref l_U862, ref l_U863 );
        }
        if ((LOCATE_CHAR_ANY_MEANS_3D( (uParam0^), l_U861, l_U862, l_U863, 1.40000000, 1.40000000, 1.40000000, 0 )) AND ((fVar7 < 10.00000000) AND ((l_U821 <= 0.05000000) AND (l_U872 == 7))))
        {
            if (NOT (IS_CHAR_INJURED( (uParam0^) )))
            {
                CLEAR_CHAR_TASKS( (uParam0^) );
                OPEN_SEQUENCE_TASK( ref l_U691 );
                TASK_CHAR_SLIDE_TO_COORD( 0, l_U861, l_U862, l_U863, l_U870, 1061158912 );
                if (iParam1 == 2)
                {
                    TASK_PLAY_ANIM_NON_INTERRUPTABLE( 0, "GBGE_GETON_R", l_U871, 4.00000000, 0, 0, 0, 0, -1 );
                }
                else
                {
                    TASK_PLAY_ANIM_NON_INTERRUPTABLE( 0, "GBGE_GETON_L", l_U871, 4.00000000, 0, 0, 0, 0, -1 );
                }
                CLOSE_SEQUENCE_TASK( l_U691 );
                TASK_PERFORM_SEQUENCE( (uParam0^), l_U691 );
                CLEAR_SEQUENCE_TASK( l_U691 );
                (uParam2^) = 10;
            }
        }
        else if ((IS_CHAR_IN_AREA_2D( sub_4155(), -1303.29000000, 277.25000000, -1296.34000000, 289.04000000, 0 )) || ((IS_CHAR_IN_AREA_2D( sub_4155(), -1152.88000000, 1178.61000000, -1142.67000000, 1197.26000000, 0 )) || ((IS_CHAR_IN_AREA_2D( sub_4155(), -312.81000000, 1532.53000000, -301.33000000, 1546.49000000, 0 )) || ((IS_CHAR_IN_AREA_2D( sub_4155(), -517.95000000, 359.26000000, -509.95000000, 375.57000000, 0 )) || ((IS_CHAR_IN_AREA_2D( sub_4155(), 1054.81000000, -304.68000000, 1061.75000000, -287.17000000, 0 )) || (l_U821 >= 0.05000000))))))
        {
            GET_SCRIPT_TASK_STATUS( (uParam0^), 45, ref l_U872 );
            if (NOT (l_U872 == 1))
            {
                if (iParam1 == 2)
                {
                    TASK_TURN_CHAR_TO_FACE_COORD( (uParam0^), l_U794._fU0, l_U794._fU4, l_U794._fU8 );
                }
                else
                {
                    TASK_TURN_CHAR_TO_FACE_COORD( (uParam0^), l_U797._fU0, l_U797._fU4, l_U797._fU8 );
                }
            }
        }
        else
        {
            GET_SCRIPT_TASK_STATUS( (uParam0^), 27, ref l_U872 );
            if (NOT (l_U872 == 1))
            {
                if (iParam1 == 2)
                {
                    uVar9 = {l_U794};
                }
                else
                {
                    uVar9 = {l_U797};
                }
                GET_CHAR_COORDINATES( (uParam0^), ref l_U861, ref l_U862, ref l_U863 );
                GET_DISTANCE_BETWEEN_COORDS_2D( l_U861, l_U862, uVar9._fU0, uVar9._fU4, ref l_U870 );
                if (l_U870 >= 4.00000000)
                {
                    TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), uVar9._fU0, uVar9._fU4, uVar9._fU8, 3, -2, 1.30000000 );
                }
                else
                {
                    TASK_FOLLOW_NAV_MESH_TO_COORD( (uParam0^), uVar9._fU0, uVar9._fU4, uVar9._fU8, 2, -2, 1.30000000 );
                }
            }
        }
        break;
        case 10:
        GET_SCRIPT_TASK_STATUS( (uParam0^), 29, ref l_U872 );
        if (l_U821 >= 0.05000000)
        {
            CLEAR_CHAR_TASKS( (uParam0^) );
            CLEAR_CHAR_SECONDARY_TASK( (uParam0^) );
            sub_17602( uParam0, iParam1, uParam2 );
        }
        else if (l_U872 == 7)
        {
            CLEAR_CHAR_TASKS( (uParam0^) );
            CLEAR_CHAR_SECONDARY_TASK( (uParam0^) );
            if (iParam1 == 2)
            {
                ATTACH_PED_TO_CAR( (uParam0^), l_U678, 0, l_U767, 0.00000000, 0.00000000, 1, 1 );
                TASK_PLAY_ANIM_NON_INTERRUPTABLE( l_U673, "GBGE_HANGR", l_U871, 8.00000000, 1, 0, 0, 0, -1 );
            }
            else if (iParam1 == 3)
            {
                ATTACH_PED_TO_CAR( (uParam0^), l_U678, 0, l_U770, 0.00000000, 0.00000000, 1, 1 );
                TASK_PLAY_ANIM_NON_INTERRUPTABLE( l_U674, "GBGE_HANGL", l_U871, 8.00000000, 1, 0, 0, 0, -1 );
            }
            (uParam2^) = 11;
        }
        break;
        case 11: break;
        case 6:
        if ((uParam3^))
        {
            if (IS_CHAR_STOPPED( (uParam0^) ))
            {
                if (NOT (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_STANDRUBBISH" )))
                {
                    TASK_PLAY_ANIM_WITH_FLAGS( (uParam0^), "GBGE_STANDRUBBISH", l_U871, 6.00000000, 0, 1296 );
                }
            }
            else if (NOT (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_WALKWITHRUBBISH" )))
            {
                TASK_PLAY_ANIM_WITH_FLAGS( (uParam0^), "GBGE_WALKWITHRUBBISH", l_U871, 6.00000000, 0, 1296 );
            }
        }
        break;
    }
    return;
}

void sub_57429(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    GET_CAR_HEADING( l_U678, ref l_U870 );
    if (NOT (IS_CHAR_INJURED( (uParam0^) )))
    {
        if (NOT (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_STANDRUBBISH" )))
        {
            TASK_PLAY_ANIM_WITH_FLAGS( (uParam0^), "GBGE_STANDRUBBISH", l_U871, 10000.00000000, 0, 1296 );
        }
        OPEN_SEQUENCE_TASK( ref l_U690 );
        TASK_CHAR_SLIDE_TO_COORD( 0, uParam3._fU0, uParam3._fU4, uParam3._fU8, l_U870, 1061158912 );
        TASK_PLAY_ANIM_NON_INTERRUPTABLE( 0, "GBGE_THROWRUBBISH", l_U871, 8.00000000, 0, 1, 1, 0, 0 );
        CLOSE_SEQUENCE_TASK( l_U690 );
        TASK_PERFORM_SEQUENCE( (uParam0^), l_U690 );
        CLEAR_SEQUENCE_TASK( l_U690 );
        (uParam2^) = 7;
    }
    return;
}

void sub_61075(unknown uParam0, unknown uParam1, int iParam2, int iParam3, unknown uParam4)
{
    switch ((uParam1^))
    {
        case 0:
        if (((iParam2 == 11) || (iParam2 == 1)) AND ((IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_SHOOT" )) || ((IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_HANGR" )) || (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_HANGL" )))))
        {
            (uParam1^) = 1;
            if (iParam3 == 3)
            {
                l_U638 = 0;
            }
        }
        break;
        case 1:
        if (IS_CHAR_PLAYING_ANIM( (uParam0^), l_U871, "GBGE_SHOOT" ))
        {
            GET_CHAR_ANIM_CURRENT_TIME( (uParam0^), l_U871, "GBGE_SHOOT", ref l_U870 );
        }
        else
        {
            l_U870 = 0;
        }
        if ((LOCATE_CHAR_ANY_MEANS_CHAR_3D( sub_4155(), (uParam0^), 10.00000000, 10.00000000, 10.00000000, 0 )) AND ((IS_CHAR_ON_SCREEN( (uParam0^) )) AND ((l_U870 >= 0.28200000) || ((uParam4^) >= 0.20000000))))
        {
            CLEAR_CHAR_TASKS_IMMEDIATELY( (uParam0^) );
            UNLOCK_RAGDOLL( (uParam0^), 1 );
            (uParam4^) = 0;
            if (iParam3 == 2)
            {
                ATTACH_PED_TO_CAR( (uParam0^), l_U678, 0, l_U767, 0, 0, 0, 1 );
            }
            else if (NOT l_U617)
            {
                ATTACH_PED_TO_CAR( (uParam0^), l_U678, 0, l_U770, 0, 0, 0, 1 );
            }
            else
            {
                ATTACH_PED_TO_CAR( (uParam0^), l_U678, 0, l_U773, 0, 0, 0, 1 );
            }
            SWITCH_PED_TO_RAGDOLL( (uParam0^), 30000, 0, 1, 1, 1, 0 );
            if ((iParam3 == 2) || (NOT l_U617))
            {
                GET_PED_BONE_POSITION( (uParam0^), 1232, 0.00000000, 0.00000000, 0.00000000, ref l_U776 );
                ATTACH_PED_TO_CAR_PHYSICALLY( (uParam0^), l_U678, 1232, 0, l_U776, -1.00000000, 0, 1 );
            }
            if ((iParam3 == 3) AND (l_U617))
            {
                GET_PED_BONE_POSITION( (uParam0^), 1217, 0.00000000, 0.00000000, 0.00000000, ref l_U776 );
                ATTACH_PED_TO_CAR_PHYSICALLY( (uParam0^), l_U678, 1217, 0, l_U776, -1.00000000, 0, 1 );
            }
            GET_PED_BONE_POSITION( (uParam0^), 425, 0.00000000, 0.00000000, 0.00000000, ref l_U776 );
            ATTACH_PED_TO_CAR_PHYSICALLY( (uParam0^), l_U678, 425, 0, l_U776, -1.00000000, 0, 1 );
            GET_PED_BONE_POSITION( (uParam0^), 1219, 0.00000000, 0.00000000, 0.00000000, ref l_U776 );
            ATTACH_PED_TO_CAR_PHYSICALLY( (uParam0^), l_U678, 1219, 0, l_U776, -1.00000000, 0, 1 );
            GET_PED_BONE_POSITION( (uParam0^), 420, 0.00000000, 0.00000000, 0.00000000, ref l_U776 );
            ATTACH_PED_TO_CAR_PHYSICALLY( (uParam0^), l_U678, 420, 0, l_U776, -1.00000000, 0, 1 );
            CREATE_NM_MESSAGE( 1, 8 );
            SEND_NM_MESSAGE( (uParam0^) );
            (uParam1^) = 2;
        }
        else
        {
            (uParam4^) += 1.00000000 * TIMESTEP();
        }
        break;
        case 2:
        if (NOT (IS_PED_RAGDOLL( (uParam0^) )))
        {
            (uParam1^) = 1;
        }
        else if (NOT ((iParam3 == 3) AND (l_U617)))
        {
            if (iParam3 == 2)
            {
                SET_NM_ANIM_POSE( (uParam0^), "MISSRAY2", "GBGE_HANGR", 0.00000000 );
            }
            else
            {
                SET_NM_ANIM_POSE( (uParam0^), "MISSRAY2", "GBGE_HANGL", 0.00000000 );
            }
        }
        else
        {
            SET_NM_ANIM_POSE( (uParam0^), "MISSRAY2", "GBGE_SHOOT", 0.28200000 );
        }
        CREATE_NM_MESSAGE( 1, 28 );
        SET_NM_MESSAGE_FLOAT( 31, 13.00000000 );
        SET_NM_MESSAGE_FLOAT( 32, 0.55000000 );
        SEND_NM_MESSAGE( (uParam0^) );
        CREATE_NM_MESSAGE( 1, 3 );
        SEND_NM_MESSAGE( (uParam0^) );
        if (NOT (IS_CAR_DEAD( l_U678 )))
        {
            GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, 0, 20.00000000, 0.00000000, ref l_U861, ref l_U862, ref l_U863 );
            CREATE_NM_MESSAGE( 1, 237 );
            SET_NM_MESSAGE_VEC3( 243, l_U861, l_U862, l_U863 );
            SEND_NM_MESSAGE( (uParam0^) );
        }
        (uParam1^) = 3;;
        break;
        case 3:
        if (NOT (IS_PED_RAGDOLL( (uParam0^) )))
        {
            (uParam1^) = 1;
        }
        else if (NOT ((iParam3 == 3) AND (l_U617)))
        {
            CREATE_NM_MESSAGE( -1, 3 );
            SEND_NM_MESSAGE( (uParam0^) );
            if (NOT (IS_CAR_DEAD( l_U678 )))
            {
                GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, 0, 20.00000000, 0.50000000, ref l_U861, ref l_U862, ref l_U863 );
                CREATE_NM_MESSAGE( -1, 237 );
                SET_NM_MESSAGE_VEC3( 243, l_U861, l_U862, l_U863 );
                SEND_NM_MESSAGE( (uParam0^) );
            }
        }
        else if (l_U616)
        {
            sub_62526( uParam0, ref l_U638, ref l_U858 );
        }
        else if (l_U651)
        {
            CREATE_NM_MESSAGE( 0, 299 );
            SEND_NM_MESSAGE( (uParam0^) );
            SET_NM_ANIM_POSE( (uParam0^), "MISSRAY2", "GBGE_SHOOT", 0.00500000 );
            CREATE_NM_MESSAGE( -1, 3 );
            SEND_NM_MESSAGE( (uParam0^) );
            if (NOT (IS_CAR_DEAD( l_U678 )))
            {
                GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, 0, 20.00000000, 0.00000000, ref l_U861, ref l_U862, ref l_U863 );
                CREATE_NM_MESSAGE( -1, 237 );
                SET_NM_MESSAGE_VEC3( 243, l_U861, l_U862, l_U863 );
                SEND_NM_MESSAGE( (uParam0^) );
            }
            l_U617 = 0;
        };;;;
        break;
        case 4:
        if (IS_PED_RAGDOLL( (uParam0^) ))
        {
            if (iParam3 == 2)
            {
                BLEND_FROM_NM_WITH_ANIM( (uParam0^), "MISSRAY2", "GBGE_GETOFF_R", 0, l_U767 );
            }
            else
            {
                BLEND_FROM_NM_WITH_ANIM( (uParam0^), "MISSRAY2", "GBGE_GETOFF_L", 0, l_U770 );
            }
        }
        else
        {
            SWITCH_PED_TO_ANIMATED( (uParam0^), 0 );
        }
        DETACH_PED( (uParam0^), 1 );
        (uParam1^) = 0;
        break;
        case 5:
        DETACH_PED( (uParam0^), 1 );
        if (IS_PED_RAGDOLL( (uParam0^) ))
        {
            CREATE_NM_MESSAGE( 1, 8 );
            SEND_NM_MESSAGE( (uParam0^) );
        }
        (uParam1^) = 6;
        if (iParam3 == 2)
        {
            l_U854 = 0;
        }
        else
        {
            l_U855 = 0;
        }
        break;
        case 6:
        if (iParam3 == 2)
        {
            l_U854 += 1.00000000 * TIMESTEP();
            if (l_U854 >= 3.00000000)
            {
                SWITCH_PED_TO_ANIMATED( (uParam0^), 0 );
                (uParam1^) = 0;
            }
        }
        else
        {
            l_U855 += 1.00000000 * TIMESTEP();
            if (l_U855 >= 3.60000000)
            {
                SWITCH_PED_TO_ANIMATED( (uParam0^), 0 );
                (uParam1^) = 0;
            }
        }
        break;
    }
    return;
}

void sub_62526(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if ((NOT (IS_CHAR_DEAD( l_U675[0] ))) AND ((NOT (IS_CAR_DEAD( l_U679 ))) AND (NOT (IS_CAR_DEAD( l_U678 )))))
    {
        GET_CAR_COORDINATES( l_U679, ref l_U861, ref l_U862, ref l_U863 );
        GET_OFFSET_FROM_CAR_GIVEN_WORLD_COORDS( l_U678, l_U861, l_U862, l_U863, ref l_U864, ref l_U865, ref l_U866 );
        if (l_U864 < 0)
        {
            l_U870 = l_U864 * -1;
        }
        else
        {
            l_U870 = l_U864;
        }
        if ((HAS_CHAR_SPOTTED_CHAR( (uParam0^), l_U675[0] )) AND ((l_U870 < 20.00000000) AND ((l_U865 >= 65516) AND (l_U865 <= -5))))
        {
            l_U639 = 1;
        }
        else
        {
            GET_OFFSET_FROM_CAR_IN_WORLD_COORDS( l_U678, -1.24800000, -10.50000000, 2.00000000, ref l_U861, ref l_U862, ref l_U863 );
            l_U639 = 0;
        }
        if (NOT (uParam1^))
        {
            CREATE_NM_MESSAGE( 1, 299 );
            SET_NM_MESSAGE_VEC3( 301, l_U861, l_U862, l_U863 );
            SEND_NM_MESSAGE( (uParam0^) );
            CREATE_NM_MESSAGE( 1, 237 );
            SET_NM_MESSAGE_VEC3( 243, l_U861, l_U862, l_U863 );
            SEND_NM_MESSAGE( (uParam0^) );
            (uParam1^) = 1;
        }
        else
        {
            CREATE_NM_MESSAGE( -1, 299 );
            SET_NM_MESSAGE_VEC3( 301, l_U861, l_U862, l_U863 );
            SEND_NM_MESSAGE( (uParam0^) );
            CREATE_NM_MESSAGE( -1, 237 );
            SET_NM_MESSAGE_VEC3( 243, l_U861, l_U862, l_U863 );
            SEND_NM_MESSAGE( (uParam0^) );
            if ((l_U639) AND ((uParam2^) >= 0.40000000))
            {
                GENERATE_RANDOM_INT_IN_RANGE( 0, 4, ref l_U859 );
                if (l_U859 == 0)
                {
                    GET_PED_BONE_POSITION( (uParam0^), 1232, 200.00000000, 0.00000000, 0.00000000, ref l_U779 );
                    l_U779._fU8 += 20.00000000;
                    FIRE_PED_WEAPON( (uParam0^), l_U779 );
                    (uParam2^) = 0.00000000;
                }
            }
            else
            {
                (uParam2^) += 1.00000000 * TIMESTEP();
            }
        }
    }
    return;
}

void sub_63783()
{
    if ((NOT (IS_CHAR_DEAD( l_U675[0] ))) AND (IS_VEH_DRIVEABLE( l_U679 )))
    {
        GET_CAR_COORDINATES( l_U678, ref l_U861, ref l_U862, ref l_U863 );
        if (LOCATE_CHAR_IN_CAR_2D( l_U675[0], l_U861, l_U862, 14.00000000, 14.00000000, 0 ))
        {
            GET_CAR_SPEED( l_U679, ref l_U870 );
            l_U870 -= 0.37000000;
            if (l_U870 < 0.00000000)
            {
                l_U870 = 0.00000000;
            }
            SET_CAR_FORWARD_SPEED( l_U679, l_U870 );
        }
    }
    sub_63966();
    return;
}

void sub_63966()
{
    if ((l_U616) AND (NOT l_U649))
    {
        if (NOT (IS_CAR_DEAD( l_U679 )))
        {
            if (NOT (IS_VEH_DRIVEABLE( l_U679 )))
            {
                SET_PETROL_TANK_HEALTH( l_U679, 65436 );
                l_U649 = 1;
                if (NOT l_U651)
                {
                    sub_30431();
                }
            }
        }
        else
        {
            l_U649 = 1;
            if (NOT l_U651)
            {
                sub_30431();
            }
        }
    }
    return;
}

void sub_64137(unknown uParam0, unknown uParam1)
{
    int iVar4;
    int iVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    iVar4 = 0;
    iVar5 = 0;
    switch (uParam1)
    {
        case 1:
        uVar6 = {l_U755};
        break;
        case 2:
        uVar6 = {l_U758};
        break;
        case 3:
        uVar6 = {l_U761};
        break;
        case 4:
        uVar6 = {l_U764};
        break;
    }
    uVar6._fU4 += 4.80000000 * TIMESTEP();
    if (uVar6._fU4 >= -4.20000000)
    {
        uVar6._fU4 = -4.20000000;
        iVar4 = 1;
    }
    if (uVar6._fU4 >= -4.80000000)
    {
        uVar6._fU8 -= 3.60000000 * TIMESTEP();
        if (uVar6._fU8 <= -0.17000000)
        {
            uVar6._fU8 = -0.17000000;
            iVar5 = 1;
        }
    }
    ATTACH_OBJECT_TO_CAR( (uParam0^), l_U678, 0, uVar6, 0, 0, 0 );
    switch (uParam1)
    {
        case 1:
        l_U755 = {uVar6};
        break;
        case 2:
        l_U758 = {uVar6};
        break;
        case 3:
        l_U761 = {uVar6};
        break;
        case 4:
        l_U764 = {uVar6};
        break;
    }
    if ((iVar5) AND (iVar4))
    {
        switch (uParam1)
        {
            case 1:
            l_U595 = 0;
            l_U599 = 1;
            break;
            case 2:
            l_U596 = 0;
            l_U600 = 1;
            break;
            case 3:
            l_U597 = 0;
            l_U601 = 1;
            break;
            case 4:
            l_U598 = 0;
            l_U602 = 1;
            break;
        }
        if (DOES_OBJECT_EXIST( (uParam0^) ))
        {
            PLAY_SOUND_FROM_OBJECT( -1, "RB2_TAKING_IN_THE_TRASH_THROW_BAG_INTO_BACK", (uParam0^) );
        }
    }
    return;
}

