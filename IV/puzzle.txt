void main()
{
    int iVar2;

    l_U0 = 0;
    l_U1 = 1;
    l_U2 = 3;
    l_U4 = 0;
    l_U6 = 0;
    l_U8 = 0;
    l_U120 = 2;
    l_U145 = 3;
    l_U146 = 0;
    l_U147 = 0;
    l_U148 = 1;
    l_U149 = 1;
    l_U150 = 0;
    l_U151 = 0;
    l_U152 = 1;
    l_U153 = 0;
    l_U154 = 1;
    l_U155 = 0;
    l_U156 = 0;
    l_U157 = 0;
    l_U158 = 0;
    l_U159 = 0;
    l_U160 = 0;
    l_U161 = 0;
    l_U162 = 0;
    l_U163 = 0;
    l_U164 = 0;
    l_U165 = 0;
    l_U166 = 0;
    l_U167 = 0;
    l_U168 = 0;
    l_U169 = 0;
    l_U170 = 1;
    l_U171 = 0;
    l_U172 = 1;
    l_U173 = 0;
    l_U174 = 0;
    l_U175 = 0;
    l_U176 = 0;
    l_U177 = 0;
    l_U178 = 0;
    l_U179 = 0;
    l_U180 = 0;
    l_U659 = nil;
    l_U664 = {2.00000000, 4.00000000, 3850.00000000};
    l_U667 = {-174.24000000, -146.88000000, -294.48000000};
    l_U757 = 15;
    l_U758 = 250;
    l_U769 = 75;
    l_U770 = 0;
    l_U775 = 0;
    l_U782 = 1;
    StrCopy( ref l_U861, "PZ_QUITMSG", 16 );
    l_U865 = 4;
    l_U887 = {0.00000000, 0.00000000, 0.00000000};
    l_U890 = -1;
    l_U893 = "blockXPos";
    l_U894 = "blockYPos";
    l_U895 = "blocksCleared";
    l_U897 = "QUB3D_CLEAR_BLOCK";
    l_U898 = "QUB3D_ROTATE_BLOCK";
    l_U899 = "QUB3D_MOVE_BLOCK";
    l_U900 = "QUB3D_GLOM_BLOCK";
    l_U901 = "QUB3D_LAND_BLOCK";
    l_U902 = "QUB3D_GOT_POWERUP";
    l_U903 = "QUB3D_USE_POWERUP";
    l_U904 = "QUB3D_GAME_OVER";
    l_U910 = 1;
    l_U964 = 0;
    l_U967 = 0;
    l_U968 = 0;
    l_U1077 = "";
    l_U1081 = {0.00400000, 0.00600000, 0.00000000};
    l_U1084 = -1;
    l_U1085 = {0.49500000, 0.50000000, 0.00000000};
    l_U1088 = {0.49200000, 0.37300000, 0.00000000};
    l_U1091 = 0.50000000;
    l_U1092 = 0.36700000;
    l_U1093 = 0.33600000;
    l_U1094 = 0.48000000;
    l_U1095 = 0.64000000;
    l_U1096 = 0.37400000;
    l_U1097 = 0.43000000;
    l_U1098 = 0.48000000;
    l_U1099 = 0.64000000;
    l_U1100 = 0.61500000;
    l_U1101 = 0.36000000;
    l_U1102 = 0.14300000;
    l_U1103 = 0.05800000;
    l_U1104 = 0.76800000;
    l_U1105 = 0.85000000;
    l_U1106 = 0.74000000;
    l_U1107 = 0.74000000;
    l_U1108 = 0.92000000;
    l_U1109 = 0.87400000;
    l_U1110 = 0.36800000;
    l_U1111 = 0.45000000;
    l_U1112 = {0.37200000, 0.35500000, 0.00000000};
    l_U1115 = {0.24400000, 0.07800000, 0.00000000};
    l_U1118 = 0.48000000;
    l_U1119 = 0.64000000;
    l_U1120 = 0.68400000;
    l_U1121 = 0.43000000;
    l_U1122 = 0.36800000;
    l_U1123 = 0.45000000;
    l_U1124 = 0.49000000;
    l_U1125 = 0.55000000;
    l_U1126 = 0.30000000;
    l_U1127 = 0.71500000;
    l_U1128 = 0.36900000;
    l_U1129 = 0.86299990;
    l_U1130 = 0.50900000;
    l_U1131 = 0.74000000;
    l_U1132 = 0.39400000;
    l_U1133 = 0.86299990;
    l_U1134 = 0.50900000;
    l_U1135 = 0.74000000;
    l_U1136 = 0.51600000;
    l_U1137 = 0.87400000;
    l_U1138 = 0.36800000;
    l_U1139 = 0.45000000;
    l_U1140 = 0.67000000;
    l_U1141 = 0.86299990;
    l_U1142 = 0.74000000;
    l_U1143 = 0.74000000;
    l_U1144 = 0.74200000;
    l_U1145 = 0.87400000;
    l_U1146 = 0.36800000;
    l_U1147 = 0.45000000;
    l_U1148 = 0.83500000;
    l_U1149 = 0.86299990;
    l_U1150 = 0.74000000;
    l_U1151 = 0.74000000;
    l_U1152 = 0.89000000;
    l_U1153 = 0.87400000;
    l_U1154 = 0.36800000;
    l_U1155 = 0.45000000;
    l_U1156 = {0.06000000, 0.06000000, 0.00000000};
    l_U1159 = 0.01800000;
    l_U1160 = 0.83700000;
    l_U1161 = 0.86299990;
    l_U1162 = 0.74000000;
    l_U1163 = 0.74000000;
    l_U1164 = 0.89100000;
    l_U1165 = 0.87400000;
    l_U1166 = 0.36800000;
    l_U1167 = 0.45000000;
    l_U1168 = 0.50000000;
    l_U1169 = 0.14500000;
    l_U1170 = 0.05800000;
    l_U1171 = 0.08400000;
    l_U1172 = 0.53200000;
    l_U1173 = 0.07220000;
    l_U1174 = 0.27000000;
    l_U1175 = 0.36000000;
    l_U1176 = 0.00000000;
    l_U1177 = 1.00000000;
    l_U1178 = 0.51200000;
    l_U1179 = 0.12000000;
    l_U1180 = 0.03500000;
    l_U1181 = 0.05000000;
    l_U1182 = 0.54700000;
    l_U1183 = 0.12000000;
    l_U1184 = 0.03500000;
    l_U1185 = 0.05000000;
    l_U1186 = 0.58200000;
    l_U1187 = 0.12000000;
    l_U1188 = 0.03500000;
    l_U1189 = 0.05000000;
    l_U1190 = 0.61700000;
    l_U1191 = 0.12000000;
    l_U1192 = 0.03500000;
    l_U1193 = 0.05000000;
    l_U1194 = 0.36900000;
    l_U1195 = 0.10000000;
    l_U1196 = 0.27000000;
    l_U1197 = 0.36000000;
    l_U1198 = 0.00000000;
    l_U1199 = 1.00000000;
    l_U1200 = 0.18500000;
    l_U1201 = 0.07000000;
    l_U1202 = 0.27000000;
    l_U1203 = 0.36000000;
    l_U1204 = 0.00000000;
    l_U1205 = 0.43200000;
    l_U1206 = 0.39100000;
    l_U1207 = 0.14800000;
    l_U1208 = 0.10500000;
    l_U1209 = 0.05000000;
    l_U1210 = 0.35500000;
    l_U1211 = 0.11900000;
    l_U1212 = 0.02500000;
    l_U1213 = 0.02200000;
    l_U1214 = 0.36600000;
    l_U1215 = 0.11900000;
    l_U1216 = 0.04800000;
    l_U1217 = 0.02200000;
    l_U1218 = 0.37700000;
    l_U1219 = 0.11900000;
    l_U1220 = 0.06900000;
    l_U1221 = 0.02200000;
    l_U1222 = 0.37700000;
    l_U1223 = 0.11900000;
    l_U1224 = 0.09300000;
    l_U1225 = 0.02200000;
    l_U1226 = 0.37500000;
    l_U1227 = 0.07000000;
    l_U1228 = 0.27000000;
    l_U1229 = 0.36000000;
    l_U1230 = 0.00000000;
    l_U1231 = 0.86000000;
    l_U1232 = 0.37500000;
    l_U1233 = 0.10000000;
    l_U1234 = 0.46000000;
    l_U1235 = 0.60000000;
    l_U1236 = 0.00000000;
    l_U1237 = 0.86000000;
    l_U1238 = 0.36700000;
    l_U1239 = 0.07000000;
    l_U1240 = 0.27000000;
    l_U1241 = 0.36000000;
    l_U1242 = 0.00000000;
    l_U1243 = 0.69000000;
    l_U1244 = 0.36700000;
    l_U1245 = 0.10000000;
    l_U1246 = 0.46000000;
    l_U1247 = 0.60000000;
    l_U1248 = 0.00000000;
    l_U1249 = 0.69000000;
    l_U1250 = 0.36700000;
    l_U1251 = 0.07000000;
    l_U1252 = 0.27000000;
    l_U1253 = 0.36000000;
    l_U1254 = 0.00000000;
    l_U1255 = 0.80000000;
    l_U1256 = 0.36700000;
    l_U1257 = 0.10000000;
    l_U1258 = 0.46000000;
    l_U1259 = 0.60000000;
    l_U1260 = 0.00000000;
    l_U1261 = 0.80000000;
    l_U1262 = 0.37980000;
    l_U1263 = 0.07000000;
    l_U1264 = 0.27000000;
    l_U1265 = 0.36000000;
    l_U1266 = 0.00000000;
    l_U1267 = 1.00000000;
    l_U1268 = 0.37980000;
    l_U1269 = 0.12000000;
    l_U1270 = 0.03500000;
    l_U1271 = 0.05000000;
    l_U1272 = 0.41800000;
    l_U1273 = 0.12000000;
    l_U1274 = 0.03500000;
    l_U1275 = 0.05000000;
    l_U1276 = 180;
    l_U1277 = 0.24000000;
    l_U1278 = 0.07000000;
    l_U1279 = 0.27000000;
    l_U1280 = 0.36000000;
    l_U1281 = 0.00000000;
    l_U1282 = 1.00000000;
    l_U1283 = 0.09400000;
    l_U1284 = 0.07000000;
    l_U1285 = 0.27000000;
    l_U1286 = 0.36000000;
    l_U1287 = 0.00000000;
    l_U1288 = 0.18700000;
    l_U1289 = 0.22500000;
    l_U1290 = 0.12000000;
    l_U1291 = 0.03500000;
    l_U1292 = 0.05000000;
    l_U1293 = 0.26000000;
    l_U1294 = 0.12000000;
    l_U1295 = 0.03500000;
    l_U1296 = 0.05000000;
    l_U1297 = 0.29500000;
    l_U1298 = 0.12000000;
    l_U1299 = 0.03500000;
    l_U1300 = 0.05000000;
    l_U1301 = 0.32950000;
    l_U1302 = 0.12000000;
    l_U1303 = 0.03500000;
    l_U1304 = 0.05000000;
    l_U1319 = 0.01000000;
    l_U1320 = 0.01500000;
    l_U1321 = 0.29500000;
    l_U1322 = 0.15400000;
    l_U1323 = 0.03600000;
    l_U1324 = 0.01000000;
    l_U1325 = 0.00000000;
    l_U1326 = 0.11100000;
    l_U1327 = 0.07000000;
    l_U1328 = 0.27000000;
    l_U1329 = 0.36000000;
    l_U1330 = 0.00000000;
    l_U1331 = 1.00000000;
    l_U1332 = 0.13500000;
    l_U1333 = 0.12000000;
    l_U1334 = 0.10500000;
    l_U1335 = 0.05000000;
    l_U1336 = 0.09800000;
    l_U1337 = 0.11900000;
    l_U1338 = 0.02500000;
    l_U1339 = 0.02200000;
    l_U1340 = 0.11000000;
    l_U1341 = 0.11900000;
    l_U1342 = 0.04800000;
    l_U1343 = 0.02200000;
    l_U1344 = 0.12100000;
    l_U1345 = 0.11900000;
    l_U1346 = 0.06900000;
    l_U1347 = 0.02200000;
    l_U1348 = 0.13300000;
    l_U1349 = 0.11900000;
    l_U1350 = 0.09300000;
    l_U1351 = 0.02200000;
    l_U1352 = 160;
    l_U1353 = 255;
    l_U1354 = {2.63000000, 0.12300000, 3856.82800000};
    l_U1357 = {-65.48001000, -0.00000000, 0.42200000};
    l_U1360 = 70.00000000;
    l_U1361 = {2.51000000, -3.50000000, 3857.70000000};
    l_U1364 = {-48.50700000, 0.00000000, 0.00000000};
    l_U1367 = 55.00000000;
    l_U1368 = 0;
    sub_3322();
    if (HAS_DEATHARREST_EXECUTED())
    {
        sub_4090();
    }
    WAIT( 0 );
    SET_MINIGAME_IN_PROGRESS( 1 );
    DISPLAY_NON_MINIGAME_HELP_MESSAGES( 1 );
    GET_GAME_TIMER( ref iVar2 );
    while (l_U148)
    {
        WAIT( 0 );
        switch (l_U4)
        {
            case 0:
            sub_5836();
            sub_10451();
            break;
            case 1:
            l_U145 = 0;
            sub_11223( 0, 0 );
            sub_10451();
            if (NOT l_U166)
            {
                if (NOT l_U164)
                {
                    if (l_U155)
                    {
                        if (l_U165)
                        {
                            STOP_STREAM();
                            l_U165 = 0;
                        }
                        DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
                        while (NOT (PRELOAD_STREAM( "QUB3D_MUSIC" )))
                        {
                            WAIT( 0 );
                            DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
                        }
                        PLAY_STREAM_FRONTEND();
                        l_U164 = 1;
                    }
                }
            }
            sub_11223( 1, 1 );
            break;
            case 2:
            sub_19729();
            break;
            case 6: break;
            case 3:
            sub_52047();
            break;
            case 4:
            sub_57391();
            break;
            case 5:
            sub_57419();
            break;
            default: break;
        }
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - iVar2;
        INCREMENT_INT_STAT_NO_MESSAGE( 65, l_U766 );
        GET_GAME_TIMER( ref iVar2 );
        sub_57499();
    }
    sub_4090();
    return;
}

void sub_3322()
{
    sub_3331();
    sub_3434( ref g_U9893._fU68 );
    sub_3483();
    return;
}

void sub_3331()
{
    g_U9893._fU4 = 0;
    g_U9893._fU8 = 0;
    g_U9893._fU12 = 0;
    g_U9893._fU16 = 0;
    g_U9893._fU20 = 0;
    g_U9893._fU28 = 0;
    g_U9893._fU32 = 0;
    g_U9893._fU36 = 0;
    g_U9893._fU48 = 0;
    return;
}

void sub_3434(int iParam0)
{
    ref iParam0->_fU0->_fU4 = -1;
    ref iParam0->_fU0->_fU0 = -1;
    ref iParam0->_fU8->_fU0 = -1;
    ref iParam0->_fU8->_fU4 = -1;
    return;
}

void sub_3483()
{
    int I;

    for ( I = 0; I <= (g_U569 - 1); I++ )
    {
        if ((sub_3521( 1, g_U569[I] )) == 0)
        {
            sub_3772( I );
            SET_PHONE_HUD_ITEM( 0, "", -1 );
        }
    }
    if (NOT sub_3950())
    {
        SET_MESSAGES_WAITING( 0 );
        g_U91._fU404 = 1000;
    }
    g_U91._fU404 = 1000;
    return;
}

int sub_3521(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6)
{
    switch (uParam0)
    {
        case 0:
        return GET_BITS_IN_RANGE( uParam1._fU0[1], 14, 23 );
        break;
        case 1:
        return GET_BITS_IN_RANGE( uParam1._fU0[0], 0, 13 );
        break;
        case 2:
        return GET_BITS_IN_RANGE( uParam1._fU0[0], 14, 27 );
        break;
        case 3:
        return GET_BITS_IN_RANGE( uParam1._fU0[1], 0, 13 );
        break;
        case 4:
        return GET_BITS_IN_RANGE( uParam1._fU0[1], 24, 27 );
        break;
        case 5:
        return GET_BITS_IN_RANGE( uParam1._fU0[0], 28, 31 );
        break;
        case 6:
        return uParam1._fU0[2];
        break;
    }
    return -1;
}

void sub_3772(int iParam0)
{
    int I;

    if (iParam0 < (g_U569 - 1))
    {
        for ( I = iParam0 + 1; I <= (g_U569 - 1); I++ )
        {
            g_U569[I - 1] = {g_U569[I]};
        }
    }
    sub_3857( g_U569 - 1 );
    return;
}

void sub_3857(unknown uParam0)
{
    g_U569[uParam0]._fU0[0] = -1;
    g_U569[uParam0]._fU0[1] = -1;
    g_U569[uParam0]._fU0[2] = -1;
    return;
}

int sub_3950()
{
    int I;

    for ( I = 0; I <= (g_U569 - 1); I++ )
    {
        if ((sub_3521( 4, g_U569[I] )) == 0)
        {
            return 1;
        }
    }
    return 0;
}

void sub_4090()
{
    int iVar2;
    int iVar3;
    int iVar4;

    while (IS_SCREEN_FADING())
    {
        WAIT( 0 );
    }
    DO_SCREEN_FADE_OUT( 2000 );
    while (IS_SCREEN_FADING())
    {
        WAIT( 0 );
    }
    if ((l_U165) || (l_U164))
    {
        STOP_STREAM();
        l_U164 = 0;
        l_U165 = 0;
    }
    ACTIVATE_SCRIPTED_CAMS( 0, 0 );
    DESTROY_CAM( l_U670 );
    DESTROY_CAM( l_U671 );
    END_CAM_COMMANDS( ref l_U747 );
    SWITCH_STREAMING( 1 );
    OVERRIDE_FREEZE_FLAGS( 0 );
    if (NOT (IS_CHAR_INJURED( sub_4254() )))
    {
        SET_CAM_BEHIND_PED( sub_4254() );
        CLEAR_CHAR_TASKS( sub_4254() );
    }
    SET_PLAYER_CONTROL( sub_4332(), 1 );
    sub_4371();
    DISPLAY_RADAR( 1 );
    DISPLAY_HUD( 1 );
    CLEAR_TIMECYCLE_MODIFIER();
    for ( l_U750 = 0; l_U750 < 9; l_U750++ )
    {
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
        }
    }
    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U656 );
    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U657 );
    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU24 );
    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU28 );
    MARK_MODEL_AS_NO_LONGER_NEEDED( 1329485441 );
    MARK_MODEL_AS_NO_LONGER_NEEDED( -1644345434 );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U783[0] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U783[1] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U783[2] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U783[3] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U783[4] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U783[5] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U790[0] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U790[1] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U790[2] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U790[3] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U790[4] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U790[5] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[0] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[1] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[2] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[3] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[4] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[5] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[6] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[7] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[8] );
    MARK_MODEL_AS_NO_LONGER_NEEDED( l_U943[9] );
    if (IS_PLAYER_PLAYING( sub_4332() ))
    {
        FREEZE_CHAR_POSITION( sub_4254(), 0 );
        SET_CAM_BEHIND_PED( sub_4254() );
        LOAD_SCENE( l_U776._fU0, l_U776._fU4, l_U776._fU8 );
        GET_INTERIOR_FROM_CHAR( sub_4254(), ref iVar2 );
        GET_GAME_VIEWPORT_ID( ref l_U658 );
        if (NOT (iVar2 == nil))
        {
            GET_INTERIOR_AT_COORDS( 601.51460000, 1408.35700000, 17.61080000, ref iVar3 );
            if (iVar2 == iVar3)
            {
                REQUEST_INTERIOR_MODELS( -110939775, "bronxsaveroom01" );
                SET_ROOM_FOR_VIEWPORT_BY_NAME( l_U658, "bronxsaveroom01" );
            }
            else
            {
                GET_INTERIOR_AT_COORDS( 1197.82200000, 1706.58400000, 16.70910000, ref iVar3 );
                if (iVar2 == iVar3)
                {
                    REQUEST_INTERIOR_MODELS( 349397652, "clamfronrm" );
                    SET_ROOM_FOR_VIEWPORT_BY_NAME( l_U658, "clamfronrm" );
                }
            }
        }
        if (NOT (l_U659 == nil))
        {
            ;
        }
    }
    FORCE_WEATHER_NOW( l_U782 );
    RELEASE_WEATHER();
    RELEASE_TEXTURE( l_U972 );
    RELEASE_TEXTURE( l_U971 );
    REMOVE_TXD( l_U969 );
    RELEASE_TEXTURE( l_U973 );
    RELEASE_TEXTURE( l_U974 );
    RELEASE_TEXTURE( l_U975 );
    RELEASE_TEXTURE( l_U976 );
    RELEASE_TEXTURE( l_U977 );
    RELEASE_TEXTURE( l_U978 );
    RELEASE_TEXTURE( l_U979 );
    RELEASE_TEXTURE( l_U980 );
    RELEASE_TEXTURE( l_U981 );
    RELEASE_TEXTURE( l_U982 );
    RELEASE_TEXTURE( l_U983 );
    RELEASE_TEXTURE( l_U984 );
    RELEASE_TEXTURE( l_U985 );
    RELEASE_TEXTURE( l_U986 );
    RELEASE_TEXTURE( l_U987 );
    REMOVE_TXD( l_U970 );
    MUTE_GAMEWORLD_AUDIO( 0 );
    ENABLE_FRONTEND_RADIO();
    MISSION_AUDIO_BANK_NO_LONGER_NEEDED();
    UNREGISTER_SCRIPT_WITH_AUDIO();
    sub_5508();
    if (IS_THIS_HELP_MESSAGE_BEING_DISPLAYED( ref l_U861 ))
    {
        CLEAR_HELP();
    }
    SET_WIDESCREEN_FORMAT( 0 );
    DISPLAY_FRONTEND_MAP_BLIPS( 1 );
    iVar4 = GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT( "puzzle_launcher" );
    if (iVar4 == 0)
    {
        while (IS_SCREEN_FADING())
        {
            WAIT( 0 );
        }
        DO_SCREEN_FADE_IN( 4000 );
        while (IS_SCREEN_FADING())
        {
            WAIT( 0 );
        }
    }
    DISPLAY_NON_MINIGAME_HELP_MESSAGES( 0 );
    SET_MINIGAME_IN_PROGRESS( 0 );
    TERMINATE_THIS_SCRIPT();
    return;
}

void sub_4254()
{
    unknown Result;

    GET_PLAYER_CHAR( CONVERT_INT_TO_PLAYERINDEX( GET_PLAYER_ID() ), ref Result );
    return Result;
}

void sub_4332()
{
    return CONVERT_INT_TO_PLAYERINDEX( GET_PLAYER_ID() );
}

void sub_4371()
{
    g_U91._fU100 = 0;
    g_U91._fU104 = 0;
    return;
}

void sub_5508()
{
    if (IS_THREAD_ACTIVE( g_U9240 ))
    {
        DESTROY_THREAD( g_U9240 );
    }
    return;
}

void sub_5836()
{
    REGISTER_SCRIPT_WITH_AUDIO( 1 );
    while (NOT (REQUEST_MISSION_AUDIO_BANK( "SCRIPT_MISSION/QUB3D" )))
    {
        PRINTSTRING( "ATEMPTING TO LOAD AUDIO BANK QUB3D" );
        PRINTNL();
        WAIT( 0 );
    }
    MUTE_GAMEWORLD_AUDIO( 1 );
    DISABLE_FRONTEND_RADIO();
    PRINTSTRING( "LOADED AUDIO BANK QUB3D" );
    PRINTNL();
    LOAD_ADDITIONAL_TEXT( "PUZZLE", 3 );
    l_U146 = GET_CURRENT_LANGUAGE();
    l_U147 = l_U146;
    l_U752 = 8;
    l_U753 = 0;
    l_U754 = 5;
    l_U755 = 0;
    l_U750 = 0;
    l_U751 = 0;
    l_U660 = {2.50000000, 4.00000000, 3850.00000000};
    l_U663 = 0.00000000;
    l_U905 = ProtectedGet(g_U8686[0]);
    l_U906 = 0;
    l_U908 = 0;
    l_U909 = 0;
    l_U910 = 1;
    l_U911 = 25;
    l_U912[0] = 250;
    l_U912[1] = 500;
    l_U912[2] = 750;
    l_U912[3] = 1000;
    l_U912[4] = 1250;
    l_U912[5] = 1500;
    l_U912[6] = 2000;
    l_U912[7] = 2500;
    l_U912[8] = 3000;
    l_U912[9] = 3500;
    l_U912[10] = 4000;
    l_U912[11] = 5000;
    l_U912[12] = 6000;
    l_U912[13] = 7000;
    l_U912[14] = 8000;
    l_U912[15] = 9000;
    l_U912[16] = 10000;
    l_U912[17] = 11000;
    l_U912[18] = 12000;
    l_U912[19] = 13000;
    l_U912[20] = 15000;
    l_U912[21] = 17000;
    l_U912[22] = 20000;
    l_U912[23] = 23000;
    l_U912[24] = 27000;
    l_U912[25] = 31000;
    l_U912[26] = 36000;
    l_U912[27] = 41000;
    l_U912[28] = 45000;
    l_U912[29] = 50000;
    l_U1305[0] = 0.28900000;
    l_U1312[0] = 0.17400000;
    l_U1305[1] = 0.30000000;
    l_U1312[1] = 0.17400000;
    l_U1305[2] = 0.28900000;
    l_U1312[2] = 0.19000000;
    l_U1305[3] = 0.30000000;
    l_U1312[3] = 0.19000000;
    l_U1305[4] = 0.28900000;
    l_U1312[4] = 0.20500000;
    l_U1305[5] = 0.30000000;
    l_U1312[5] = 0.20500000;
    l_U783[0] = 655935014;
    l_U783[1] = -584535481;
    l_U783[2] = -1155568015;
    l_U783[3] = -857075254;
    l_U783[4] = -1494923779;
    l_U783[5] = 1548759252;
    l_U790[0] = -1910575924;
    l_U790[1] = -1733819942;
    l_U790[2] = 1456209443;
    l_U790[3] = 1159617224;
    l_U790[4] = 1636701095;
    l_U790[5] = 1933489928;
    l_U943[0] = -640096545;
    l_U943[1] = -871183533;
    l_U943[2] = -1018414650;
    l_U943[3] = -1483931064;
    l_U943[4] = 245387373;
    l_U943[5] = 1087648984;
    l_U943[6] = -64902288;
    l_U943[7] = -295170051;
    l_U943[8] = 1275153202;
    l_U943[9] = 2117349271;
    StrCopy( ref l_U797, "PZ_ST", 16 );
    StrCopy( ref l_U801, "PZ_QUIT", 16 );
    StrCopy( ref l_U805, "PZ_TUTO", 16 );
    StrCopy( ref l_U809, "PZ_HISCORE", 16 );
    StrCopy( ref l_U813, "PZ_LOSE", 16 );
    StrCopy( ref l_U817, "PZ_IGLEVEL", 16 );
    StrCopy( ref l_U821, "PZ_IGSCORE", 16 );
    StrCopy( ref l_U825, "PZ_IGHISCORE", 16 );
    StrCopy( ref l_U829, "PZ_IGNEXT", 16 );
    StrCopy( ref l_U833, "PZ_IGSPECIAL", 16 );
    StrCopy( ref l_U837, "PZ_IGPOWER", 16 );
    StrCopy( ref l_U841, "PZ_IGMULTI", 16 );
    StrCopy( ref l_U845, "BT_A", 16 );
    StrCopy( ref l_U849, "BT_B", 16 );
    StrCopy( ref l_U853, "BT_UPARROW", 16 );
    StrCopy( ref l_U857, "BT_DOWNARROW", 16 );
    l_U866[0] = "qub_sm_explode_red";
    l_U866[1] = "qub_sm_explode_blue";
    l_U866[2] = "qub_sm_explode_green";
    l_U866[3] = "qub_sm_explode_yellow";
    l_U866[4] = "qub_sm_explode_purple";
    l_U866[5] = "qub_sm_explode_orange";
    l_U866[7] = "qub_lg_explode_red";
    l_U866[8] = "qub_lg_explode_blue";
    l_U866[9] = "qub_lg_explode_green";
    l_U866[10] = "qub_lg_explode_yellow";
    l_U866[11] = "qub_lg_explode_purple";
    l_U866[12] = "qub_lg_explode_orange";
    l_U880[0] = "qub_merge_red";
    l_U880[1] = "qub_merge_blue";
    l_U880[2] = "qub_merge_green";
    l_U880[3] = "qub_merge_yellow";
    l_U880[4] = "qub_merge_purple";
    l_U880[5] = "qub_merge_orange";
    l_U142 = 0;
    l_U166 = 0;
    l_U969 = LOAD_TXD( "Qub3d" );
    l_U971 = GET_TEXTURE( l_U969, "QUB3D_LOGO_150906" );
    l_U972 = GET_TEXTURE( l_U969, "QUB3D_STRAPLINE_150906" );
    l_U970 = GET_TXD( "buttons" );
    l_U973 = GET_TEXTURE( l_U970, "dpad_left" );
    l_U974 = GET_TEXTURE( l_U970, "dpad_right" );
    l_U975 = GET_TEXTURE( l_U970, "dpad_down" );
    l_U976 = GET_TEXTURE( l_U970, "dpad_none" );
    l_U977 = GET_TEXTURE( l_U969, "q_spec_botrow" );
    l_U978 = GET_TEXTURE( l_U969, "q_spec_midcolumn" );
    l_U979 = GET_TEXTURE( l_U969, "q_spec_random" );
    l_U980 = GET_TEXTURE( l_U969, "q_spec_timer" );
    l_U981 = GET_TEXTURE( l_U969, "q_spec_randcols_square" );
    l_U982 = GET_TEXTURE( l_U969, "q_spec_randcols_4" );
    l_U983 = GET_TEXTURE( l_U969, "q_spec_randcols_5" );
    l_U984 = GET_TEXTURE( l_U969, "q_spec_randcols_6" );
    l_U985 = GET_TEXTURE( l_U969, "q_spec_randomarrow" );
    l_U986 = GET_TEXTURE( l_U969, "q_powerbar" );
    l_U987 = GET_TEXTURE( l_U969, "q_next" );
    l_U1050[0] = "A";
    l_U1050[1] = "B";
    l_U1050[2] = "C";
    l_U1050[3] = "D";
    l_U1050[4] = "E";
    l_U1050[5] = "F";
    l_U1050[6] = "G";
    l_U1050[7] = "H";
    l_U1050[8] = "I";
    l_U1050[9] = "J";
    l_U1050[10] = "K";
    l_U1050[11] = "L";
    l_U1050[12] = "M";
    l_U1050[13] = "N";
    l_U1050[14] = "O";
    l_U1050[15] = "P";
    l_U1050[16] = "Q";
    l_U1050[17] = "R";
    l_U1050[18] = "S";
    l_U1050[19] = "T";
    l_U1050[20] = "U";
    l_U1050[21] = "V";
    l_U1050[22] = "W";
    l_U1050[23] = "X";
    l_U1050[24] = "Y";
    l_U1050[25] = "Z";
    SET_TIMECYCLE_MODIFIER( "police" );
    REQUEST_MODEL( 1329485441 );
    REQUEST_MODEL( -1644345434 );
    LOAD_ALL_OBJECTS_NOW();
    while ((NOT (HAS_MODEL_LOADED( -1644345434 ))) || (NOT (HAS_MODEL_LOADED( 1329485441 ))))
    {
        WAIT( 0 );
    }
    REQUEST_MODEL( l_U783[0] );
    REQUEST_MODEL( l_U783[1] );
    REQUEST_MODEL( l_U783[2] );
    REQUEST_MODEL( l_U783[3] );
    REQUEST_MODEL( l_U783[4] );
    REQUEST_MODEL( l_U783[5] );
    LOAD_ALL_OBJECTS_NOW();
    while ((NOT (HAS_MODEL_LOADED( l_U783[5] ))) || ((NOT (HAS_MODEL_LOADED( l_U783[4] ))) || ((NOT (HAS_MODEL_LOADED( l_U783[3] ))) || ((NOT (HAS_MODEL_LOADED( l_U783[2] ))) || ((NOT (HAS_MODEL_LOADED( l_U783[1] ))) || (NOT (HAS_MODEL_LOADED( l_U783[0] ))))))))
    {
        WAIT( 0 );
    }
    REQUEST_MODEL( l_U790[0] );
    REQUEST_MODEL( l_U790[1] );
    REQUEST_MODEL( l_U790[2] );
    REQUEST_MODEL( l_U790[3] );
    REQUEST_MODEL( l_U790[4] );
    REQUEST_MODEL( l_U790[5] );
    LOAD_ALL_OBJECTS_NOW();
    while ((NOT (HAS_MODEL_LOADED( l_U790[5] ))) || ((NOT (HAS_MODEL_LOADED( l_U790[4] ))) || ((NOT (HAS_MODEL_LOADED( l_U790[3] ))) || ((NOT (HAS_MODEL_LOADED( l_U790[2] ))) || ((NOT (HAS_MODEL_LOADED( l_U790[1] ))) || (NOT (HAS_MODEL_LOADED( l_U790[0] ))))))))
    {
        WAIT( 0 );
    }
    REQUEST_MODEL( l_U943[0] );
    REQUEST_MODEL( l_U943[1] );
    REQUEST_MODEL( l_U943[2] );
    REQUEST_MODEL( l_U943[3] );
    REQUEST_MODEL( l_U943[4] );
    REQUEST_MODEL( l_U943[5] );
    REQUEST_MODEL( l_U943[6] );
    REQUEST_MODEL( l_U943[7] );
    REQUEST_MODEL( l_U943[8] );
    REQUEST_MODEL( l_U943[9] );
    LOAD_ALL_OBJECTS_NOW();
    while ((NOT (HAS_MODEL_LOADED( l_U943[9] ))) || ((NOT (HAS_MODEL_LOADED( l_U943[8] ))) || ((NOT (HAS_MODEL_LOADED( l_U943[7] ))) || ((NOT (HAS_MODEL_LOADED( l_U943[6] ))) || ((NOT (HAS_MODEL_LOADED( l_U943[5] ))) || ((NOT (HAS_MODEL_LOADED( l_U943[4] ))) || ((NOT (HAS_MODEL_LOADED( l_U943[3] ))) || ((NOT (HAS_MODEL_LOADED( l_U943[2] ))) || ((NOT (HAS_MODEL_LOADED( l_U943[1] ))) || (NOT (HAS_MODEL_LOADED( l_U943[0] ))))))))))))
    {
        WAIT( 0 );
    }
    sub_9568( "puzzle" );
    CREATE_OBJECT_NO_OFFSET( -1644345434, l_U664._fU0, l_U664._fU4, l_U664._fU8, ref l_U656, 1 );
    FREEZE_OBJECT_POSITION( l_U656, 1 );
    SET_OBJECT_COLLISION( l_U656, 0 );
    SET_OBJECT_HEADING( l_U656, 0.00000000 );
    CREATE_OBJECT_NO_OFFSET( 1329485441, l_U660._fU0, l_U660._fU4, l_U660._fU8, ref l_U657, 1 );
    FREEZE_OBJECT_POSITION( l_U657, 1 );
    SET_OBJECT_COLLISION( l_U657, 0 );
    SET_OBJECT_HEADING( l_U657, l_U663 );
    GET_CHAR_COORDINATES( sub_4254(), ref l_U776._fU0, ref l_U776._fU4, ref l_U776._fU8 );
    GET_CHAR_HEADING( sub_4254(), ref l_U779 );
    GET_INTERIOR_FROM_CHAR( sub_4254(), ref l_U659 );
    GET_TIME_OF_DAY( ref l_U780, ref l_U781 );
    GET_CURRENT_WEATHER( ref l_U782 );
    FORCE_WEATHER_NOW( 1 );
    FREEZE_CHAR_POSITION( sub_4254(), 1 );
    SET_PLAYER_CONTROL( sub_4332(), 0 );
    sub_10022();
    DISPLAY_RADAR( 0 );
    DISPLAY_HUD( 0 );
    DISPLAY_FRONTEND_MAP_BLIPS( 0 );
    BEGIN_CAM_COMMANDS( ref l_U747 );
    CREATE_CAM( 14, ref l_U670 );
    CREATE_CAM( 14, ref l_U671 );
    SET_CAM_POS( l_U670, l_U1354._fU0, l_U1354._fU4, l_U1354._fU8 );
    SET_CAM_ROT( l_U670, l_U1357._fU0, l_U1357._fU4, l_U1357._fU8 );
    SET_CAM_FOV( l_U670, l_U1360 );
    SET_CAM_POS( l_U671, l_U1361._fU0, l_U1361._fU4, l_U1361._fU8 );
    SET_CAM_ROT( l_U671, l_U1364._fU0, l_U1364._fU4, l_U1364._fU8 );
    SET_CAM_FOV( l_U671, l_U1367 );
    SET_CAM_ACTIVE( l_U670, 1 );
    SET_CAM_PROPAGATE( l_U670, 1 );
    SET_CAM_ACTIVE( l_U671, 1 );
    SET_CAM_PROPAGATE( l_U671, 0 );
    ACTIVATE_SCRIPTED_CAMS( 1, 1 );
    SET_WIDESCREEN_FORMAT( 1 );
    SWITCH_STREAMING( 0 );
    OVERRIDE_FREEZE_FLAGS( 1 );
    CLEAR_HELP();
    CLEAR_PRINTS();
    STOP_STREAM();
    DO_SCREEN_FADE_IN( 2000 );
    return;
}

void sub_9568(unknown uParam0)
{
    string sVar3;

    if (IS_THREAD_ACTIVE( g_U9240 ))
    {
        DESTROY_THREAD( g_U9240 );
    }
    StrCopy( ref g_U9232, uParam0, 32 );
    sVar3 = "text_link_mission";
    if (IS_NETWORK_SESSION())
    {
        sVar3 = "txtlnkmiss_net";
    }
    while (NOT (HAS_SCRIPT_LOADED( sVar3 )))
    {
        REQUEST_SCRIPT( sVar3 );
        WAIT( 0 );
    }
    g_U9240 = START_NEW_SCRIPT( sVar3, 1024 );
    MARK_SCRIPT_AS_NO_LONGER_NEEDED( sVar3 );
    return;
}

void sub_10022()
{
    return sub_10033( 1, 1 );
}

int sub_10033(boolean bParam0, unknown uParam1)
{
    if (bParam0)
    {
        g_U91._fU104 = 1;
    }
    if ((g_U555 != 9) AND (uParam1))
    {
        g_U91._fU100 = 1;
    }
    return 1;
}

void sub_10451()
{
    if (DOES_OBJECT_EXIST( l_U620._fU24 ))
    {
        DELETE_OBJECT( ref l_U620._fU24 );
    }
    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU24 );
    l_U620._fU16 = 0;
    if (DOES_OBJECT_EXIST( l_U620._fU28 ))
    {
        DELETE_OBJECT( ref l_U620._fU28 );
    }
    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU28 );
    l_U620._fU20 = 0;
    for ( l_U750 = 0; l_U750 < 9; l_U750++ )
    {
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
            {
                DELETE_OBJECT( ref l_U181[l_U751][l_U750]._fU12 );
            }
            MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
            l_U749 = TO_FLOAT( l_U751 );
            l_U748 = TO_FLOAT( l_U750 );
            l_U181[l_U751][l_U750]._fU0 = {l_U749, l_U748, 3850.45000000};
            l_U181[l_U751][l_U750]._fU16 = l_U751;
            l_U181[l_U751][l_U750]._fU20 = l_U750;
            l_U181[l_U751][l_U750]._fU24 = 6;
            l_U181[l_U751][l_U750]._fU28 = 0;
            l_U9[l_U751][l_U750] = 0;
        }
    }
    l_U120 = 2;
    l_U149 = 1;
    l_U151 = 0;
    l_U152 = 1;
    l_U153 = 0;
    l_U168 = 0;
    l_U169 = 0;
    l_U171 = 0;
    l_U163 = 0;
    l_U158 = 0;
    l_U159 = 0;
    l_U160 = 0;
    l_U161 = 0;
    l_U768 = 1000;
    l_U770 = 0;
    l_U906 = 0;
    l_U908 = 0;
    l_U909 = 0;
    l_U910 = 1;
    l_U142 = 0;
    l_U157 = 0;
    l_U158 = 0;
    l_U154 = 1;
    l_U959 = 1;
    l_U960 = 1;
    l_U961 = 1;
    l_U964 = 0;
    l_U965 = 0;
    l_U962 = 0;
    for ( l_U759 = 0; l_U759 < 4; l_U759++ )
    {
        l_U954[l_U759] = 0;
    }
    GET_GAME_TIMER( ref l_U772 );
    GET_GAME_TIMER( ref l_U963 );
    CLEAR_AREA( l_U749, l_U748, 3850.45000000, 40.00000000, 1 );
    l_U4 = 2;
    return;
}

void sub_11223(int iParam0, unknown uParam1)
{
    int iVar4;
    int iVar5;

    if (iParam0 == 0)
    {
        iVar4 = 0;
        iVar5 = 255;
    }
    else
    {
        iVar4 = 255;
        iVar5 = 0;
    }
    l_U756 = iVar4;
    if (iParam0 == 0)
    {
        while (l_U756 < iVar5)
        {
            DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
            switch (uParam1)
            {
                case 0:
                sub_11340( 0 );
                break;
                case 1: break;
                case 2:
                sub_16704();
                break;
                case 3:
                sub_17340();
                break;
            }
            DRAW_RECT( 0.50000000, 0.50000000, 2.50000000, 2.50000000, 0, 0, 0, l_U756 );
            l_U756 += l_U757;
            if (l_U756 > iVar5)
            {
                l_U756 = iVar5;
            }
            WAIT( 0 );
        }
        while (IS_SCREEN_FADING())
        {
            DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
            DRAW_RECT( 0.50000000, 0.50000000, 2.50000000, 2.50000000, 0, 0, 0, l_U756 );
            WAIT( 0 );
        }
        DO_SCREEN_FADE_OUT_UNHACKED( 0 );
        DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
        while (IS_SCREEN_FADING())
        {
            DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
            DRAW_RECT( 0.50000000, 0.50000000, 2.50000000, 2.50000000, 0, 0, 0, l_U756 );
            WAIT( 0 );
        }
        DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
        l_U145 = 2;
        sub_19123();
        SET_CAM_ACTIVE( l_U671, 1 );
        SET_CAM_PROPAGATE( l_U671, 1 );
        SET_CAM_ACTIVE( l_U670, 1 );
        SET_CAM_PROPAGATE( l_U670, 0 );
    }
    else
    {
        while (l_U756 > iVar5)
        {
            switch (uParam1)
            {
                case 0:
                sub_11340( 0 );
                break;
                case 1: break;
                case 2:
                sub_16704();
                break;
                case 3:
                sub_17340();
                break;
            }
            DRAW_RECT( 0.50000000, 0.50000000, 2.50000000, 2.50000000, 0, 0, 0, l_U756 );
            if (l_U756 == iVar4)
            {
                DO_SCREEN_FADE_IN_UNHACKED( 0 );
            }
            l_U756 -= l_U757;
            if (l_U756 < iVar5)
            {
                l_U756 = iVar5;
            }
            WAIT( 0 );
        }
        l_U145 = 3;
    }
    return;
}

void sub_11340(boolean bParam0)
{
    vector vVar3;
    vector vVar6;
    float fVar9;
    float fVar10;
    float fVar11;
    float fVar12;
    float fVar13;
    float fVar14;
    float fVar15;
    float fVar16;
    vector vVar17;
    vector vVar20;
    vector vVar23;
    vector vVar26;
    vector vVar29;
    vector vVar32;
    vector vVar35;
    vector vVar38;
    float fVar41;
    float fVar42;
    float fVar43;
    float fVar44;
    float fVar45;
    float fVar46;
    float fVar47;
    float fVar48;
    float fVar49;
    float fVar50;
    int iVar51;
    int iVar52;
    int iVar53;
    unknown uVar54;
    unknown uVar55;

    DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
    vVar3 = {0.49500000, 0.29700000, 0.00000000};
    vVar6 = {0.49600000, 0.31300000, 0.00000000};
    fVar9 = 0.49500000;
    fVar10 = 0.26400000;
    fVar11 = 0.44000000;
    fVar12 = 0.17600000;
    fVar13 = 0.49400000;
    fVar14 = 0.39600000;
    fVar15 = 0.37200000;
    fVar16 = 0.47300000;
    l_U146 = GET_CURRENT_LANGUAGE();
    if ((l_U146 == 1) || (l_U146 == 0))
    {
        fVar15 = 0.37200000;
        fVar16 = 0.47300000;
    }
    else if ((l_U146 == 5) || ((l_U146 == 3) || ((l_U146 == 4) || (l_U146 == 2))))
    {
        fVar15 = 0.31200000;
        fVar16 = 0.43200000;
    }
    vVar17 = {0.49500000, 0.54000000, 0.00000000};
    vVar20 = {0.49600000, 0.08000000, 0.00000000};
    vVar23 = {0.49500000, 0.70000000, 0.00000000};
    vVar26 = {0.49600000, 0.08000000, 0.00000000};
    vVar29 = {0.49500000, 0.62000000, 0.00000000};
    vVar32 = {0.49600000, 0.08000000, 0.00000000};
    vVar35 = {0.49500000, 0.77999990, 0.00000000};
    vVar38 = {0.49600000, 0.08000000, 0.00000000};
    fVar41 = 0.48000000;
    fVar42 = 0.64000000;
    fVar43 = 0.49600000;
    fVar44 = 0.52200000;
    fVar45 = 0.49500000;
    fVar46 = 0.60200000;
    fVar47 = 0.49700000;
    fVar48 = 0.68300010;
    fVar49 = 0.49500000;
    fVar50 = 0.76200000;
    if (NOT (l_U145 == 3))
    {
        bParam0 = false;
    }
    if (NOT l_U169)
    {
        sub_11846();
        l_U169 = 1;
    }
    if (bParam0)
    {
        if (NOT l_U168)
        {
            sub_12390();
            l_U168 = 1;
        }
        else if (NOT (IS_SPECIFIC_CAM_INTERPOLATING( l_U672 )))
        {
            GET_GAME_TIMER( ref l_U765 );
            l_U766 = l_U765 - l_U684;
            if (l_U766 >= (l_U683 + 2000))
            {
                if (NOT (IS_CAM_ACTIVE( l_U672 )))
                {
                    SET_CAM_ACTIVE( l_U672, 1 );
                }
                if (NOT (IS_CAM_PROPAGATING( l_U672 )))
                {
                    SET_CAM_PROPAGATE( l_U672, 1 );
                }
                SET_CAM_SPLINE_PROGRESS( l_U672, 0.00000000 );
                GET_GAME_TIMER( ref l_U684 );
            }
        }
    }
    if (NOT l_U165)
    {
        if (PRELOAD_STREAM( "QUB3D_MENU_MUSIC" ))
        {
            PLAY_STREAM_FRONTEND();
            l_U165 = 1;
        }
    }
    SET_WIDESCREEN_FORMAT( 1 );
    DRAW_RECT( vVar3.x, vVar3.y, vVar6.x, vVar6.y, 0, 0, 0, 150 );
    DRAW_SPRITE( l_U971, fVar9, fVar10, fVar11, fVar12, 0.00000000, 255, 255, 255, 255 );
    sub_13490( fVar15, fVar16 );
    DISPLAY_TEXT( fVar13, fVar14, "PZ_STRAP" );
    sub_13700( vVar3.x, vVar3.y, vVar6.x, vVar6.y );
    DRAW_RECT( vVar3.x, 0.36500000, vVar6.x + l_U1081._fU0, l_U1081._fU4, 250, 250, 250, 250 );
    if (l_U142 == 0)
    {
        DRAW_RECT( vVar17.x, vVar17.y, vVar20.x, vVar20.y, 250, 250, 250, 250 );
        DRAW_RECT( vVar29.x, vVar29.y, vVar32.x, vVar32.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar23.x, vVar23.y, vVar26.x, vVar26.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar35.x, vVar35.y, vVar38.x, vVar38.y, 0, 0, 0, 150 );
        sub_13490( fVar41, fVar42 );
        SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
        SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
        DISPLAY_TEXT( fVar43, fVar44, ref l_U797 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar45, fVar46, ref l_U805 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar47, fVar48, ref l_U809 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar49, fVar50, ref l_U801 );
    }
    else if (l_U142 == 1)
    {
        DRAW_RECT( vVar17.x, vVar17.y, vVar20.x, vVar20.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar29.x, vVar29.y, vVar32.x, vVar32.y, 250, 250, 250, 250 );
        DRAW_RECT( vVar23.x, vVar23.y, vVar26.x, vVar26.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar35.x, vVar35.y, vVar38.x, vVar38.y, 0, 0, 0, 150 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar43, fVar44, ref l_U797 );
        sub_13490( fVar41, fVar42 );
        SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
        SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
        DISPLAY_TEXT( fVar45, fVar46, ref l_U805 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar47, fVar48, ref l_U809 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar49, fVar50, ref l_U801 );
    }
    else if (l_U142 == 3)
    {
        DRAW_RECT( vVar17.x, vVar17.y, vVar20.x, vVar20.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar29.x, vVar29.y, vVar32.x, vVar32.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar23.x, vVar23.y, vVar26.x, vVar26.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar35.x, vVar35.y, vVar38.x, vVar38.y, 250, 250, 250, 250 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar43, fVar44, ref l_U797 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar45, fVar46, ref l_U805 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar47, fVar48, ref l_U809 );
        sub_13490( fVar41, fVar42 );
        SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
        SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
        DISPLAY_TEXT( fVar49, fVar50, ref l_U801 );
    }
    else
    {
        DRAW_RECT( vVar17.x, vVar17.y, vVar20.x, vVar20.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar29.x, vVar29.y, vVar32.x, vVar32.y, 0, 0, 0, 150 );
        DRAW_RECT( vVar23.x, vVar23.y, vVar26.x, vVar26.y, 250, 250, 250, 250 );
        DRAW_RECT( vVar35.x, vVar35.y, vVar38.x, vVar38.y, 0, 0, 0, 150 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar43, fVar44, ref l_U797 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar45, fVar46, ref l_U805 );
        sub_13490( fVar41, fVar42 );
        SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
        SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
        DISPLAY_TEXT( fVar47, fVar48, ref l_U809 );
        sub_13490( fVar41, fVar42 );
        DISPLAY_TEXT( fVar49, fVar50, ref l_U801 );
    };;;
    sub_13700( vVar17.x, vVar17.y, vVar20.x, vVar20.y );
    sub_13700( vVar29.x, vVar29.y, vVar32.x, vVar32.y );
    sub_13700( vVar23.x, vVar23.y, vVar26.x, vVar26.y );
    sub_13700( vVar35.x, vVar35.y, vVar38.x, vVar38.y );
    if (bParam0)
    {
        if (NOT IS_SCREEN_FADING())
        {
            if (sub_15563())
            {
                if (NOT l_U154)
                {
                    l_U154 = 1;
                    PLAY_SOUND_FRONTEND( -1, l_U901 );
                    if (l_U142 == 2)
                    {
                        l_U171 = 1;
                        l_U6 = 0;
                        l_U4 = 3;
                    }
                    else if (l_U142 == 0)
                    {
                        l_U155 = 1;
                        l_U166 = 0;
                        l_U905 = ProtectedGet(g_U8686[0]);
                        l_U4 = 1;
                    }
                    else if (l_U142 == 1)
                    {
                        l_U166 = 1;
                        l_U5 = 0;
                        l_U4 = 1;
                    }
                    else
                    {
                        l_U4 = 5;
                    };;;
                }
            }
            else
            {
                l_U154 = 0;
            }
        }
        else
        {
            DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
        }
        GET_POSITION_OF_ANALOGUE_STICKS( 0, ref iVar52, ref iVar53, ref uVar54, ref uVar55 );
        if ((iVar53 == 0) AND (iVar52 == 0))
        {
            GET_KEYBOARD_MOVE_INPUT( ref iVar52, ref iVar53 );
        }
        if ((iVar53 > 100) || ((IS_GAME_KEYBOARD_NAV_DOWN_PRESSED( 0 )) || (IS_BUTTON_PRESSED( 0, 9 ))))
        {
            GET_GAME_TIMER( ref l_U765 );
            l_U766 = l_U765 - l_U771;
            if (l_U766 >= 250)
            {
                GET_GAME_TIMER( ref l_U771 );
                PLAY_SOUND_FRONTEND( -1, l_U899 );
                if (l_U142 < 3)
                {
                    iVar51 = l_U142;
                    iVar51++;
                    l_U142 = iVar51;
                }
                else
                {
                    l_U142 = 0;
                }
            }
        }
        if ((iVar53 < 65436) || ((IS_GAME_KEYBOARD_NAV_UP_PRESSED( 0 )) || (IS_BUTTON_PRESSED( 0, 8 ))))
        {
            GET_GAME_TIMER( ref l_U765 );
            l_U766 = l_U765 - l_U771;
            if (l_U766 >= 250)
            {
                GET_GAME_TIMER( ref l_U771 );
                PLAY_SOUND_FRONTEND( -1, l_U899 );
                if (l_U142 > 0)
                {
                    iVar51 = l_U142;
                    iVar51--;
                    l_U142 = iVar51;
                }
                else
                {
                    l_U142 = 3;
                }
            }
        }
    }
    SET_WIDESCREEN_FORMAT( 3 );
    if (bParam0)
    {
        INIT_FRONTEND_HELPER_TEXT();
        DRAW_FRONTEND_HELPER_TEXT( "BT_SELECT", ref l_U845, 0 );
        DRAW_FRONTEND_HELPER_TEXT( "BT_SCROLL", "FE_BUTU", 0 );
    }
    sub_16229();
    return;
}

void sub_11846()
{
    unknown uVar2;
    unknown uVar3;

    for ( l_U750 = 0; l_U750 < 9; l_U750++ )
    {
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
            {
                DELETE_OBJECT( ref l_U181[l_U751][l_U750]._fU12 );
            }
            MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
            GENERATE_RANDOM_INT_IN_RANGE( 0, 6, ref uVar2 );
            uVar3 = uVar2;
            CREATE_OBJECT_NO_OFFSET( l_U783[uVar3], l_U181[l_U751][l_U750]._fU0._fU0, l_U181[l_U751][l_U750]._fU0._fU4, l_U181[l_U751][l_U750]._fU0._fU8, ref l_U181[l_U751][l_U750]._fU12, 1 );
            SET_OBJECT_HEADING( l_U181[l_U751][l_U750]._fU12, 0.00000000 );
            SET_OBJECT_COLLISION( l_U181[l_U751][l_U750]._fU12, 0 );
            FREEZE_OBJECT_POSITION( l_U181[l_U751][l_U750]._fU12, 1 );
            l_U181[l_U751][l_U750]._fU24 = uVar3;
            l_U181[l_U751][l_U750]._fU28 = 1;
            l_U9[l_U751][l_U750] = 0;
        }
    }
    for ( l_U759 = 0; l_U759 < 4; l_U759++ )
    {
        l_U954[l_U759] = 0;
    }
    return;
}

void sub_12390()
{
    l_U682 = 8;
    l_U683 = 20000;
    l_U685[0] = {2.63040000, 0.12310000, 3856.82800000};
    l_U716[0] = {-65.48020000, 0.00000000, 0.42240000};
    l_U685[1] = {2.02300000, 1.94950000, 3850.77500000};
    l_U716[1] = {3.64080000, 0.00000000, 85.21550000};
    l_U685[2] = {0.97190000, 1.87910000, 3850.51300000};
    l_U716[2] = {0.42260000, 0.00000000, -0.79880000};
    l_U685[3] = {1.03090000, 6.95470000, 3850.47500000};
    l_U716[3] = {3.85850000, 0.00000000, -87.84570000};
    l_U685[4] = {3.99930000, 7.00430000, 3850.45700000};
    l_U716[4] = {3.88360000, 0.00000000, -178.80480000};
    l_U685[5] = {3.92770000, 1.03010000, 3850.50300000};
    l_U716[5] = {0.95760000, 0.00000000, 86.36830000};
    l_U685[6] = {3.08000000, 1.07610000, 3850.74000000};
    l_U716[6] = {86.08250000, 0.00000000, 85.54550000};
    l_U685[7] = {2.63040000, 0.12310000, 3856.82800000};
    l_U716[7] = {-65.48020000, 0.00000000, 0.42240000};
    CREATE_CAM( 25, ref l_U672 );
    SET_CAM_SPLINE_DURATION( l_U672, l_U683 );
    SET_CAM_SPLINE_SPEED_GRAPH( l_U672, 0 );
    for ( l_U759 = 0; l_U759 < l_U682; l_U759++ )
    {
        CREATE_CAM( 14, ref l_U673[l_U759] );
        SET_CAM_POS( l_U673[l_U759], l_U685[l_U759]._fU0, l_U685[l_U759]._fU4, l_U685[l_U759]._fU8 );
        SET_CAM_ROT( l_U673[l_U759], l_U716[l_U759]._fU0, l_U716[l_U759]._fU4, l_U716[l_U759]._fU8 );
        SET_CAM_FOV( l_U673[l_U759], 70.00000000 );
        ADD_CAM_SPLINE_NODE( l_U672, l_U673[l_U759] );
    }
    GET_GAME_TIMER( ref l_U684 );
    l_U684 -= l_U683;
    if (DOES_OBJECT_EXIST( l_U657 ))
    {
        SET_OBJECT_VISIBLE( l_U657, 0 );
    }
    for ( l_U759 = 0; l_U759 < 4; l_U759++ )
    {
        l_U954[l_U759] = 0;
    }
    return;
}

void sub_13490(unknown uParam0, unknown uParam1)
{
    l_U758 = 255 - l_U756;
    if (l_U758 > 250)
    {
        l_U758 = 250;
    }
    if (IS_JAPANESE_VERSION())
    {
        SET_TEXT_FONT( 2 );
    }
    SET_TEXT_SCALE( uParam0, uParam1 );
    SET_TEXT_COLOUR( 255, 255, 255, l_U758 );
    SET_TEXT_CENTRE( 1 );
    SET_TEXT_DROPSHADOW( 0, 0, 0, 0, 0 );
    SET_TEXT_EDGE( l_U1084, 0, 0, 0, l_U758 );
    SET_TEXT_PROPORTIONAL( 1 );
    SET_TEXT_WRAP( 0.00000000, 1.00000000 );
    return;
}

void sub_13700(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    float fVar6;
    float fVar7;
    float fVar8;
    float fVar9;

    fVar6 = uParam0 - (uParam2 / 2.00000000);
    fVar7 = uParam1;
    fVar8 = l_U1081._fU0;
    fVar9 = uParam3 + l_U1081._fU4;
    DRAW_RECT( fVar6, fVar7, fVar8, fVar9, 250, 250, 250, 250 );
    fVar6 = uParam0 + (uParam2 / 2.00000000);
    fVar7 = uParam1;
    fVar8 = l_U1081._fU0;
    fVar9 = uParam3 + l_U1081._fU4;
    DRAW_RECT( fVar6, fVar7, fVar8, fVar9, 250, 250, 250, 250 );
    fVar6 = uParam0;
    fVar7 = uParam1 + (uParam3 / 2.00000000);
    fVar8 = uParam2 + l_U1081._fU0;
    fVar9 = l_U1081._fU4;
    DRAW_RECT( fVar6, fVar7, fVar8, fVar9, 250, 250, 250, 250 );
    fVar6 = uParam0;
    fVar7 = uParam1 - (uParam3 / 2.00000000);
    fVar8 = uParam2 + l_U1081._fU0;
    fVar9 = l_U1081._fU4;
    DRAW_RECT( fVar6, fVar7, fVar8, fVar9, 250, 250, 250, 250 );
    return;
}

int sub_15563()
{
    if ((IS_CONTROL_PRESSED( 2, 77 )) || (IS_CONTROL_PRESSED( 0, 77 )))
    {
        return 1;
        break;
    }
    return 0;
}

void sub_16229()
{
    int iVar2;
    int iVar3;

    DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
    switch (l_U145)
    {
        case 2:
        l_U756 = 255;
        break;
        case 3:
        l_U756 = 0;
        break;
        case 0:
        iVar2 = 0;
        iVar3 = 255;
        if (l_U756 < iVar3)
        {
            DRAW_RECT( 0.50000000, 0.50000000, 2.50000000, 2.50000000, 0, 0, 0, l_U756 );
            l_U756 += l_U757;
            if (l_U756 > iVar3)
            {
                l_U756 = iVar3;
            }
        }
        else
        {
            l_U756 = iVar3;
        }
        if (l_U756 == iVar3)
        {
            if (NOT IS_SCREEN_FADING())
            {
                DO_SCREEN_FADE_OUT_UNHACKED( 0 );
                while (IS_SCREEN_FADING())
                {
                    DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
                    DRAW_RECT( 0.50000000, 0.50000000, 2.50000000, 2.50000000, 0, 0, 0, l_U756 );
                    WAIT( 0 );
                }
                l_U145 = 2;
            }
        }
        break;
        case 1:
        iVar2 = 255;
        iVar3 = 0;
        if (l_U756 > iVar3)
        {
            DRAW_RECT( 0.50000000, 0.50000000, 2.50000000, 2.50000000, 0, 0, 0, l_U756 );
            if (l_U756 == iVar2)
            {
                DO_SCREEN_FADE_IN_UNHACKED( 0 );
            }
            l_U756 -= l_U757;
            if (l_U756 < iVar3)
            {
                l_U756 = iVar3;
            }
        }
        else
        {
            l_U756 = iVar3;
        }
        if (l_U756 == iVar3)
        {
            l_U145 = 3;
        }
        break;
    }
    return;
}

void sub_16704()
{
    l_U146 = GET_CURRENT_LANGUAGE();
    if (l_U146 == 4)
    {
        l_U1094 = 0.42000000;
        l_U1095 = 0.61500000;
    }
    else
    {
        l_U1094 = 0.48000000;
        l_U1095 = 0.64000000;
    }
    SET_WIDESCREEN_FORMAT( 1 );
    DRAW_RECT( l_U1085._fU0, l_U1085._fU4, l_U1088._fU0, l_U1088._fU4, 0, 0, 0, 150 );
    sub_13700( l_U1085._fU0, l_U1085._fU4, l_U1088._fU0, l_U1088._fU4 );
    DRAW_RECT( l_U1112._fU0, l_U1112._fU4, l_U1115._fU0, l_U1115._fU4, 250, 250, 250, 250 );
    DRAW_RECT( l_U1085._fU0, l_U1112._fU4 + (l_U1115._fU4 / 2.00000000), l_U1088._fU0, 0.00400000, 250, 250, 250, 250 );
    DRAW_RECT( l_U1085._fU0, l_U1091, l_U1088._fU0, 0.00400000, 250, 250, 250, 250 );
    DRAW_SPRITE( l_U971, l_U1100, l_U1101, l_U1102, l_U1103, 0.00000000, 255, 255, 255, 255 );
    sub_13490( l_U1094, l_U1095 );
    SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
    SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
    DISPLAY_TEXT( l_U1092, l_U1093, ref l_U813 );
    sub_13490( l_U1098, l_U1099 );
    SET_TEXT_JUSTIFY( 1 );
    DISPLAY_TEXT( l_U1096, l_U1097, "PZ_SCORE" );
    sub_13490( l_U1118, l_U1119 );
    SET_TEXT_RIGHT_JUSTIFY( 1 );
    SET_TEXT_WRAP( 0.00000000, l_U1120 );
    DISPLAY_TEXT_WITH_NUMBER( l_U1120, l_U1121, "PZ_NUMBER", l_U907 );
    sub_13490( l_U1122, l_U1123 );
    SET_TEXT_WRAP( l_U1126, l_U1127 );
    DISPLAY_TEXT( l_U1124, l_U1125, "PZ_SCORETXT" );
    return;
}

void sub_17340()
{
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    vector vVar6;
    vector vVar9;
    float fVar12;
    float fVar13;
    float fVar14;
    float fVar15;
    float fVar16;
    float fVar17;
    vector vVar18;
    vector vVar21;
    float fVar24;

    fVar2 = 0.61500000;
    fVar3 = 0.18900000;
    fVar4 = 0.14300000;
    fVar5 = 0.05800000;
    vVar6 = {0.49500000, 0.48300000, 0.00000000};
    vVar9 = {0.49200000, 0.67600000, 0.00000000};
    fVar12 = 0.36700000;
    fVar13 = 0.16500000;
    fVar14 = 0.48000000;
    fVar15 = 0.64000000;
    fVar16 = 0.48000000;
    fVar17 = 0.64000000;
    vVar18 = {0.37200000, 0.18300000, 0.00000000};
    vVar21 = {0.24400000, 0.07800000, 0.00000000};
    l_U146 = GET_CURRENT_LANGUAGE();
    if ((l_U146 == 5) || (l_U146 == 4))
    {
        fVar14 = 0.30400000;
        fVar15 = 0.46500000;
    }
    else if (l_U146 == 1)
    {
        fVar14 = 0.40000000;
        fVar15 = 0.60000000;
    }
    else
    {
        fVar14 = 0.48000000;
        fVar15 = 0.64000000;
    }
    SET_WIDESCREEN_FORMAT( 1 );
    DRAW_RECT( vVar6.x, vVar6.y, vVar9.x, vVar9.y, 0, 0, 0, 150 );
    sub_13700( vVar6.x, vVar6.y, vVar9.x, vVar9.y );
    DRAW_SPRITE( l_U971, fVar2, fVar3, fVar4, fVar5, 0.00000000, 255, 255, 255, 255 );
    DRAW_RECT( vVar18.x, vVar18.y, vVar21.x, vVar21.y, 250, 250, 250, 250 );
    DRAW_RECT( vVar6.x, vVar18.y + (vVar21.y / 2.00000000), vVar9.x, 0.00400000, 250, 250, 250, 250 );
    sub_13490( fVar14, fVar15 );
    SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
    SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
    DISPLAY_TEXT( fVar12, fVar13, ref l_U809 );
    fVar24 = 0.05800000;
    l_U759 = 1;
    l_U1019[0]._fU4 = l_U988[0]._fU4;
    while (l_U759 < 10)
    {
        l_U988[l_U759] = {l_U988[l_U759 - 1]};
        l_U988[l_U759]._fU4 = (l_U988[l_U759 - 1]._fU4) + fVar24;
        l_U1019[l_U759] = {l_U1019[l_U759 - 1]};
        l_U1019[l_U759]._fU4 = (l_U1019[l_U759 - 1]._fU4) + fVar24;
        l_U759++;
    }
    for ( l_U759 = 0; l_U759 < 10; l_U759++ )
    {
        sub_13490( fVar16, fVar17 );
        SET_TEXT_JUSTIFY( 1 );
        SET_TEXT_WRAP( l_U988[0]._fU0, 1.00000000 );
        if (l_U6 == 2)
        {
            if (NOT (l_U759 == l_U1080))
            {
                DISPLAY_TEXT_WITH_LITERAL_STRING( l_U988[l_U759]._fU0, l_U988[l_U759]._fU4, "PZ_STRING", ref g_U8675[l_U759] );
                sub_13490( fVar16, fVar17 );
                SET_TEXT_RIGHT_JUSTIFY( 1 );
                SET_TEXT_WRAP( 0.00000000, l_U1019[0]._fU0 );
                DISPLAY_TEXT_WITH_NUMBER( l_U1019[l_U759]._fU0, l_U1019[l_U759]._fU4, "PZ_NUMBER", ProtectedGet(g_U8686[l_U759]) );
            }
            else
            {
                DRAW_RECT( vVar6.x, l_U988[l_U759]._fU4 + l_U1159, vVar9.x, l_U1156._fU4, 250, 250, 250, 250 );
                l_U1156 = {vVar9.x, l_U1156._fU4, 0.00000000};
                SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
                SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
                DISPLAY_TEXT_WITH_LITERAL_STRING( l_U988[l_U759]._fU0, l_U988[l_U759]._fU4, "PZ_STRING", ref g_U8675[l_U759] );
                sub_13490( fVar16, fVar17 );
                SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
                SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
                SET_TEXT_RIGHT_JUSTIFY( 1 );
                SET_TEXT_WRAP( 0.00000000, l_U1019[0]._fU0 );
                DISPLAY_TEXT_WITH_NUMBER( l_U1019[l_U759]._fU0, l_U1019[l_U759]._fU4, "PZ_NUMBER", ProtectedGet(g_U8686[l_U759]) );
            }
        }
        else
        {
            DISPLAY_TEXT_WITH_LITERAL_STRING( l_U988[l_U759]._fU0, l_U988[l_U759]._fU4, "PZ_STRING", ref g_U8675[l_U759] );
            sub_13490( fVar16, fVar17 );
            SET_TEXT_RIGHT_JUSTIFY( 1 );
            SET_TEXT_WRAP( 0.00000000, l_U1019[0]._fU0 );
            DISPLAY_TEXT_WITH_NUMBER( l_U1019[l_U759]._fU0, l_U1019[l_U759]._fU4, "PZ_NUMBER", ProtectedGet(g_U8686[l_U759]) );
        }
        if (l_U759 < 9)
        {
            DRAW_RECT( vVar6.x, l_U988[l_U759]._fU4 + (l_U1159 * 2.75000000), vVar9.x, 0.00200000, 250, 250, 250, 250 );
        }
    }
    return;
}

void sub_19123()
{
    if (DOES_CAM_EXIST( l_U672 ))
    {
        SET_CAM_ACTIVE( l_U672, 0 );
        SET_CAM_PROPAGATE( l_U672, 0 );
    }
    for ( l_U759 = 0; l_U759 < l_U682; l_U759++ )
    {
        if (DOES_CAM_EXIST( l_U673[l_U759] ))
        {
            DESTROY_CAM( l_U673[l_U759] );
        }
    }
    if (DOES_CAM_EXIST( l_U672 ))
    {
        DESTROY_CAM( l_U672 );
    }
    if (DOES_OBJECT_EXIST( l_U657 ))
    {
        SET_OBJECT_VISIBLE( l_U657, 1 );
    }
    return;
}

void sub_19729()
{
    DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
    if (l_U155)
    {
        if (NOT l_U151)
        {
            if (NOT l_U166)
            {
                if (l_U150)
                {
                    sub_19787();
                    sub_41567();
                }
                else
                {
                    sub_44847();
                }
                sub_36226();
                sub_31975();
                if (l_U151)
                {
                    if (NOT l_U166)
                    {
                        if (l_U164)
                        {
                            STOP_STREAM();
                            l_U164 = 0;
                        }
                        PLAY_SOUND_FROM_POSITION( l_U890, l_U904, l_U887 );
                    }
                    l_U6 = 0;
                    l_U4 = 3;
                    l_U907 = l_U906;
                }
            }
            else
            {
                sub_46036();
            }
        }
        else
        {
            sub_11340( 1 );
        }
    }
    else if (l_U166)
    {
        sub_46036();
    }
    else
    {
        sub_11340( 1 );
    }
    FORCE_WEATHER_NOW( 1 );
    sub_43244();
    return;
}

void sub_19787()
{
    GET_GAME_TIMER( ref l_U765 );
    if (l_U158)
    {
        l_U766 = l_U765 - l_U773;
        if (l_U766 >= 10000)
        {
            l_U766 = l_U765 - l_U767;
            l_U158 = 0;
        }
        else
        {
            l_U766 = l_U765 - l_U767;
            l_U766 = l_U766 / 2;
        }
    }
    else
    {
        l_U766 = l_U765 - l_U767;
    }
    if (NOT l_U163)
    {
        if (l_U766 >= (l_U768 - l_U770))
        {
            sub_19956();
            GET_GAME_TIMER( ref l_U767 );
        }
    }
    else if (l_U766 >= l_U768)
    {
        sub_19956();
        GET_GAME_TIMER( ref l_U767 );
    }
    if ((NOT l_U620._fU20) AND (NOT l_U620._fU16))
    {
        l_U150 = 0;
    }
    else if (NOT l_U166)
    {
        sub_24106();
    }
    if (NOT l_U150)
    {
        while (sub_26212())
        {
            WAIT( 0 );
            if (NOT l_U166)
            {
                sub_31975();
            }
            else
            {
                sub_36226();
            }
        }
        l_U896 = 0;
    }
    return;
}

void sub_19956()
{
    boolean bVar2;
    boolean bVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;

    bVar2 = false;
    bVar3 = false;
    l_U143 = l_U620._fU64;
    l_U144 = l_U620._fU68;
    if (l_U620._fU16)
    {
        if (l_U620._fU20)
        {
            if ((l_U620._fU64 == 1) || (l_U620._fU64 == 0))
            {
                if ((l_U620._fU4 - 1) >= l_U753)
                {
                    if ((l_U181[l_U620._fU0][l_U620._fU4 - 1]._fU24) == 6)
                    {
                        l_U620._fU4--;
                        l_U620._fU32._fU4 = TO_FLOAT( l_U620._fU4 );
                        l_U143 = l_U620._fU64;
                    }
                    else if (l_U620._fU4 <= l_U752)
                    {
                        bVar2 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar2 = true;
                }
            }
            if (l_U620._fU64 == 2)
            {
                if ((l_U620._fU4 - 2) >= l_U753)
                {
                    if ((l_U181[l_U620._fU0][l_U620._fU4 - 2]._fU24) == 6)
                    {
                        l_U620._fU4--;
                        l_U620._fU32._fU4 = TO_FLOAT( l_U620._fU4 );
                        l_U620._fU32._fU8 = 3851.45000000;
                        l_U143 = 4;
                    }
                    else if (l_U620._fU4 <= l_U752)
                    {
                        bVar2 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar2 = true;
                }
            }
            if (l_U620._fU64 == 3)
            {
                if ((l_U620._fU4 - 1) >= l_U753)
                {
                    if ((l_U181[l_U620._fU0][l_U620._fU4 - 1]._fU24) == 6)
                    {
                        l_U620._fU4 -= 0;
                        l_U620._fU32._fU4 = TO_FLOAT( l_U620._fU4 );
                        l_U143 = 5;
                    }
                    else if (l_U620._fU4 <= l_U752)
                    {
                        bVar2 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar2 = true;
                }
            }
            if (l_U620._fU64 == 4)
            {
                if ((l_U620._fU4 - 1) >= l_U753)
                {
                    if ((l_U181[l_U620._fU0][l_U620._fU4 - 1]._fU24) == 6)
                    {
                        l_U620._fU4--;
                        l_U620._fU32._fU4 = TO_FLOAT( l_U620._fU4 );
                        l_U620._fU32._fU8 = 3850.45000000;
                        l_U143 = 3;
                    }
                    else if (l_U620._fU4 <= l_U752)
                    {
                        bVar2 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar2 = true;
                }
            }
            if (l_U620._fU64 == 5)
            {
                if ((l_U620._fU4 - 1) >= l_U753)
                {
                    if ((l_U181[l_U620._fU0][l_U620._fU4 - 1]._fU24) == 6)
                    {
                        l_U620._fU4 -= 0;
                        l_U620._fU32._fU4 = TO_FLOAT( l_U620._fU4 );
                        l_U143 = 2;
                    }
                    else if (l_U620._fU4 <= l_U752)
                    {
                        bVar2 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar2 = true;
                }
            }
        }
        else if ((l_U620._fU4 - 1) >= l_U753)
        {
            if ((l_U181[l_U620._fU0][l_U620._fU4 - 1]._fU24) == 6)
            {
                l_U620._fU4--;
                l_U620._fU32._fU4 = TO_FLOAT( l_U620._fU4 );
                l_U143 = 0;
            }
            else if (l_U620._fU4 <= l_U752)
            {
                bVar2 = true;
            }
            else
            {
                l_U151 = 1;
            }
        }
        else
        {
            bVar2 = true;
        }
    }
    if (l_U620._fU20)
    {
        if (l_U620._fU16)
        {
            if ((l_U620._fU68 == 1) || (l_U620._fU68 == 0))
            {
                if ((l_U620._fU12 - 1) >= l_U753)
                {
                    if ((l_U181[l_U620._fU8][l_U620._fU12 - 1]._fU24) == 6)
                    {
                        l_U620._fU12--;
                        l_U620._fU44._fU4 = TO_FLOAT( l_U620._fU12 );
                        l_U144 = l_U620._fU68;
                    }
                    else if (l_U620._fU12 <= l_U752)
                    {
                        bVar3 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar3 = true;
                }
            }
            if (l_U620._fU68 == 2)
            {
                if ((l_U620._fU12 - 2) >= l_U753)
                {
                    if ((l_U181[l_U620._fU8][l_U620._fU12 - 2]._fU24) == 6)
                    {
                        l_U620._fU12--;
                        l_U620._fU44._fU4 = TO_FLOAT( l_U620._fU12 );
                        l_U620._fU44._fU8 = 3851.45000000;
                        l_U144 = 4;
                    }
                    else if (l_U620._fU12 <= l_U752)
                    {
                        bVar3 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar3 = true;
                }
            }
            if (l_U620._fU68 == 3)
            {
                if ((l_U620._fU12 - 1) >= l_U753)
                {
                    if ((l_U181[l_U620._fU8][l_U620._fU12 - 1]._fU24) == 6)
                    {
                        l_U620._fU12 -= 0;
                        l_U620._fU44._fU4 = TO_FLOAT( l_U620._fU12 );
                        l_U144 = 5;
                    }
                    else if (l_U620._fU12 <= l_U752)
                    {
                        bVar3 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar3 = true;
                }
            }
            if (l_U620._fU68 == 4)
            {
                if ((l_U620._fU12 - 1) >= l_U753)
                {
                    if ((l_U181[l_U620._fU8][l_U620._fU12 - 1]._fU24) == 6)
                    {
                        l_U620._fU12--;
                        l_U620._fU44._fU4 = TO_FLOAT( l_U620._fU12 );
                        l_U620._fU44._fU8 = 3850.45000000;
                        l_U144 = 3;
                    }
                    else if (l_U620._fU12 <= l_U752)
                    {
                        bVar3 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar3 = true;
                }
            }
            if (l_U620._fU68 == 5)
            {
                if ((l_U620._fU12 - 1) >= l_U753)
                {
                    if ((l_U181[l_U620._fU8][l_U620._fU12 - 1]._fU24) == 6)
                    {
                        l_U620._fU12 -= 0;
                        l_U620._fU44._fU4 = TO_FLOAT( l_U620._fU12 );
                        l_U144 = 2;
                    }
                    else if (l_U620._fU12 <= l_U752)
                    {
                        bVar3 = true;
                    }
                    else
                    {
                        l_U151 = 1;
                    }
                }
                else
                {
                    bVar3 = true;
                }
            }
        }
        else if ((l_U620._fU12 - 1) >= l_U753)
        {
            if ((l_U181[l_U620._fU8][l_U620._fU12 - 1]._fU24) == 6)
            {
                l_U620._fU12--;
                l_U620._fU44._fU4 = TO_FLOAT( l_U620._fU12 );
                l_U144 = 0;
            }
            else if (l_U620._fU12 <= l_U752)
            {
                bVar3 = true;
            }
            else
            {
                l_U151 = 1;
            }
        }
        else
        {
            bVar3 = true;
        }
    }
    if ((bVar3) || (bVar2))
    {
        l_U890 = GET_SOUND_ID();
        PLAY_SOUND_FROM_POSITION( l_U890, l_U901, l_U887 );
        l_U892 = (l_U620._fU32._fU4 + l_U620._fU44._fU4) / (l_U752 * 2);
        l_U891 = (((l_U620._fU32._fU0 + l_U620._fU44._fU0) / (l_U754 * 2)) * 2) - 1;
        SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
        SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
        RELEASE_SOUND_ID( l_U890 );
    }
    else
    {
        l_U890 = GET_SOUND_ID();
        PLAY_SOUND_FROM_POSITION( l_U890, l_U899, l_U887 );
        l_U892 = (l_U620._fU32._fU4 + l_U620._fU44._fU4) / (l_U752 * 2);
        l_U891 = (((l_U620._fU32._fU0 + l_U620._fU44._fU0) / (l_U754 * 2)) * 2) - 1;
        SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
        SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
        RELEASE_SOUND_ID( l_U890 );
    }
    if (bVar2)
    {
        if (NOT (l_U620._fU32._fU8 == 3851.45000000))
        {
            uVar4 = l_U620._fU0;
            uVar5 = l_U620._fU4;
            l_U181[uVar4][uVar5]._fU0 = {l_U620._fU32._fU0, l_U620._fU32._fU4, 3850.45000000};
            l_U181[uVar4][uVar5]._fU24 = l_U620._fU56;
            CREATE_OBJECT_NO_OFFSET( l_U783[l_U620._fU56], l_U181[uVar4][uVar5]._fU0._fU0, l_U181[uVar4][uVar5]._fU0._fU4, l_U181[uVar4][uVar5]._fU0._fU8, ref l_U181[uVar4][uVar5]._fU12, 1 );
            SET_OBJECT_HEADING( l_U181[uVar4][uVar5]._fU12, 0.00000000 );
            SET_OBJECT_COLLISION( l_U181[uVar4][uVar5]._fU12, 0 );
            FREEZE_OBJECT_POSITION( l_U181[uVar4][uVar5]._fU12, 1 );
            l_U181[uVar4][uVar5]._fU28 = 1;
            l_U9[uVar4][uVar5] = 0;
        }
        else
        {
            uVar6 = l_U866[l_U620._fU56];
            TRIGGER_PTFX( uVar6, l_U620._fU32, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
            l_U890 = GET_SOUND_ID();
            PLAY_SOUND_FROM_POSITION( l_U890, l_U897, l_U887 );
            l_U892 = (TO_FLOAT( l_U750 )) / 9;
            l_U891 = (((TO_FLOAT( l_U751 )) / 6) * 2) - 1;
            SET_VARIABLE_ON_SOUND( l_U890, l_U895, l_U896 );
            SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
            SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
            RELEASE_SOUND_ID( l_U890 );
        }
        DELETE_OBJECT( ref l_U620._fU24 );
        MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU24 );
        l_U620._fU16 = 0;
    }
    if (bVar3)
    {
        if (NOT (l_U620._fU44._fU8 == 3851.45000000))
        {
            uVar4 = l_U620._fU8;
            uVar5 = l_U620._fU12;
            l_U181[uVar4][uVar5]._fU0 = {l_U620._fU44._fU0, l_U620._fU44._fU4, 3850.45000000};
            l_U181[uVar4][uVar5]._fU24 = l_U620._fU60;
            CREATE_OBJECT_NO_OFFSET( l_U783[l_U620._fU60], l_U181[uVar4][uVar5]._fU0._fU0, l_U181[uVar4][uVar5]._fU0._fU4, l_U181[uVar4][uVar5]._fU0._fU8, ref l_U181[uVar4][uVar5]._fU12, 1 );
            SET_OBJECT_HEADING( l_U181[uVar4][uVar5]._fU12, 0.00000000 );
            SET_OBJECT_COLLISION( l_U181[uVar4][uVar5]._fU12, 0 );
            FREEZE_OBJECT_POSITION( l_U181[uVar4][uVar5]._fU12, 1 );
            l_U181[uVar4][uVar5]._fU28 = 1;
            l_U9[uVar4][uVar5] = 0;
        }
        else
        {
            uVar6 = l_U866[l_U620._fU60];
            TRIGGER_PTFX( uVar6, l_U620._fU44, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
            l_U890 = GET_SOUND_ID();
            PLAY_SOUND_FROM_POSITION( l_U890, l_U897, l_U887 );
            l_U892 = (TO_FLOAT( l_U750 )) / 9;
            l_U891 = (((TO_FLOAT( l_U751 )) / 6) * 2) - 1;
            SET_VARIABLE_ON_SOUND( l_U890, l_U895, l_U896 );
            SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
            SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
            RELEASE_SOUND_ID( l_U890 );
        }
        DELETE_OBJECT( ref l_U620._fU28 );
        MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU28 );
        l_U620._fU20 = 0;
    }
    if (NOT l_U151)
    {
        if (l_U620._fU16)
        {
            if (DOES_OBJECT_EXIST( l_U620._fU24 ))
            {
                if (l_U143 == 4)
                {
                    l_U620._fU32._fU8 = 3851.45000000;
                }
                else
                {
                    l_U620._fU32._fU8 = 3850.45000000;
                }
                SET_OBJECT_COORDINATES( l_U620._fU24, l_U620._fU32._fU0, l_U620._fU32._fU4, l_U620._fU32._fU8 );
                l_U620._fU64 = l_U143;
            }
        }
        if (l_U620._fU20)
        {
            if (DOES_OBJECT_EXIST( l_U620._fU28 ))
            {
                if (l_U144 == 4)
                {
                    l_U620._fU44._fU8 = 3851.45000000;
                }
                else
                {
                    l_U620._fU44._fU8 = 3850.45000000;
                }
                SET_OBJECT_COORDINATES( l_U620._fU28, l_U620._fU44._fU0, l_U620._fU44._fU4, l_U620._fU44._fU8 );
                l_U620._fU68 = l_U144;
            }
        }
    }
    else if (l_U620._fU20)
    {
        DELETE_OBJECT( ref l_U620._fU28 );
        MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU28 );
        l_U620._fU20 = 0;
    }
    if (l_U620._fU16)
    {
        DELETE_OBJECT( ref l_U620._fU24 );
        MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU24 );
        l_U620._fU16 = 0;
    }
    return;
}

void sub_24106()
{
    int iVar2;
    int iVar3;
    unknown uVar4;
    unknown uVar5;

    if ((l_U620._fU16) AND (l_U620._fU20))
    {
        if (NOT l_U153)
        {
            GET_POSITION_OF_ANALOGUE_STICKS( 0, ref iVar2, ref iVar3, ref uVar4, ref uVar5 );
            if ((iVar3 == 0) AND (iVar2 == 0))
            {
                GET_KEYBOARD_MOVE_INPUT( ref iVar2, ref iVar3 );
            }
            if ((iVar2 < 65436) || ((iVar2 > 100) || ((IS_GAME_KEYBOARD_NAV_RIGHT_PRESSED( 0 )) || ((IS_GAME_KEYBOARD_NAV_LEFT_PRESSED( 0 )) || ((IS_BUTTON_PRESSED( 0, 11 )) || (IS_BUTTON_PRESSED( 0, 10 )))))))
            {
                if (NOT l_U152)
                {
                    if ((iVar2 < 65436) || ((IS_GAME_KEYBOARD_NAV_LEFT_PRESSED( 0 )) || (IS_BUTTON_PRESSED( 0, 10 ))))
                    {
                        l_U120 = 0;
                        l_U152 = 1;
                    }
                    else if ((iVar2 > 100) || ((IS_GAME_KEYBOARD_NAV_RIGHT_PRESSED( 0 )) || (IS_BUTTON_PRESSED( 0, 11 ))))
                    {
                        l_U120 = 1;
                        l_U152 = 1;
                    }
                    if (l_U152 == 1)
                    {
                        l_U761 = 0;
                        l_U762 = 0;
                        l_U763 = 0;
                        l_U764 = 0;
                        l_U143 = l_U620._fU64;
                        l_U144 = l_U620._fU68;
                        switch (l_U620._fU64)
                        {
                            case 0:
                            if (l_U120 == 0)
                            {
                                l_U761 = 0;
                                l_U764 = 1;
                                l_U143 = 5;
                                l_U144 = 4;
                            }
                            else if (l_U120 == 1)
                            {
                                l_U761 = 1;
                                l_U763 = 1;
                                l_U143 = 4;
                                l_U144 = 5;
                            }
                            break;
                            case 1:
                            if (l_U120 == 0)
                            {
                                l_U761 = -1;
                                l_U763 = 1;
                                l_U143 = 4;
                                l_U144 = 5;
                            }
                            else if (l_U120 == 1)
                            {
                                l_U761 = 0;
                                l_U764 = 1;
                                l_U143 = 5;
                                l_U144 = 4;
                            }
                            break;
                            case 2:
                            if (l_U120 == 0)
                            {
                                l_U761 = -1;
                            }
                            else if (l_U120 == 1)
                            {
                                l_U761 = 1;
                            }
                            l_U143 = 2;
                            l_U144 = 3;
                            break;
                            case 3:
                            if (l_U120 == 0)
                            {
                                l_U761 = -1;
                            }
                            else if (l_U120 == 1)
                            {
                                l_U761 = 1;
                            }
                            l_U143 = 3;
                            l_U144 = 2;
                            break;
                            case 4:
                            if (l_U120 == 0)
                            {
                                l_U761 = -1;
                                l_U763 = -1;
                                l_U143 = 0;
                                l_U144 = 1;
                            }
                            else if (l_U120 == 1)
                            {
                                l_U761 = 1;
                                l_U763 = -1;
                                l_U143 = 1;
                                l_U144 = 0;
                            }
                            break;
                            case 5:
                            if (l_U120 == 0)
                            {
                                l_U761 = 0;
                                l_U764 = -1;
                                l_U143 = 1;
                                l_U144 = 0;
                            }
                            else if (l_U120 == 1)
                            {
                                l_U761 = 0;
                                l_U764 = -1;
                                l_U143 = 0;
                                l_U144 = 1;
                            }
                            break;
                        }
                        l_U153 = 1;
                    }
                }
                else
                {
                    GET_GAME_TIMER( ref l_U765 );
                    l_U766 = l_U765 - l_U771;
                    if (l_U766 >= 250)
                    {
                        l_U152 = 0;
                        l_U120 = 2;
                    }
                }
            }
            else
            {
                l_U120 = 2;
                l_U152 = 0;
                if ((iVar3 > 100) || ((IS_GAME_KEYBOARD_NAV_DOWN_PRESSED( 0 )) || (IS_BUTTON_PRESSED( 0, 9 ))))
                {
                    l_U768 = 100;
                    l_U163 = 1;
                }
                else
                {
                    l_U163 = 0;
                    l_U768 = 1000;
                }
            }
        }
        else if (sub_25058())
        {
            PRINTNL();
            GET_GAME_TIMER( ref l_U771 );
            l_U153 = 0;
        }
        else
        {
            PRINTNL();
            l_U153 = 0;
        }
    }
    else
    {
        GET_POSITION_OF_ANALOGUE_STICKS( 0, ref iVar2, ref iVar3, ref uVar4, ref uVar5 );
        if ((iVar3 == 0) AND (iVar2 == 0))
        {
            GET_KEYBOARD_MOVE_INPUT( ref iVar2, ref iVar3 );
        }
        if ((iVar3 > 100) || ((IS_GAME_KEYBOARD_NAV_DOWN_PRESSED( 0 )) || (IS_BUTTON_PRESSED( 0, 9 ))))
        {
            l_U768 = 100;
            l_U163 = 1;
        }
        else
        {
            l_U163 = 0;
            l_U768 = 1000;
        }
    }
    return;
}

void sub_25058()
{
    boolean Result;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    float fVar7;

    Result = true;
    fVar7 = 1.00000000;
    iVar3 = l_U620._fU0 + l_U761;
    iVar4 = l_U620._fU4 + l_U762;
    switch (l_U143)
    {
        case 0:
        iVar5 = iVar3 + 1;
        iVar6 = iVar4;
        break;
        case 1:
        iVar5 = iVar3 - 1;
        iVar6 = iVar4;
        break;
        case 2:
        iVar5 = iVar3;
        iVar6 = iVar4 - 1;
        break;
        case 3:
        iVar5 = iVar3;
        iVar6 = iVar4 + 1;
        break;
        case 4:
        iVar5 = iVar3;
        iVar6 = iVar4;
        break;
        case 5:
        iVar5 = iVar3;
        iVar6 = iVar4;
        break;
    }
    if ((iVar4 >= l_U753) AND ((iVar4 <= l_U752) AND ((iVar3 >= l_U755) AND (iVar3 <= l_U754))))
    {
        if (NOT (l_U181[iVar3][iVar4]._fU24 == 6))
        {
            Result = false;
        }
    }
    else
    {
        Result = false;
    }
    if ((iVar6 >= l_U753) AND ((iVar6 <= l_U752) AND ((iVar5 >= l_U755) AND (iVar5 <= l_U754))))
    {
        if (NOT (l_U181[iVar5][iVar6]._fU24 == 6))
        {
            Result = false;
        }
    }
    else
    {
        Result = false;
    }
    if (Result)
    {
        l_U620._fU0 = iVar3;
        l_U620._fU4 = iVar4;
        l_U620._fU32._fU0 = TO_FLOAT( iVar3 );
        l_U620._fU32._fU4 = TO_FLOAT( iVar4 );
        l_U620._fU32._fU8 += fVar7 * (TO_FLOAT( l_U763 ));
        if (l_U143 == 4)
        {
            l_U620._fU32._fU8 = 3851.45000000;
        }
        else
        {
            l_U620._fU32._fU8 = 3850.45000000;
        }
        l_U620._fU8 = iVar5;
        l_U620._fU12 = iVar6;
        l_U620._fU44._fU0 = TO_FLOAT( iVar5 );
        l_U620._fU44._fU4 = TO_FLOAT( iVar6 );
        l_U620._fU44._fU8 += fVar7 * (TO_FLOAT( l_U764 ));
        l_U890 = GET_SOUND_ID();
        PLAY_SOUND_FROM_POSITION( l_U890, l_U898, l_U887 );
        l_U892 = (l_U620._fU32._fU4 + l_U620._fU44._fU4) / (l_U752 * 2);
        l_U891 = (((l_U620._fU32._fU0 + l_U620._fU44._fU0) / (l_U754 * 2)) * 2) - 1;
        SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
        SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
        RELEASE_SOUND_ID( l_U890 );
        if (l_U144 == 4)
        {
            l_U620._fU44._fU8 = 3851.45000000;
        }
        else
        {
            l_U620._fU44._fU8 = 3850.45000000;
        }
        if (DOES_OBJECT_EXIST( l_U620._fU24 ))
        {
            SET_OBJECT_COORDINATES( l_U620._fU24, l_U620._fU32._fU0, l_U620._fU32._fU4, l_U620._fU32._fU8 );
        }
        if (DOES_OBJECT_EXIST( l_U620._fU28 ))
        {
            SET_OBJECT_COORDINATES( l_U620._fU28, l_U620._fU44._fU0, l_U620._fU44._fU4, l_U620._fU44._fU8 );
        }
        l_U620._fU64 = l_U143;
        l_U620._fU68 = l_U144;
    }
    return Result;
}

int sub_26212()
{
    int iVar2;
    int iVar3;

    iVar3 = 0;
    if (l_U172)
    {
        sub_26234();
    }
    for ( l_U750 = 0; l_U750 < 9; l_U750++ )
    {
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            l_U7 = l_U181[l_U751][l_U750]._fU24;
            if (l_U181[l_U751][l_U750]._fU24 < 6)
            {
                iVar2 = sub_28923();
                if (iVar2 >= 3)
                {
                    iVar3 += sub_29902();
                }
            }
            else if (NOT (l_U181[l_U751][l_U750]._fU24 == 6))
            {
                if (NOT (l_U9[l_U751][l_U750] == 1))
                {
                    sub_31466( l_U751, l_U750 );
                    iVar3++;
                }
            }
        }
    }
    if (iVar3 > 0)
    {
        if (NOT l_U166)
        {
            sub_31975();
        }
        else
        {
            sub_36226();
        }
        sub_36774();
        sub_37898();
        l_U909++;
        l_U908 = iVar3;
        l_U908 *= l_U911;
        l_U908 *= l_U909;
        l_U906 += l_U908;
        if (l_U910 < 30)
        {
            if (l_U906 >= (l_U912[l_U910 - 1]))
            {
                l_U910++;
            }
        }
        return 1;
        break;
    }
    l_U909 = 0;
    return 0;
}

void sub_26234()
{
    int iVar2;
    int iVar3;
    boolean bVar4;
    int iVar5;

    bVar4 = false;
    for ( l_U750 = 0; l_U750 < 9; l_U750++ )
    {
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            bVar4 = false;
            l_U7 = l_U181[l_U751][l_U750]._fU24;
            iVar2 = l_U7;
            if (iVar2 < 6)
            {
                if (((l_U750 + 1) <= l_U752) AND ((l_U751 + 1) <= l_U754))
                {
                    if (((l_U181[l_U751 + 1][l_U750 + 1]._fU24) == l_U7) AND (((l_U181[l_U751][l_U750 + 1]._fU24) == l_U7) AND ((l_U181[l_U751 + 1][l_U750]._fU24) == l_U7)))
                    {
                        bVar4 = true;
                    }
                }
                if (bVar4)
                {
                    iVar3 = iVar2 + 7;
                    iVar5 = iVar3;
                    if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                    {
                        DELETE_OBJECT( ref l_U181[l_U751][l_U750]._fU12 );
                        MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
                        TRIGGER_PTFX( l_U880[l_U7], l_U181[l_U751][l_U750]._fU0, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        l_U890 = GET_SOUND_ID();
                        PLAY_SOUND_FROM_POSITION( l_U890, l_U900, l_U887 );
                        l_U892 = (TO_FLOAT( l_U750 )) / 9;
                        l_U891 = (((TO_FLOAT( l_U751 )) / 6) * 2) - 1;
                        SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
                        SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
                        RELEASE_SOUND_ID( l_U890 );
                        l_U181[l_U751][l_U750]._fU24 = 6;
                    }
                    CREATE_OBJECT_NO_OFFSET( l_U790[l_U7], l_U181[l_U751][l_U750]._fU0._fU0, l_U181[l_U751][l_U750]._fU0._fU4, l_U181[l_U751][l_U750]._fU0._fU8, ref l_U181[l_U751][l_U750]._fU12, 1 );
                    SET_OBJECT_HEADING( l_U181[l_U751][l_U750]._fU12, 90.00000000 );
                    SET_OBJECT_COLLISION( l_U181[l_U751][l_U750]._fU12, 0 );
                    FREEZE_OBJECT_POSITION( l_U181[l_U751][l_U750]._fU12, 1 );
                    l_U181[l_U751][l_U750]._fU24 = iVar5;
                    if (DOES_OBJECT_EXIST( l_U181[l_U751 + 1][l_U750]._fU12 ))
                    {
                        DELETE_OBJECT( ref l_U181[l_U751 + 1][l_U750]._fU12 );
                        MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751 + 1][l_U750]._fU12 );
                        TRIGGER_PTFX( l_U880[l_U7], l_U181[l_U751 + 1][l_U750]._fU0, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        l_U890 = GET_SOUND_ID();
                        PLAY_SOUND_FROM_POSITION( l_U890, l_U900, l_U887 );
                        l_U892 = (TO_FLOAT( l_U750 )) / 9;
                        l_U891 = (((TO_FLOAT( l_U751 )) / 6) * 2) - 1;
                        SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
                        SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
                        RELEASE_SOUND_ID( l_U890 );
                        l_U181[l_U751 + 1][l_U750]._fU24 = 6;
                    }
                    CREATE_OBJECT_NO_OFFSET( l_U790[l_U7], l_U181[l_U751 + 1][l_U750]._fU0._fU0, l_U181[l_U751 + 1][l_U750]._fU0._fU4, l_U181[l_U751 + 1][l_U750]._fU0._fU8, ref l_U181[l_U751 + 1][l_U750]._fU12, 1 );
                    SET_OBJECT_HEADING( l_U181[l_U751 + 1][l_U750]._fU12, 180.00000000 );
                    SET_OBJECT_COLLISION( l_U181[l_U751 + 1][l_U750]._fU12, 0 );
                    FREEZE_OBJECT_POSITION( l_U181[l_U751 + 1][l_U750]._fU12, 1 );
                    l_U181[l_U751 + 1][l_U750]._fU24 = iVar5;
                    if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750 + 1]._fU12 ))
                    {
                        DELETE_OBJECT( ref l_U181[l_U751][l_U750 + 1]._fU12 );
                        MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750 + 1]._fU12 );
                        TRIGGER_PTFX( l_U880[l_U7], l_U181[l_U751][l_U750 + 1]._fU0, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        l_U890 = GET_SOUND_ID();
                        PLAY_SOUND_FROM_POSITION( l_U890, l_U900, l_U887 );
                        l_U892 = (TO_FLOAT( l_U750 )) / 9;
                        l_U891 = (((TO_FLOAT( l_U751 )) / 6) * 2) - 1;
                        SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
                        SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
                        RELEASE_SOUND_ID( l_U890 );
                        l_U181[l_U751][l_U750 + 1]._fU24 = 6;
                    }
                    CREATE_OBJECT_NO_OFFSET( l_U790[l_U7], l_U181[l_U751][l_U750 + 1]._fU0._fU0, l_U181[l_U751][l_U750 + 1]._fU0._fU4, l_U181[l_U751][l_U750 + 1]._fU0._fU8, ref l_U181[l_U751][l_U750 + 1]._fU12, 1 );
                    SET_OBJECT_HEADING( l_U181[l_U751][l_U750 + 1]._fU12, 0.00000000 );
                    SET_OBJECT_COLLISION( l_U181[l_U751][l_U750 + 1]._fU12, 0 );
                    FREEZE_OBJECT_POSITION( l_U181[l_U751][l_U750 + 1]._fU12, 1 );
                    l_U181[l_U751][l_U750 + 1]._fU24 = iVar5;
                    if (DOES_OBJECT_EXIST( l_U181[l_U751 + 1][l_U750 + 1]._fU12 ))
                    {
                        DELETE_OBJECT( ref l_U181[l_U751 + 1][l_U750 + 1]._fU12 );
                        MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751 + 1][l_U750 + 1]._fU12 );
                        TRIGGER_PTFX( l_U880[l_U7], l_U181[l_U751 + 1][l_U750 + 1]._fU0, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        l_U890 = GET_SOUND_ID();
                        PLAY_SOUND_FROM_POSITION( l_U890, l_U900, l_U887 );
                        l_U892 = (TO_FLOAT( l_U750 )) / 9;
                        l_U891 = (((TO_FLOAT( l_U751 )) / 6) * 2) - 1;
                        SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
                        SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
                        RELEASE_SOUND_ID( l_U890 );
                        l_U181[l_U751 + 1][l_U750 + 1]._fU24 = 6;
                    }
                    CREATE_OBJECT_NO_OFFSET( l_U790[l_U7], l_U181[l_U751 + 1][l_U750 + 1]._fU0._fU0, l_U181[l_U751 + 1][l_U750 + 1]._fU0._fU4, l_U181[l_U751 + 1][l_U750 + 1]._fU0._fU8, ref l_U181[l_U751 + 1][l_U750 + 1]._fU12, 1 );
                    SET_OBJECT_HEADING( l_U181[l_U751 + 1][l_U750 + 1]._fU12, 270.00000000 );
                    SET_OBJECT_COLLISION( l_U181[l_U751 + 1][l_U750 + 1]._fU12, 0 );
                    FREEZE_OBJECT_POSITION( l_U181[l_U751 + 1][l_U750 + 1]._fU12, 1 );
                    l_U181[l_U751 + 1][l_U750 + 1]._fU24 = iVar5;
                }
            }
        }
    }
    return;
}

void sub_28923()
{
    int Result;

    Result = 0;
    if ((l_U751 - 1) >= l_U755)
    {
        if ((l_U181[l_U751 - 1][l_U750]._fU24) == l_U7)
        {
            Result++;
            if ((l_U751 - 2) >= l_U755)
            {
                if ((l_U181[l_U751 - 2][l_U750]._fU24) == l_U7)
                {
                    Result++;
                }
            }
            if ((l_U750 + 1) <= l_U752)
            {
                if ((l_U181[l_U751 - 1][l_U750 + 1]._fU24) == l_U7)
                {
                    Result++;
                }
            }
            if ((l_U750 - 1) >= l_U753)
            {
                if ((l_U181[l_U751 - 1][l_U750 - 1]._fU24) == l_U7)
                {
                    Result++;
                }
            }
        }
    }
    if ((l_U751 + 1) <= l_U754)
    {
        if ((l_U181[l_U751 + 1][l_U750]._fU24) == l_U7)
        {
            Result++;
            if ((l_U751 + 2) <= l_U754)
            {
                if ((l_U181[l_U751 + 2][l_U750]._fU24) == l_U7)
                {
                    Result++;
                }
            }
            if ((l_U750 + 1) <= l_U752)
            {
                if ((l_U181[l_U751 + 1][l_U750 + 1]._fU24) == l_U7)
                {
                    Result++;
                }
            }
            if ((l_U750 - 1) >= l_U753)
            {
                if ((l_U181[l_U751 + 1][l_U750 - 1]._fU24) == l_U7)
                {
                    Result++;
                }
            }
        }
    }
    if ((l_U750 + 1) <= l_U752)
    {
        if ((l_U181[l_U751][l_U750 + 1]._fU24) == l_U7)
        {
            Result++;
            if ((l_U750 + 2) <= l_U752)
            {
                if ((l_U181[l_U751][l_U750 + 2]._fU24) == l_U7)
                {
                    Result++;
                }
            }
            if ((l_U751 - 1) >= l_U755)
            {
                if ((l_U181[l_U751 - 1][l_U750 + 1]._fU24) == l_U7)
                {
                    Result++;
                }
            }
            if ((l_U751 + 1) <= l_U754)
            {
                if ((l_U181[l_U751 + 1][l_U750 + 1]._fU24) == l_U7)
                {
                    Result++;
                }
            }
        }
    }
    if ((l_U750 - 1) >= l_U753)
    {
        if ((l_U181[l_U751][l_U750 - 1]._fU24) == l_U7)
        {
            Result++;
            if ((l_U750 - 2) >= l_U753)
            {
                if ((l_U181[l_U751][l_U750 - 2]._fU24) == l_U7)
                {
                    Result++;
                }
            }
            if ((l_U751 - 1) >= l_U755)
            {
                if ((l_U181[l_U751 - 1][l_U750 - 1]._fU24) == l_U7)
                {
                    Result++;
                }
            }
            if ((l_U751 + 1) <= l_U754)
            {
                if ((l_U181[l_U751 + 1][l_U750 - 1]._fU24) == l_U7)
                {
                    Result++;
                }
            }
        }
    }
    return Result;
}

void sub_29902()
{
    int Result;

    Result = 0;
    l_U9[l_U751][l_U750] = 1;
    if (l_U172)
    {
        ;
    }
    if ((l_U751 - 1) >= l_U755)
    {
        if ((l_U181[l_U751 - 1][l_U750]._fU24) == l_U7)
        {
            l_U9[l_U751 - 1][l_U750] = 1;
            Result++;
            if (l_U172)
            {
                ;
            }
            if ((l_U751 - 2) >= l_U755)
            {
                if ((l_U181[l_U751 - 2][l_U750]._fU24) == l_U7)
                {
                    l_U9[l_U751 - 2][l_U750] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
            if ((l_U750 + 1) <= l_U752)
            {
                if ((l_U181[l_U751 - 1][l_U750 + 1]._fU24) == l_U7)
                {
                    l_U9[l_U751 - 1][l_U750 + 1] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
            if ((l_U750 - 1) >= l_U753)
            {
                if ((l_U181[l_U751 - 1][l_U750 - 1]._fU24) == l_U7)
                {
                    l_U9[l_U751 - 1][l_U750 - 1] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
        }
    }
    if ((l_U751 + 1) <= l_U754)
    {
        if ((l_U181[l_U751 + 1][l_U750]._fU24) == l_U7)
        {
            l_U9[l_U751 + 1][l_U750] = 1;
            Result++;
            if (l_U172)
            {
                ;
            }
            if ((l_U751 + 2) <= l_U754)
            {
                if ((l_U181[l_U751 + 2][l_U750]._fU24) == l_U7)
                {
                    l_U9[l_U751 + 2][l_U750] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
            if ((l_U750 + 1) <= l_U752)
            {
                if ((l_U181[l_U751 + 1][l_U750 + 1]._fU24) == l_U7)
                {
                    l_U9[l_U751 + 1][l_U750 + 1] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
            if ((l_U750 - 1) >= l_U753)
            {
                if ((l_U181[l_U751 + 1][l_U750 - 1]._fU24) == l_U7)
                {
                    l_U9[l_U751 + 1][l_U750 - 1] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
        }
    }
    if ((l_U750 + 1) <= l_U752)
    {
        if ((l_U181[l_U751][l_U750 + 1]._fU24) == l_U7)
        {
            l_U9[l_U751][l_U750 + 1] = 1;
            Result++;
            if (l_U172)
            {
                ;
            }
            if ((l_U750 + 2) <= l_U752)
            {
                if ((l_U181[l_U751][l_U750 + 2]._fU24) == l_U7)
                {
                    l_U9[l_U751][l_U750 + 2] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
            if ((l_U751 - 1) >= l_U755)
            {
                if ((l_U181[l_U751 - 1][l_U750 + 1]._fU24) == l_U7)
                {
                    l_U9[l_U751 - 1][l_U750 + 1] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
            if ((l_U751 + 1) <= l_U754)
            {
                if ((l_U181[l_U751 + 1][l_U750 + 1]._fU24) == l_U7)
                {
                    l_U9[l_U751 + 1][l_U750 + 1] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
        }
    }
    if ((l_U750 - 1) >= l_U753)
    {
        if ((l_U181[l_U751][l_U750 - 1]._fU24) == l_U7)
        {
            l_U9[l_U751][l_U750 - 1] = 1;
            Result++;
            if (l_U172)
            {
                ;
            }
            if ((l_U750 - 2) >= l_U753)
            {
                if ((l_U181[l_U751][l_U750 - 2]._fU24) == l_U7)
                {
                    l_U9[l_U751][l_U750 - 2] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
            if ((l_U751 - 1) >= l_U755)
            {
                if ((l_U181[l_U751 - 1][l_U750 - 1]._fU24) == l_U7)
                {
                    l_U9[l_U751 - 1][l_U750 - 1] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
            if ((l_U751 + 1) <= l_U754)
            {
                if ((l_U181[l_U751 + 1][l_U750 - 1]._fU24) == l_U7)
                {
                    l_U9[l_U751 + 1][l_U750 - 1] = 1;
                    Result++;
                    if (l_U172)
                    {
                        ;
                    }
                }
            }
        }
    }
    return Result;
}

void sub_31466(int iParam0, int iParam1)
{
    unknown uVar4;
    float fVar5;

    if (DOES_OBJECT_EXIST( l_U181[iParam0][iParam1]._fU12 ))
    {
        GET_OBJECT_MODEL( l_U181[iParam0][iParam1]._fU12, ref uVar4 );
        GET_OBJECT_HEADING( l_U181[iParam0][iParam1]._fU12, ref fVar5 );
        if (fVar5 < (0.00000000 + 45.00000000))
        {
            fVar5 = 0.00000000;
        }
        else if (fVar5 < (90.00000000 + 45.00000000))
        {
            fVar5 = 90.00000000;
        }
        else if (fVar5 < (180.00000000 + 45))
        {
            fVar5 = 180.00000000;
        }
        else
        {
            fVar5 = 270.00000000;
        };;;
        l_U9[iParam0][iParam1] = 1;
        if (fVar5 == 90.00000000)
        {
            l_U9[iParam0][iParam1 + 1] = 1;
            l_U9[iParam0 + 1][iParam1] = 1;
            l_U9[iParam0 + 1][iParam1 + 1] = 1;
        }
        else if (fVar5 == 180.00000000)
        {
            l_U9[iParam0 - 1][iParam1] = 1;
            l_U9[iParam0 - 1][iParam1 + 1] = 1;
            l_U9[iParam0][iParam1 + 1] = 1;
        }
        else if (fVar5 == 0.00000000)
        {
            l_U9[iParam0][iParam1 - 1] = 1;
            l_U9[iParam0 + 1][iParam1 - 1] = 1;
            l_U9[iParam0 + 1][iParam1] = 1;
        }
        else
        {
            l_U9[iParam0 - 1][iParam1 - 1] = 1;
            l_U9[iParam0][iParam1 - 1] = 1;
            l_U9[iParam0 - 1][iParam1] = 1;
        };;;
    }
    l_U964++;
    return;
}

void sub_31975()
{
    l_U146 = GET_CURRENT_LANGUAGE();
    if ((l_U146 == 2) || (l_U146 == 0))
    {
        l_U1231 = 0.86000000;
        l_U1237 = 0.86000000;
        l_U1243 = 0.67000000;
        l_U1249 = 0.67000000;
        l_U1255 = 0.77999990;
        l_U1261 = 0.77999990;
    }
    else if (l_U146 == 1)
    {
        l_U1231 = 0.86000000;
        l_U1237 = 0.86000000;
        l_U1243 = 0.64000000;
        l_U1249 = 0.64000000;
        l_U1255 = 0.77999990;
        l_U1261 = 0.77999990;
    }
    else if (l_U146 == 3)
    {
        l_U1231 = 0.86000000;
        l_U1237 = 0.86000000;
        l_U1243 = 0.68000000;
        l_U1249 = 0.68000000;
        l_U1255 = 0.77999990;
        l_U1261 = 0.77999990;
    }
    else if (l_U146 == 4)
    {
        l_U1231 = 0.86000000;
        l_U1237 = 0.86000000;
        l_U1243 = 0.62000000;
        l_U1249 = 0.62000000;
        l_U1255 = 0.79500000;
        l_U1261 = 0.79500000;
    }
    else if (l_U146 == 5)
    {
        l_U1231 = 0.89000000;
        l_U1237 = 0.89000000;
        l_U1243 = 0.62000000;
        l_U1249 = 0.62000000;
        l_U1255 = 0.79500000;
        l_U1261 = 0.79500000;
    }
    else if (l_U146 == 6)
    {
        l_U1231 = 0.89000000;
        l_U1237 = 0.89000000;
        l_U1255 = 0.76500000;
        l_U1261 = 0.76500000;
        l_U1243 = 0.62000000;
        l_U1249 = 0.62000000;
    };;;;;;
    if ((l_U146 == 6) || (l_U146 == 0))
    {
        l_U1262 = 0.38500000;
        l_U1277 = 0.24500000;
        l_U1288 = 0.17800000;
        l_U1326 = 0.11100000;
    }
    else if (l_U146 == 1)
    {
        l_U1262 = 0.40000000;
        l_U1277 = 0.24500000;
        l_U1288 = 0.18700000;
        l_U1326 = 0.12000000;
    }
    else if (l_U146 == 2)
    {
        l_U1262 = 0.39500000;
        l_U1277 = 0.24500000;
        l_U1288 = 0.17800000;
        l_U1326 = 0.11100000;
    }
    else if (l_U146 == 3)
    {
        l_U1262 = 0.41200000;
        l_U1277 = 0.28000000;
        l_U1288 = 0.22500000;
        l_U1326 = 0.13900000;
    }
    else if (l_U146 == 4)
    {
        l_U1262 = 0.40200000;
        l_U1277 = 0.24500000;
        l_U1288 = 0.17800000;
        l_U1326 = 0.11100000;
    }
    else if (l_U146 == 5)
    {
        l_U1262 = 0.40200000;
        l_U1277 = 0.24500000;
        l_U1288 = 0.17800000;
        l_U1326 = 0.11100000;
    };;;;;;
    SET_WIDESCREEN_FORMAT( 3 );
    sub_32814();
    SET_WIDESCREEN_FORMAT( 3 );
    sub_33109();
    SET_WIDESCREEN_FORMAT( 2 );
    sub_33269();
    SET_WIDESCREEN_FORMAT( 2 );
    sub_35817();
    return;
}

void sub_32814()
{
    sub_13490( l_U1240, l_U1241 );
    SET_TEXT_RIGHT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1242, l_U1243 );
    DISPLAY_TEXT( l_U1238, l_U1239, ref l_U821 );
    sub_13490( l_U1246, l_U1247 );
    SET_TEXT_RIGHT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1248, l_U1249 );
    DISPLAY_TEXT_WITH_NUMBER( l_U1244, l_U1245, "PZ_NUMBER", l_U906 );
    sub_13490( l_U1252, l_U1253 );
    SET_TEXT_RIGHT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1254, l_U1255 );
    DISPLAY_TEXT( l_U1250, l_U1251, ref l_U825 );
    sub_13490( l_U1258, l_U1259 );
    SET_TEXT_RIGHT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1260, l_U1261 );
    DISPLAY_TEXT_WITH_NUMBER( l_U1256, l_U1257, "PZ_NUMBER", l_U905 );
    return;
}

void sub_33109()
{
    sub_13490( l_U1228, l_U1229 );
    SET_TEXT_RIGHT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1230, l_U1231 );
    DISPLAY_TEXT( l_U1226, l_U1227, ref l_U817 );
    sub_13490( l_U1234, l_U1235 );
    SET_TEXT_RIGHT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1236, l_U1237 );
    DISPLAY_TEXT_WITH_NUMBER( l_U1232, l_U1233, "PZ_NUMBER", l_U910 );
    return;
}

void sub_33269()
{
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    boolean bVar16;
    boolean bVar17;
    int iVar18;

    iVar2 = 90;
    iVar3 = 250;
    if ((# -NULL-0xc27bfa()) || (# -NULL-0xc27c84()))
    {
        iVar4 = 167;
        iVar5 = 4;
        iVar6 = 0;
        iVar7 = 77;
        iVar8 = 151;
        iVar9 = 5;
        iVar10 = 24;
        iVar11 = 72;
        iVar12 = 170;
        iVar13 = 179;
        iVar14 = 147;
        iVar15 = 0;
    }
    else
    {
        iVar4 = 204;
        iVar5 = 43;
        iVar6 = 71;
        iVar7 = 108;
        iVar8 = 130;
        iVar9 = 187;
        iVar10 = 220;
        iVar11 = 136;
        iVar12 = 186;
        iVar13 = 134;
        iVar14 = 178;
        iVar15 = 135;
    }
    sub_13490( l_U1328, l_U1329 );
    SET_TEXT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1330, l_U1331 );
    DISPLAY_TEXT( l_U1326, l_U1327, ref l_U837 );
    DRAW_SPRITE( l_U986, l_U1332, l_U1333, l_U1334, l_U1335, 0.00000000, 255, 255, 255, l_U1353 );
    if (l_U964 > 0)
    {
        if (l_U964 == 1)
        {
            DRAW_RECT( l_U1336, l_U1337, l_U1338, l_U1339, 250, 250, 250, l_U1352 );
        }
        else if (l_U964 == 2)
        {
            DRAW_RECT( l_U1340, l_U1341, l_U1342, l_U1343, 250, 250, 250, l_U1352 );
        }
        else if (l_U964 == 3)
        {
            DRAW_RECT( l_U1344, l_U1345, l_U1346, l_U1347, 250, 250, 250, l_U1352 );
        }
        else
        {
            DRAW_RECT( l_U1348, l_U1349, l_U1350, l_U1351, 250, 250, 250, l_U1352 );
        };;;
    }
    sub_13490( l_U1279, l_U1280 );
    SET_TEXT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1281, l_U1282 );
    DISPLAY_TEXT( l_U1277, l_U1278, ref l_U833 );
    if (l_U962 > 0)
    {
        sub_13490( l_U1285, l_U1286 );
        SET_TEXT_RIGHT_JUSTIFY( 1 );
        SET_TEXT_WRAP( l_U1287, l_U1288 );
        DISPLAY_TEXT_WITH_NUMBER( l_U1283, l_U1284, ref l_U841, l_U962 );
    }
    if ((l_U161) || ((l_U160) || ((l_U159) || (l_U158))))
    {
        if (l_U160)
        {
            DRAW_SPRITE( l_U977, l_U1289, l_U1290, l_U1291, l_U1292, 0.00000000, iVar4, iVar5, iVar6, iVar3 );
        }
        else
        {
            DRAW_SPRITE( l_U977, l_U1289, l_U1290, l_U1291, l_U1292, 0.00000000, iVar4, iVar5, iVar6, iVar2 );
        }
        if (l_U161)
        {
            DRAW_SPRITE( l_U978, l_U1293, l_U1294, l_U1295, l_U1296, 0.00000000, iVar7, iVar8, iVar9, iVar3 );
        }
        else
        {
            DRAW_SPRITE( l_U978, l_U1293, l_U1294, l_U1295, l_U1296, 0.00000000, iVar7, iVar8, iVar9, iVar2 );
        }
        if (l_U159)
        {
            DRAW_SPRITE( l_U979, l_U1297, l_U1298, l_U1299, l_U1300, 0.00000000, iVar10, iVar11, iVar12, iVar3 );
            bVar16 = false;
            if (bVar16)
            {
                sub_34229();
            }
        }
        else
        {
            DRAW_SPRITE( l_U979, l_U1297, l_U1298, l_U1299, l_U1300, 0.00000000, iVar10, iVar11, iVar12, iVar2 );
        }
        if (l_U158)
        {
            DRAW_SPRITE( l_U980, l_U1301, l_U1302, l_U1303, l_U1304, 0.00000000, iVar13, iVar14, iVar15, iVar3 );
        }
        else
        {
            DRAW_SPRITE( l_U980, l_U1301, l_U1302, l_U1303, l_U1304, 0.00000000, iVar13, iVar14, iVar15, iVar2 );
        }
    }
    else if (l_U962 == 0)
    {
        DRAW_SPRITE( l_U977, l_U1289, l_U1290, l_U1291, l_U1292, 0.00000000, iVar4, iVar5, iVar6, iVar2 );
        DRAW_SPRITE( l_U978, l_U1293, l_U1294, l_U1295, l_U1296, 0.00000000, iVar7, iVar8, iVar9, iVar2 );
        DRAW_SPRITE( l_U979, l_U1297, l_U1298, l_U1299, l_U1300, 0.00000000, iVar10, iVar11, iVar12, iVar2 );
        DRAW_SPRITE( l_U980, l_U1301, l_U1302, l_U1303, l_U1304, 0.00000000, iVar13, iVar14, iVar15, iVar2 );
    }
    else
    {
        DRAW_SPRITE( l_U977, l_U1289, l_U1290, l_U1291, l_U1292, 0.00000000, iVar4, iVar5, iVar6, iVar3 );
        DRAW_SPRITE( l_U978, l_U1293, l_U1294, l_U1295, l_U1296, 0.00000000, iVar7, iVar8, iVar9, iVar3 );
        DRAW_SPRITE( l_U979, l_U1297, l_U1298, l_U1299, l_U1300, 0.00000000, iVar10, iVar11, iVar12, iVar3 );
        DRAW_SPRITE( l_U980, l_U1301, l_U1302, l_U1303, l_U1304, 0.00000000, iVar13, iVar14, iVar15, iVar3 );
    }
    if (NOT (l_U962 == 3))
    {
        if (l_U964 > 4)
        {
            l_U964 = 4;
        }
    }
    else
    {
        l_U964 = 0;
    }
    if (l_U965 < l_U964)
    {
        bVar17 = true;
    }
    else
    {
        bVar17 = false;
    }
    if (NOT (l_U962 == 3))
    {
        if (bVar17)
        {
            l_U965 = 0;
            for ( l_U759 = 0; l_U759 < 4; l_U759++ )
            {
                if (NOT l_U954[l_U759])
                {
                    if (l_U759 < l_U964)
                    {
                        l_U954[l_U759] = 1;
                        l_U965++;
                    }
                    else
                    {
                        l_U759 = 4;
                    }
                }
                else
                {
                    l_U965++;
                }
            }
            if (l_U965 == 4)
            {
                l_U962++;
                if (l_U962 > 3)
                {
                    l_U962 = 3;
                }
                iVar18 = l_U962 - 1;
                if (iVar18 <= 0)
                {
                    iVar18 = 0;
                }
                PLAY_SOUND_FROM_POSITION( -1, l_U902, l_U887 );
                for ( l_U759 = 3; l_U759 >= 0; l_U759-- )
                {
                    l_U954[l_U759] = 0;
                }
                l_U964 = 0;
                l_U965 = 0;
            }
        }
    }
    return;
}

void sub_34229()
{
    int iVar2;
    int iVar3;
    int iVar4;
    boolean bVar5;
    int iVar6;
    int[6] iVar7;
    int[6] iVar14;
    int[6] iVar21;
    int iVar28;
    int iVar29;

    array(ref iVar7, 6);
    array(ref iVar14, 6);
    array(ref iVar21, 6);
    iVar7[0] = 250;
    iVar14[0] = 0;
    iVar21[0] = 0;
    iVar7[1] = 0;
    iVar14[1] = 0;
    iVar21[1] = 250;
    iVar7[2] = 0;
    iVar14[2] = 250;
    iVar21[2] = 0;
    iVar7[3] = 250;
    iVar14[3] = 250;
    iVar21[3] = 0;
    iVar7[4] = 250;
    iVar14[4] = 0;
    iVar21[4] = 250;
    iVar7[5] = 250;
    iVar14[5] = 125;
    iVar21[5] = 0;
    iVar6 = l_U8;
    if (iVar6 >= 6)
    {
        iVar6 = 0;
    }
    iVar4 = 750;
    l_U159 = 1;
    if (l_U910 < 5)
    {
        iVar3 = 3;
    }
    else if (l_U910 < 10)
    {
        iVar3 = 4;
    }
    else if (l_U910 < 15)
    {
        iVar3 = 5;
    }
    else
    {
        iVar3 = 6;
    };;;
    GET_GAME_TIMER( ref l_U765 );
    l_U766 = l_U765 - l_U775;
    if (l_U766 >= iVar4)
    {
        GENERATE_RANDOM_INT_IN_RANGE( 0, iVar3, ref iVar2 );
        iVar2 = iVar6;
        iVar2++;
        if (iVar2 >= iVar3)
        {
            iVar2 = 0;
        }
        l_U8 = iVar2;
        if (NOT (l_U8 == iVar6))
        {
            iVar6 = l_U8;
            GET_GAME_TIMER( ref l_U775 );
        }
    }
    if (IS_CONTROL_PRESSED( 2, 77 ))
    {
        if (NOT bVar5)
        {
            l_U159 = 0;
        }
    }
    else
    {
        bVar5 = false;
    }
    iVar28 = 0;
    SET_WIDESCREEN_FORMAT( 2 );
    while (iVar28 < iVar3)
    {
        DRAW_SPRITE( l_U981, l_U1305[iVar28], l_U1312[iVar28], l_U1319, l_U1320, 0.00000000, 0, 0, 0, 250 );
        if (iVar28 == l_U8)
        {
            iVar29 = 250;
        }
        else
        {
            iVar29 = 70;
        }
        DRAW_SPRITE( l_U981, l_U1305[iVar28], l_U1312[iVar28], l_U1319, l_U1320, 0.00000000, iVar7[iVar28], iVar14[iVar28], iVar21[iVar28], iVar29 );
        iVar28++;
    }
    DRAW_SPRITE( l_U985, l_U1321, l_U1322, l_U1323, l_U1324, l_U1325, 255, 255, 255, 250 );
    return;
}

void sub_35817()
{
    int[6] iVar2;
    int[6] iVar9;
    int[6] iVar16;

    array(ref iVar2, 6);
    array(ref iVar9, 6);
    array(ref iVar16, 6);
    sub_13490( l_U1264, l_U1265 );
    SET_TEXT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1266, l_U1267 );
    DISPLAY_TEXT( l_U1262, l_U1263, ref l_U829 );
    iVar2[0] = 250;
    iVar9[0] = 0;
    iVar16[0] = 0;
    iVar2[1] = 0;
    iVar9[1] = 0;
    iVar16[1] = 250;
    iVar2[2] = 0;
    iVar9[2] = 250;
    iVar16[2] = 0;
    iVar2[3] = 250;
    iVar9[3] = 250;
    iVar16[3] = 0;
    iVar2[4] = 250;
    iVar9[4] = 0;
    iVar16[4] = 250;
    iVar2[5] = 250;
    iVar9[5] = 125;
    iVar16[5] = 0;
    DRAW_SPRITE( l_U987, l_U1268, l_U1269, l_U1270, l_U1271, 0.00000000, iVar2[l_U638._fU56], iVar9[l_U638._fU56], iVar16[l_U638._fU56], l_U1276 );
    DRAW_SPRITE( l_U987, l_U1272, l_U1273, l_U1274, l_U1275, 0.00000000, iVar2[l_U638._fU60], iVar9[l_U638._fU60], iVar16[l_U638._fU60], l_U1276 );
    return;
}

void sub_36226()
{
    if (l_U166)
    {
        SET_WIDESCREEN_FORMAT( 3 );
        INIT_FRONTEND_HELPER_TEXT();
        DRAW_FRONTEND_HELPER_TEXT( "BT_BACK", ref l_U849, 0 );
        if (sub_36282())
        {
            if (NOT IS_SCREEN_FADING())
            {
                if (NOT l_U154)
                {
                    if (sub_36366())
                    {
                        sub_36413( 1 );
                    }
                    CLEAR_PRINTS();
                    CLEAR_HELP();
                    l_U145 = 0;
                    sub_11223( 0, 1 );
                    sub_10451();
                    l_U154 = 1;
                    l_U151 = 1;
                    l_U166 = 0;
                    l_U145 = 1;
                }
            }
            else
            {
                DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
            }
        }
        else
        {
            l_U154 = 0;
        }
    }
    if (l_U151)
    {
        SET_CAM_ACTIVE( l_U670, 1 );
        SET_CAM_PROPAGATE( l_U670, 1 );
        SET_CAM_ACTIVE( l_U671, 1 );
        SET_CAM_PROPAGATE( l_U671, 0 );
    }
    return;
}

int sub_36282()
{
    if ((IS_CONTROL_PRESSED( 2, 78 )) || (IS_CONTROL_PRESSED( 0, 78 )))
    {
        return 1;
        break;
    }
    return 0;
}

int sub_36366()
{
    if (g_U9241._fU148[1] == 0)
    {
        return 0;
    }
    return 1;
}

void sub_36413(int iParam0)
{
    int I;

    for ( I = 0; I <= 1; I++ )
    {
        if ((iParam0 == 2) || (I == iParam0))
        {
            sub_36451( I );
            g_U9241._fU148[I] = 0;
            g_U9241._fU112[I] = -1;
            StrCopy( ref g_U9241._fU28[I], "", 16 );
        }
    }
    return;
}

void sub_36451(int iParam0)
{
    if (iParam0 == 0)
    {
        CLEAR_THIS_PRINT( ref g_U9241._fU64[0] );
    }
    else
    {
        sub_36503( ref g_U9241._fU64[1] );
    }
    return;
}

void sub_36503(unknown uParam0)
{
    if (DOES_TEXT_LABEL_EXIST( uParam0 ))
    {
        if (IS_THIS_HELP_MESSAGE_BEING_DISPLAYED( uParam0 ))
        {
            CLEAR_HELP();
        }
    }
    return;
}

void sub_36774()
{
    boolean bVar2;
    boolean bVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    unknown uVar7;

    bVar2 = true;
    bVar3 = false;
    iVar4 = 0;
    if (NOT l_U166)
    {
        iVar5 = 3;
    }
    else
    {
        iVar5 = 5;
    }
    GET_GAME_TIMER( ref iVar6 );
    while (iVar4 < iVar5)
    {
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - iVar6;
        if (l_U166)
        {
            if (l_U766 >= 300)
            {
                if (bVar2)
                {
                    bVar2 = false;
                }
                else
                {
                    bVar2 = true;
                }
                GET_GAME_TIMER( ref iVar6 );
                bVar3 = true;
                iVar4++;
            }
            else
            {
                bVar3 = false;
            }
            for ( l_U750 = 0; l_U750 < 9; l_U750++ )
            {
                for ( l_U751 = 0; l_U751 < 6; l_U751++ )
                {
                    if (l_U9[l_U751][l_U750] == 1)
                    {
                        if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                        {
                            if (bVar3)
                            {
                                if (NOT bVar2)
                                {
                                    SET_OBJECT_VISIBLE( l_U181[l_U751][l_U750]._fU12, 0 );
                                }
                                else
                                {
                                    SET_OBJECT_VISIBLE( l_U181[l_U751][l_U750]._fU12, 1 );
                                }
                            }
                        }
                    }
                }
            }
            sub_36226();
        }
        else
        {
            l_U766 = l_U765 - iVar6;
            if (l_U766 >= 75)
            {
                if (bVar2)
                {
                    bVar2 = false;
                }
                else
                {
                    bVar2 = true;
                }
                GET_GAME_TIMER( ref iVar6 );
                bVar3 = true;
                iVar4++;
            }
            else
            {
                bVar3 = false;
            }
        }
        WAIT( 0 );
        if (NOT l_U166)
        {
            sub_31975();
        }
        else
        {
            sub_36226();
        }
    }
    for ( l_U750 = 0; l_U750 < 9; l_U750++ )
    {
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            if (l_U9[l_U751][l_U750] == 1)
            {
                if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                {
                    uVar7 = l_U866[l_U181[l_U751][l_U750]._fU24];
                    TRIGGER_PTFX( uVar7, l_U181[l_U751][l_U750]._fU0, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                    l_U896 = 1 + l_U896;
                    l_U890 = GET_SOUND_ID();
                    PLAY_SOUND_FROM_POSITION( l_U890, l_U897, l_U887 );
                    l_U892 = (TO_FLOAT( l_U750 )) / 9;
                    l_U891 = (((TO_FLOAT( l_U751 )) / 6) * 2) - 1;
                    SET_VARIABLE_ON_SOUND( l_U890, l_U895, l_U896 );
                    SET_VARIABLE_ON_SOUND( l_U890, l_U893, l_U891 );
                    SET_VARIABLE_ON_SOUND( l_U890, l_U894, l_U892 );
                    RELEASE_SOUND_ID( l_U890 );
                    l_U766 = 0;
                    GET_GAME_TIMER( ref iVar6 );
                    while (l_U766 < 50)
                    {
                        GET_GAME_TIMER( ref l_U765 );
                        l_U766 = l_U765 - iVar6;
                        WAIT( 0 );
                        if (NOT l_U166)
                        {
                            sub_31975();
                        }
                        else
                        {
                            sub_36226();
                        }
                    }
                    if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                    {
                        DELETE_OBJECT( ref l_U181[l_U751][l_U750]._fU12 );
                    }
                    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
                }
                l_U181[l_U751][l_U750]._fU24 = 6;
                l_U181[l_U751][l_U750]._fU28 = 0;
                l_U9[l_U751][l_U750] = 0;
            }
        }
    }
    return;
}

void sub_37898()
{
    boolean bVar2;
    boolean bVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    float fVar7;
    int iVar8;

    bVar2 = true;
    while (bVar2)
    {
        bVar2 = false;
        for ( l_U750 = 1; l_U750 < 9; l_U750++ )
        {
            for ( l_U751 = 0; l_U751 < 6; l_U751++ )
            {
                if (l_U181[l_U751][l_U750]._fU24 < 6)
                {
                    if ((l_U181[l_U751][l_U750 - 1]._fU24) == 6)
                    {
                        if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                        {
                            DELETE_OBJECT( ref l_U181[l_U751][l_U750]._fU12 );
                            MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
                        }
                        if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750 - 1]._fU12 ))
                        {
                            DELETE_OBJECT( ref l_U181[l_U751][l_U750 - 1]._fU12 );
                            MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750 - 1]._fU12 );
                        }
                        CREATE_OBJECT_NO_OFFSET( l_U783[l_U181[l_U751][l_U750]._fU24], l_U181[l_U751][l_U750]._fU0._fU0, l_U181[l_U751][l_U750 - 1]._fU0._fU4, l_U181[l_U751][l_U750 - 1]._fU0._fU8, ref l_U181[l_U751][l_U750 - 1]._fU12, 1 );
                        SET_OBJECT_HEADING( l_U181[l_U751][l_U750 - 1]._fU12, 0.00000000 );
                        SET_OBJECT_COLLISION( l_U181[l_U751][l_U750 - 1]._fU12, 0 );
                        FREEZE_OBJECT_POSITION( l_U181[l_U751][l_U750 - 1]._fU12, 1 );
                        l_U181[l_U751][l_U750 - 1]._fU24 = l_U181[l_U751][l_U750]._fU24;
                        l_U181[l_U751][l_U750 - 1]._fU28 = 1;
                        l_U181[l_U751][l_U750]._fU24 = 6;
                        l_U181[l_U751][l_U750]._fU28 = 0;
                        bVar2 = true;
                    }
                }
                else if (l_U172)
                {
                    if (NOT (l_U181[l_U751][l_U750]._fU24 == 6))
                    {
                        bVar3 = false;
                        if ((l_U181[l_U751][l_U750 - 1]._fU24) == 6)
                        {
                            if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                            {
                                GET_OBJECT_HEADING( l_U181[l_U751][l_U750]._fU12, ref fVar7 );
                            }
                            if (fVar7 < (0.00000000 + 45.00000000))
                            {
                                fVar7 = 0.00000000;
                            }
                            else if (fVar7 < (90.00000000 + 45.00000000))
                            {
                                fVar7 = 90.00000000;
                            }
                            else if (fVar7 < (180.00000000 + 45))
                            {
                                fVar7 = 180.00000000;
                            }
                            else
                            {
                                fVar7 = 270.00000000;
                            };;;
                            if (fVar7 == 90.00000000)
                            {
                                if ((l_U751 + 1) <= l_U754)
                                {
                                    if ((l_U181[l_U751 + 1][l_U750 - 1]._fU24) == 6)
                                    {
                                        bVar3 = true;
                                    }
                                }
                            }
                        }
                        if (bVar3)
                        {
                            if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                            {
                                GET_OBJECT_MODEL( l_U181[l_U751][l_U750]._fU12, ref uVar4 );
                                DELETE_OBJECT( ref l_U181[l_U751][l_U750]._fU12 );
                                MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
                            }
                            if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750 - 1]._fU12 ))
                            {
                                DELETE_OBJECT( ref l_U181[l_U751][l_U750 - 1]._fU12 );
                                MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750 - 1]._fU12 );
                            }
                            CREATE_OBJECT_NO_OFFSET( uVar4, l_U181[l_U751][l_U750]._fU0._fU0, l_U181[l_U751][l_U750 - 1]._fU0._fU4, l_U181[l_U751][l_U750 - 1]._fU0._fU8, ref l_U181[l_U751][l_U750 - 1]._fU12, 1 );
                            SET_OBJECT_HEADING( l_U181[l_U751][l_U750 - 1]._fU12, 90.00000000 );
                            SET_OBJECT_COLLISION( l_U181[l_U751][l_U750 - 1]._fU12, 0 );
                            FREEZE_OBJECT_POSITION( l_U181[l_U751][l_U750 - 1]._fU12, 1 );
                            l_U181[l_U751][l_U750 - 1]._fU24 = l_U181[l_U751][l_U750]._fU24;
                            l_U181[l_U751][l_U750 - 1]._fU28 = 1;
                            l_U181[l_U751][l_U750]._fU24 = 6;
                            l_U181[l_U751][l_U750]._fU28 = 0;
                            if (DOES_OBJECT_EXIST( l_U181[l_U751 + 1][l_U750]._fU12 ))
                            {
                                GET_OBJECT_MODEL( l_U181[l_U751 + 1][l_U750]._fU12, ref uVar4 );
                                DELETE_OBJECT( ref l_U181[l_U751 + 1][l_U750]._fU12 );
                                MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751 + 1][l_U750]._fU12 );
                            }
                            if (DOES_OBJECT_EXIST( l_U181[l_U751 + 1][l_U750 - 1]._fU12 ))
                            {
                                DELETE_OBJECT( ref l_U181[l_U751 + 1][l_U750 - 1]._fU12 );
                                MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751 + 1][l_U750 - 1]._fU12 );
                            }
                            CREATE_OBJECT_NO_OFFSET( uVar4, l_U181[l_U751 + 1][l_U750]._fU0._fU0, l_U181[l_U751 + 1][l_U750 - 1]._fU0._fU4, l_U181[l_U751 + 1][l_U750 - 1]._fU0._fU8, ref l_U181[l_U751 + 1][l_U750 - 1]._fU12, 1 );
                            SET_OBJECT_HEADING( l_U181[l_U751 + 1][l_U750 - 1]._fU12, 180.00000000 );
                            SET_OBJECT_COLLISION( l_U181[l_U751 + 1][l_U750 - 1]._fU12, 0 );
                            FREEZE_OBJECT_POSITION( l_U181[l_U751 + 1][l_U750 - 1]._fU12, 1 );
                            l_U181[l_U751 + 1][l_U750 - 1]._fU24 = l_U181[l_U751 + 1][l_U750]._fU24;
                            l_U181[l_U751 + 1][l_U750 - 1]._fU28 = 1;
                            l_U181[l_U751 + 1][l_U750]._fU24 = 6;
                            l_U181[l_U751 + 1][l_U750]._fU28 = 0;
                            if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750 + 1]._fU12 ))
                            {
                                GET_OBJECT_MODEL( l_U181[l_U751][l_U750 + 1]._fU12, ref uVar4 );
                                DELETE_OBJECT( ref l_U181[l_U751][l_U750 + 1]._fU12 );
                                MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750 + 1]._fU12 );
                            }
                            if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                            {
                                DELETE_OBJECT( ref l_U181[l_U751][l_U750]._fU12 );
                                MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
                            }
                            CREATE_OBJECT_NO_OFFSET( uVar4, l_U181[l_U751][l_U750 + 1]._fU0._fU0, l_U181[l_U751][l_U750]._fU0._fU4, l_U181[l_U751][l_U750]._fU0._fU8, ref l_U181[l_U751][l_U750]._fU12, 1 );
                            SET_OBJECT_HEADING( l_U181[l_U751][l_U750]._fU12, 0.00000000 );
                            SET_OBJECT_COLLISION( l_U181[l_U751][l_U750]._fU12, 0 );
                            FREEZE_OBJECT_POSITION( l_U181[l_U751][l_U750]._fU12, 1 );
                            l_U181[l_U751][l_U750]._fU24 = l_U181[l_U751][l_U750 + 1]._fU24;
                            l_U181[l_U751][l_U750]._fU28 = 1;
                            l_U181[l_U751][l_U750 + 1]._fU24 = 6;
                            l_U181[l_U751][l_U750 + 1]._fU28 = 0;
                            if (DOES_OBJECT_EXIST( l_U181[l_U751 + 1][l_U750 + 1]._fU12 ))
                            {
                                GET_OBJECT_MODEL( l_U181[l_U751 + 1][l_U750 + 1]._fU12, ref uVar4 );
                                DELETE_OBJECT( ref l_U181[l_U751 + 1][l_U750 + 1]._fU12 );
                                MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751 + 1][l_U750 + 1]._fU12 );
                            }
                            if (DOES_OBJECT_EXIST( l_U181[l_U751 + 1][l_U750]._fU12 ))
                            {
                                DELETE_OBJECT( ref l_U181[l_U751 + 1][l_U750]._fU12 );
                                MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751 + 1][l_U750]._fU12 );
                            }
                            CREATE_OBJECT_NO_OFFSET( uVar4, l_U181[l_U751 + 1][l_U750 + 1]._fU0._fU0, l_U181[l_U751 + 1][l_U750]._fU0._fU4, l_U181[l_U751 + 1][l_U750]._fU0._fU8, ref l_U181[l_U751 + 1][l_U750]._fU12, 1 );
                            SET_OBJECT_HEADING( l_U181[l_U751 + 1][l_U750]._fU12, 270.00000000 );
                            SET_OBJECT_COLLISION( l_U181[l_U751 + 1][l_U750]._fU12, 0 );
                            FREEZE_OBJECT_POSITION( l_U181[l_U751 + 1][l_U750]._fU12, 1 );
                            l_U181[l_U751 + 1][l_U750]._fU24 = l_U181[l_U751 + 1][l_U750 + 1]._fU24;
                            l_U181[l_U751 + 1][l_U750]._fU28 = 1;
                            l_U181[l_U751 + 1][l_U750 + 1]._fU24 = 6;
                            l_U181[l_U751 + 1][l_U750 + 1]._fU28 = 0;
                            bVar2 = true;
                        }
                    }
                }
            }
        }
        if (bVar2)
        {
            l_U766 = 0;
            GET_GAME_TIMER( ref iVar8 );
            while (l_U766 < 160)
            {
                GET_GAME_TIMER( ref l_U765 );
                l_U766 = l_U765 - iVar8;
                if (l_U166)
                {
                    ;
                }
                WAIT( 0 );
                if (NOT l_U166)
                {
                    sub_31975();
                }
                else
                {
                    sub_36226();
                }
            }
        }
    }
    return;
}

void sub_41567()
{
    if (l_U962 > 0)
    {
        if (NOT l_U158)
        {
            if (((IS_CONTROL_PRESSED( 2, 116 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 77 )) AND (IS_USING_CONTROLLER())))
            {
                if (NOT l_U154)
                {
                    PLAY_SOUND_FROM_POSITION( -1, l_U903, l_U887 );
                    sub_41674();
                    l_U157 = 1;
                }
            }
            else if (((IS_CONTROL_PRESSED( 2, 117 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 2 )) AND (IS_USING_CONTROLLER())))
            {
                if (NOT l_U959)
                {
                    PLAY_SOUND_FROM_POSITION( -1, l_U903, l_U887 );
                    sub_42539();
                    l_U157 = 1;
                }
            }
            else if (((IS_CONTROL_PRESSED( 2, 118 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 3 )) AND (IS_USING_CONTROLLER())))
            {
                if (NOT l_U961)
                {
                    PLAY_SOUND_FROM_POSITION( -1, l_U903, l_U887 );
                    sub_43865();
                    l_U157 = 1;
                }
            }
            else if (((IS_CONTROL_PRESSED( 2, 115 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 78 )) AND (IS_USING_CONTROLLER())))
            {
                if (NOT l_U960)
                {
                    PLAY_SOUND_FROM_POSITION( -1, l_U903, l_U887 );
                    sub_43985();
                    l_U157 = 1;
                }
            };;;;
        }
    }
    if (l_U157)
    {
        l_U157 = 0;
        l_U962--;
        if (l_U962 < 0)
        {
            l_U962 = 0;
        }
        if (l_U962 == 0)
        {
            ;
        }
        l_U154 = 1;
        l_U959 = 1;
        l_U960 = 1;
        l_U961 = 1;
    }
    else if (((IS_CONTROL_PRESSED( 2, 116 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 77 )) AND (IS_USING_CONTROLLER())))
    {
        l_U154 = 1;
    }
    else
    {
        l_U154 = 0;
    }
    if (((IS_CONTROL_PRESSED( 2, 117 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 2 )) AND (IS_USING_CONTROLLER())))
    {
        l_U959 = 1;
    }
    else
    {
        l_U959 = 0;
    }
    if (((IS_CONTROL_PRESSED( 2, 115 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 78 )) AND (IS_USING_CONTROLLER())))
    {
        l_U960 = 1;
    }
    else
    {
        l_U960 = 0;
    }
    if (((IS_CONTROL_PRESSED( 2, 118 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 3 )) AND (IS_USING_CONTROLLER())))
    {
        l_U961 = 1;
    }
    else
    {
        l_U961 = 0;
    }
    return;
}

void sub_41674()
{
    int iVar2;
    float fVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;

    iVar4 = 2;
    iVar5 = 4;
    iVar6 = 0;
    iVar7 = 9;
    l_U161 = 1;
    for ( l_U750 = iVar6; l_U750 < iVar7; l_U750++ )
    {
        for ( l_U751 = iVar4; l_U751 < iVar5; l_U751++ )
        {
            if (l_U181[l_U751][l_U750]._fU24 < 6)
            {
                l_U9[l_U751][l_U750] = 1;
                iVar2++;
            }
            else if (l_U181[l_U751][l_U750]._fU24 > 6)
            {
                if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                {
                    GET_OBJECT_HEADING( l_U181[l_U751][l_U750]._fU12, ref fVar3 );
                }
                if (fVar3 < (0.00000000 + 45.00000000))
                {
                    fVar3 = 0.00000000;
                }
                else if (fVar3 < (90.00000000 + 45.00000000))
                {
                    fVar3 = 90.00000000;
                }
                else if (fVar3 < (180.00000000 + 45))
                {
                    fVar3 = 180.00000000;
                }
                else
                {
                    fVar3 = 270.00000000;
                };;;
                if (fVar3 == 90.00000000)
                {
                    l_U9[l_U751][l_U750 + 1] = 1;
                    l_U9[l_U751 + 1][l_U750] = 1;
                    l_U9[l_U751 + 1][l_U750 + 1] = 1;
                }
                else if (fVar3 == 180.00000000)
                {
                    l_U9[l_U751 - 1][l_U750] = 1;
                    l_U9[l_U751 - 1][l_U750 + 1] = 1;
                    l_U9[l_U751][l_U750 + 1] = 1;
                }
                else if (fVar3 == 0.00000000)
                {
                    l_U9[l_U751][l_U750 - 1] = 1;
                    l_U9[l_U751 + 1][l_U750 - 1] = 1;
                    l_U9[l_U751 + 1][l_U750] = 1;
                }
                else
                {
                    l_U9[l_U751 - 1][l_U750 - 1] = 1;
                    l_U9[l_U751][l_U750 - 1] = 1;
                    l_U9[l_U751 - 1][l_U750] = 1;
                };;;
                l_U9[l_U751][l_U750] = 1;
                iVar2++;
            }
        }
    }
    if (iVar2 > 0)
    {
        sub_36774();
        sub_37898();
        l_U908 = iVar2;
        l_U908 *= l_U911;
        l_U906 += l_U908;
        while (sub_26212())
        {
            WAIT( 0 );
            sub_31975();
        }
    }
    l_U161 = 0;
    return;
}

void sub_42539()
{
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    boolean bVar6;
    boolean bVar7;
    int iVar8;
    int[6] iVar9;
    int[6] iVar16;
    int[6] iVar23;
    int I;
    int iVar31;

    bVar6 = true;
    array(ref iVar9, 6);
    array(ref iVar16, 6);
    array(ref iVar23, 6);
    I = 0;
    iVar9[0] = 250;
    iVar16[0] = 0;
    iVar23[0] = 0;
    iVar9[1] = 0;
    iVar16[1] = 0;
    iVar23[1] = 250;
    iVar9[2] = 0;
    iVar16[2] = 250;
    iVar23[2] = 0;
    iVar9[3] = 250;
    iVar16[3] = 250;
    iVar23[3] = 0;
    iVar9[4] = 250;
    iVar16[4] = 0;
    iVar23[4] = 250;
    iVar9[5] = 250;
    iVar16[5] = 125;
    iVar23[5] = 0;
    iVar8 = 6;
    l_U775 = 0;
    iVar5 = 750;
    bVar6 = true;
    bVar7 = false;
    l_U159 = 1;
    if (l_U910 < 5)
    {
        iVar4 = 3;
    }
    else if (l_U910 < 10)
    {
        iVar4 = 4;
    }
    else if (l_U910 < 15)
    {
        iVar4 = 5;
    }
    else
    {
        iVar4 = 6;
    };;;
    iVar8 = l_U8;
    while (NOT bVar7)
    {
        WAIT( 0 );
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - l_U775;
        if (l_U766 >= iVar5)
        {
            GENERATE_RANDOM_INT_IN_RANGE( 0, iVar4, ref iVar3 );
            iVar3 = iVar8;
            iVar3++;
            if (iVar3 >= iVar4)
            {
                iVar3 = 0;
            }
            l_U8 = iVar3;
            if (NOT (l_U8 == iVar8))
            {
                iVar8 = l_U8;
                GET_GAME_TIMER( ref l_U775 );
            }
        }
        if (((IS_CONTROL_PRESSED( 2, 117 )) AND (NOT IS_USING_CONTROLLER())) || ((IS_CONTROL_PRESSED( 2, 2 )) AND (IS_USING_CONTROLLER())))
        {
            if (NOT bVar6)
            {
                bVar7 = true;
            }
        }
        else
        {
            bVar6 = false;
        }
        sub_31975();
        SET_WIDESCREEN_FORMAT( 2 );
        for ( I = 0; I < iVar4; I++ )
        {
            DRAW_SPRITE( l_U981, l_U1305[I], l_U1312[I], l_U1319, l_U1320, 0.00000000, 0, 0, 0, 250 );
            if (I == l_U8)
            {
                iVar31 = 250;
            }
            else
            {
                iVar31 = 70;
            }
            DRAW_SPRITE( l_U981, l_U1305[I], l_U1312[I], l_U1319, l_U1320, 0.00000000, iVar9[I], iVar16[I], iVar23[I], iVar31 );
        }
        DRAW_SPRITE( l_U985, l_U1321, l_U1322, l_U1323, l_U1324, l_U1325, 255, 255, 255, 250 );
        sub_43244();
        if (l_U4 == 5)
        {
            bVar7 = true;
        }
    }
    iVar2 = 0;
    for ( l_U750 = 0; l_U750 < 9; l_U750++ )
    {
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            if (l_U181[l_U751][l_U750]._fU24 == l_U8)
            {
                l_U9[l_U751][l_U750] = 1;
                iVar2++;
            }
        }
    }
    if (iVar2 > 0)
    {
        sub_36774();
        sub_37898();
        l_U908 = iVar2;
        l_U908 *= l_U911;
        l_U906 += l_U908;
        while (sub_26212())
        {
            WAIT( 0 );
            sub_31975();
        }
    }
    l_U159 = 0;
    return;
}

void sub_43244()
{
    if (IS_CONTROL_PRESSED( 2, 23 ))
    {
        if (NOT l_U170)
        {
            if (sub_36366())
            {
                sub_36413( 1 );
            }
            CLEAR_HELP();
            PRINT_HELP_FOREVER( ref l_U861 );
            l_U162 = 0;
            l_U170 = 1;
            while (NOT l_U162)
            {
                WAIT( 0 );
                if (sub_43343())
                {
                    l_U162 = 1;
                    l_U959 = 1;
                    l_U960 = 1;
                    l_U961 = 1;
                    l_U154 = 1;
                    CLEAR_HELP();
                }
                if (IS_CONTROL_PRESSED( 2, 23 ))
                {
                    if (NOT l_U170)
                    {
                        l_U162 = 1;
                        CLEAR_HELP();
                        l_U170 = 1;
                        l_U4 = 5;
                        sub_19123();
                    }
                }
                else
                {
                    l_U170 = 0;
                }
            }
            l_U170 = 1;
        }
    }
    else
    {
        l_U170 = 0;
    }
    return;
}

int sub_43343()
{
    if ((IS_CONTROL_JUST_PRESSED( 2, 77 )) || (IS_CONTROL_JUST_PRESSED( 0, 77 )))
    {
        return 1;
        break;
    }
    return 0;
}

void sub_43865()
{
    GET_GAME_TIMER( ref l_U773 );
    l_U158 = 1;
    return;
}

void sub_43985()
{
    int iVar2;
    int iVar3;
    float fVar4;

    iVar2 = 3;
    iVar3 = 0;
    l_U160 = 1;
    for ( l_U750 = 0; l_U750 < iVar2; l_U750++ )
    {
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            if (l_U181[l_U751][l_U750]._fU24 < 6)
            {
                l_U9[l_U751][l_U750] = 1;
                iVar3++;
            }
            else if (l_U181[l_U751][l_U750]._fU24 > 6)
            {
                if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
                {
                    GET_OBJECT_HEADING( l_U181[l_U751][l_U750]._fU12, ref fVar4 );
                }
                if (fVar4 < (0.00000000 + 45.00000000))
                {
                    fVar4 = 0.00000000;
                }
                else if (fVar4 < (90.00000000 + 45.00000000))
                {
                    fVar4 = 90.00000000;
                }
                else if (fVar4 < (180.00000000 + 45))
                {
                    fVar4 = 180.00000000;
                }
                else
                {
                    fVar4 = 270.00000000;
                };;;
                if ((fVar4 == 270.00000000) || (fVar4 == 0.00000000))
                {
                    l_U9[l_U751][l_U750] = 1;
                    l_U9[l_U751][l_U750 - 1] = 1;
                    iVar3 += 2;
                }
            }
        }
    }
    if (iVar3 > 0)
    {
        sub_36774();
        sub_37898();
        l_U908 = iVar3;
        l_U908 *= l_U911;
        l_U906 += l_U908;
        while (sub_26212())
        {
            WAIT( 0 );
            sub_31975();
        }
    }
    l_U160 = 0;
    return;
}

void sub_44847()
{
    int iVar2;
    int iVar3;
    int iVar4;
    boolean bVar5;

    bVar5 = true;
    if (l_U149)
    {
        l_U620._fU16 = 0;
        l_U620._fU20 = 0;
        l_U149 = 0;
        l_U156 = 0;
        l_U760 = 0;
        if (bVar5)
        {
            iVar3 = 3;
            GENERATE_RANDOM_INT_IN_RANGE( 0, iVar3, ref iVar2 );
            l_U638._fU56 = iVar2;
            GENERATE_RANDOM_INT_IN_RANGE( 0, iVar3, ref iVar2 );
            iVar4 = l_U638._fU56;
            if (iVar2 == iVar4)
            {
                if (l_U156)
                {
                    l_U760 = 0;
                    l_U156 = 0;
                }
                else if (iVar2 > 0)
                {
                    iVar2--;
                }
                else
                {
                    iVar2++;
                }
                l_U760++;;
            }
            else
            {
                l_U760++;
            }
            l_U638._fU60 = iVar2;
        }
    }
    else if (l_U760 > 2)
    {
        l_U156 = 1;
    }
    if (l_U910 < 5)
    {
        iVar3 = 3;
    }
    else if (l_U910 < 10)
    {
        iVar3 = 4;
    }
    else if (l_U910 < 15)
    {
        iVar3 = 5;
    }
    else
    {
        iVar3 = 6;
        if (l_U910 >= 20)
        {
            l_U770 = l_U769 * (l_U910 - 20);
            if (l_U770 > 750)
            {
                l_U770 = 750;
            }
        }
    };;;
    l_U620._fU56 = l_U638._fU56;
    l_U620._fU0 = 2;
    l_U620._fU4 = 9;
    l_U620._fU32._fU0 = TO_FLOAT( l_U620._fU0 );
    l_U620._fU32._fU4 = TO_FLOAT( l_U620._fU4 );
    l_U620._fU32._fU8 = 3850.45000000;
    CREATE_OBJECT_NO_OFFSET( l_U783[l_U620._fU56], l_U620._fU32._fU0, l_U620._fU32._fU4, 3850.45000000, ref l_U620._fU24, 1 );
    SET_OBJECT_HEADING( l_U620._fU24, 0.00000000 );
    SET_OBJECT_COLLISION( l_U620._fU24, 0 );
    FREEZE_OBJECT_POSITION( l_U620._fU24, 1 );
    l_U620._fU16 = 1;
    l_U620._fU60 = l_U638._fU60;
    if (DOES_OBJECT_EXIST( l_U620._fU28 ))
    {
        DELETE_OBJECT( ref l_U620._fU28 );
    }
    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU28 );
    l_U620._fU8 = 3;
    l_U620._fU12 = 9;
    l_U620._fU44._fU0 = TO_FLOAT( l_U620._fU8 );
    l_U620._fU44._fU4 = TO_FLOAT( l_U620._fU12 );
    l_U620._fU44._fU8 = 3850.45000000;
    CREATE_OBJECT_NO_OFFSET( l_U783[l_U620._fU60], l_U620._fU44._fU0, l_U620._fU44._fU4, 3850.45000000, ref l_U620._fU28, 1 );
    SET_OBJECT_HEADING( l_U620._fU28, 0.00000000 );
    SET_OBJECT_COLLISION( l_U620._fU28, 0 );
    FREEZE_OBJECT_POSITION( l_U620._fU28, 1 );
    l_U620._fU20 = 1;
    l_U620._fU64 = 0;
    l_U620._fU68 = 1;
    l_U150 = 1;
    GET_GAME_TIMER( ref l_U767 );
    if (bVar5)
    {
        if (NOT l_U166)
        {
            GENERATE_RANDOM_INT_IN_RANGE( 0, iVar3, ref iVar2 );
            l_U638._fU56 = iVar2;
            GENERATE_RANDOM_INT_IN_RANGE( 0, iVar3, ref iVar2 );
            iVar4 = l_U638._fU56;
            if (iVar2 == iVar4)
            {
                if (l_U156)
                {
                    l_U760 = 0;
                    l_U156 = 0;
                }
                else if (iVar2 > 0)
                {
                    iVar2--;
                }
                else
                {
                    iVar2++;
                }
                l_U760++;;
            }
            else
            {
                l_U760++;
            }
            l_U638._fU60 = iVar2;
            l_U638._fU32 = {-1.00000000, 1.50000000, 3851.45000000 + 1};
            l_U638._fU44 = {-1.00000000, 1.50000000, 3851.45000000};
        }
    }
    return;
}

void sub_46036()
{
    switch (l_U5)
    {
        case 0:
        sub_46111();
        l_U967 = 0;
        break;
        case 1:
        sub_46358();
        break;
        case 2:
        sub_46575();
        break;
        case 3:
        sub_48370();
        break;
        case 4:
        sub_49269();
        break;
        case 5:
        sub_49890();
        break;
        case 6:
        sub_50116();
        break;
    }
    sub_36226();
    return;
}

void sub_46111()
{
    l_U966 = 0;
    l_U121[0] = 1;
    l_U121[1] = 1;
    l_U121[2] = 0;
    l_U121[3] = 0;
    l_U121[4] = 0;
    l_U121[5] = 0;
    l_U121[6] = 1;
    l_U121[7] = 1;
    l_U121[8] = 2;
    l_U121[9] = 1;
    l_U121[10] = 2;
    l_U121[11] = 0;
    l_U121[12] = 2;
    l_U121[13] = 0;
    l_U121[14] = 1;
    l_U121[15] = 1;
    l_U121[16] = 0;
    l_U121[17] = 2;
    l_U121[18] = 1;
    l_U121[19] = 2;
    l_U150 = 0;
    l_U167 = 0;
    l_U120 = 2;
    l_U5 = 1;
    GET_GAME_TIMER( ref l_U767 );
    return;
}

void sub_46358()
{
    char[12] cVar2;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    int iVar11;

    array(ref cVar2, 2);
    StrCopy( ref cVar2[0], "PZ_OVR_01", 16 );
    StrCopy( ref cVar2[1], "PZ_OVR_02", 16 );
    iVar11 = 2;
    if (NOT l_U167)
    {
        CLEAR_HELP();
        PRINT_HELP( ref cVar2[l_U967] );
        l_U167 = 1;
    }
    else if (NOT IS_HELP_MESSAGE_BEING_DISPLAYED())
    {
        if (l_U968)
        {
            l_U967++;
            if (l_U967 >= iVar11)
            {
                sub_46111();
                l_U5 = 2;
                l_U967 = 0;
                l_U968 = 0;
            }
            else
            {
                PRINT_HELP( ref cVar2[l_U967] );
                l_U968 = 0;
            }
        }
    }
    else
    {
        l_U968 = 1;
    }
    return;
}

void sub_46575()
{
    int iVar2;
    int iVar3;

    iVar2 = 20;
    iVar3 = 1000;
    if (l_U150)
    {
        SET_WIDESCREEN_FORMAT( 2 );
        if (IS_USING_CONTROLLER())
        {
            if (l_U120 == 2)
            {
                DRAW_SPRITE( l_U976, l_U1168, l_U1169, l_U1170, l_U1171, 0.00000000, 255, 255, 255, 255 );
            }
            else if (l_U120 == 0)
            {
                DRAW_SPRITE( l_U973, l_U1168, l_U1169, l_U1170, l_U1171, 0.00000000, 255, 255, 255, 255 );
            }
            else
            {
                DRAW_SPRITE( l_U974, l_U1168, l_U1169, l_U1170, l_U1171, 0.00000000, 255, 255, 255, 255 );
            }
        }
        if (l_U966 <= 10)
        {
            ;
        }
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - l_U767;
        if (l_U766 >= iVar3)
        {
            if (l_U966 < iVar2)
            {
                l_U120 = l_U121[l_U966];
                if (NOT (l_U120 == 2))
                {
                    sub_46898();
                    sub_25058();
                }
                else
                {
                    sub_19956();
                }
                l_U966++;
                GET_GAME_TIMER( ref l_U767 );
            }
            else if ((NOT (l_U620._fU4 == 0)) AND (NOT (l_U620._fU12 == 0)))
            {
                sub_19956();
                GET_GAME_TIMER( ref l_U767 );
            }
            else if ((NOT sub_36366()) AND (NOT IS_HELP_MESSAGE_BEING_DISPLAYED()))
            {
                if (DOES_OBJECT_EXIST( l_U620._fU24 ))
                {
                    DELETE_OBJECT( ref l_U620._fU24 );
                    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU24 );
                }
                if (DOES_OBJECT_EXIST( l_U620._fU28 ))
                {
                    DELETE_OBJECT( ref l_U620._fU28 );
                    MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U620._fU28 );
                }
                l_U150 = 0;
                l_U167 = 0;
                GET_GAME_TIMER( ref l_U767 );
                l_U5 = 3;
            };;;
        }
    }
    else
    {
        sub_44847();
        if (DOES_OBJECT_EXIST( l_U620._fU24 ))
        {
            l_U620._fU0 = 2;
            l_U620._fU4 = 6;
            l_U620._fU32._fU0 = TO_FLOAT( l_U620._fU0 );
            l_U620._fU32._fU4 = TO_FLOAT( l_U620._fU4 );
            l_U620._fU32._fU8 = 3850.45000000;
            SET_OBJECT_COORDINATES( l_U620._fU24, l_U620._fU32._fU0, l_U620._fU32._fU4, 3850.45000000 );
        }
        if (DOES_OBJECT_EXIST( l_U620._fU28 ))
        {
            l_U620._fU8 = 3;
            l_U620._fU12 = 6;
            l_U620._fU44._fU0 = TO_FLOAT( l_U620._fU8 );
            l_U620._fU44._fU4 = TO_FLOAT( l_U620._fU12 );
            l_U620._fU44._fU8 = 3850.45000000;
            SET_OBJECT_COORDINATES( l_U620._fU28, l_U620._fU44._fU0, l_U620._fU44._fU4, 3850.45000000 );
        }
        CLEAR_HELP();
        sub_48019( "PZ_ROT_0", 1, 5000 );
    }
    return;
}

void sub_46898()
{
    l_U761 = 0;
    l_U762 = 0;
    l_U763 = 0;
    l_U764 = 0;
    l_U143 = l_U620._fU64;
    l_U144 = l_U620._fU68;
    switch (l_U620._fU64)
    {
        case 0:
        if (l_U120 == 0)
        {
            l_U761 = 0;
            l_U764 = 1;
            l_U143 = 5;
            l_U144 = 4;
        }
        else if (l_U120 == 1)
        {
            l_U761 = 1;
            l_U763 = 1;
            l_U143 = 4;
            l_U144 = 5;
        }
        break;
        case 1:
        if (l_U120 == 0)
        {
            l_U761 = -1;
            l_U763 = 1;
            l_U143 = 4;
            l_U144 = 5;
        }
        else if (l_U120 == 1)
        {
            l_U761 = 0;
            l_U764 = 1;
            l_U143 = 5;
            l_U144 = 4;
        }
        break;
        case 2:
        if (l_U120 == 0)
        {
            l_U761 = -1;
        }
        else if (l_U120 == 1)
        {
            l_U761 = 1;
        }
        l_U143 = 2;
        l_U144 = 3;
        break;
        case 3:
        if (l_U120 == 0)
        {
            l_U761 = -1;
        }
        else if (l_U120 == 1)
        {
            l_U761 = 1;
        }
        l_U143 = 3;
        l_U144 = 2;
        break;
        case 4:
        if (l_U120 == 0)
        {
            l_U761 = -1;
            l_U763 = -1;
            l_U143 = 0;
            l_U144 = 1;
        }
        else if (l_U120 == 1)
        {
            l_U761 = 1;
            l_U763 = -1;
            l_U143 = 1;
            l_U144 = 0;
        }
        break;
        case 5:
        if (l_U120 == 0)
        {
            l_U761 = 0;
            l_U764 = -1;
            l_U143 = 1;
            l_U144 = 0;
        }
        else if (l_U120 == 1)
        {
            l_U761 = 0;
            l_U764 = -1;
            l_U143 = 0;
            l_U144 = 1;
        }
        break;
    }
    return;
}

void sub_48019(unknown uParam0, unknown uParam1, unknown uParam2)
{
    sub_48039( 1, "", -1, uParam0, uParam1, uParam2 );
    return;
}

void sub_48039(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    int I;

    for ( I = 0; I <= 1; I++ )
    {
        if ((iParam0 == 2) || (I == iParam0))
        {
            sub_36451( I );
            sub_48091( uParam5, I );
            switch (I)
            {
                case 0:
                StrCopy( ref g_U9241._fU28[0], uParam1, 16 );
                g_U9241._fU100[0] = uParam2;
                break;
                case 1:
                StrCopy( ref g_U9241._fU28[1], uParam3, 16 );
                g_U9241._fU100[1] = uParam4;
                break;
            }
            g_U9241._fU112[I] = 0;
            if (iParam0 == 2)
            {
                g_U9241._fU148[I] = 3;
            }
            else
            {
                g_U9241._fU148[I] = 1;
            }
            g_U9241._fU136[I] = -1;
            g_U9241._fU124[I] = 0;
        }
    }
    return;
}

void sub_48091(int iParam0, unknown uParam1)
{
    if (iParam0 == -1)
    {
        g_U9241._fU16[uParam1] = 6000;
    }
    else
    {
        g_U9241._fU16[uParam1] = iParam0;
    }
    return;
}

void sub_48370()
{
    int iVar2;
    boolean bVar3;

    if (NOT l_U167)
    {
        sub_10451();
        CLEAR_PRINTS();
        CLEAR_HELP();
        sub_48019( "PZ_REM_0", 1, 5000 );
        PRINTNL();
        PRINTSTRING( "******* CALLING HELP TEXT LINK PZ_REM_0 ******" );
        PRINTNL();
        for ( l_U750 = 0; l_U750 < 9; l_U750++ )
        {
            for ( l_U751 = 0; l_U751 < 6; l_U751++ )
            {
                bVar3 = false;
                if (l_U750 == 0)
                {
                    if (l_U751 == 0)
                    {
                        iVar2 = 1;
                        bVar3 = true;
                    }
                    else if ((l_U751 == 2) || (l_U751 == 1))
                    {
                        iVar2 = 0;
                        bVar3 = true;
                    }
                    else if (l_U751 < 5)
                    {
                        iVar2 = 2;
                        bVar3 = true;
                    };;;
                }
                else if (l_U750 == 1)
                {
                    if (l_U751 < 2)
                    {
                        iVar2 = 1;
                        bVar3 = true;
                    }
                    else if (l_U751 < 4)
                    {
                        iVar2 = 0;
                        bVar3 = true;
                    }
                    else if (l_U751 == 4)
                    {
                        iVar2 = 2;
                        bVar3 = true;
                    };;;
                }
                else if (l_U750 == 2)
                {
                    if (l_U751 == 2)
                    {
                        iVar2 = 2;
                        bVar3 = true;
                    }
                    else if (l_U751 == 3)
                    {
                        iVar2 = 1;
                        bVar3 = true;
                    }
                }
                else if (l_U750 == 3)
                {
                    if (l_U751 == 2)
                    {
                        iVar2 = 1;
                        bVar3 = true;
                    }
                };;;;
                if (bVar3)
                {
                    CREATE_OBJECT_NO_OFFSET( l_U783[iVar2], l_U181[l_U751][l_U750]._fU0._fU0, l_U181[l_U751][l_U750]._fU0._fU4, l_U181[l_U751][l_U750]._fU0._fU8, ref l_U181[l_U751][l_U750]._fU12, 1 );
                    SET_OBJECT_HEADING( l_U181[l_U751][l_U750]._fU12, 0.00000000 );
                    SET_OBJECT_COLLISION( l_U181[l_U751][l_U750]._fU12, 0 );
                    FREEZE_OBJECT_POSITION( l_U181[l_U751][l_U750]._fU12, 1 );
                    l_U181[l_U751][l_U750]._fU24 = iVar2;
                    l_U181[l_U751][l_U750]._fU28 = 1;
                    l_U9[l_U751][l_U750] = 0;
                }
            }
        }
        l_U167 = 1;
    }
    else
    {
        while (sub_26212())
        {
            WAIT( 0 );
            GET_GAME_TIMER( ref l_U765 );
            l_U766 = l_U765 - l_U767;
            if (l_U766 >= 3000)
            {
                GET_GAME_TIMER( ref l_U767 );
            }
            sub_36226();
        }
        if ((NOT sub_36366()) AND ((NOT IS_HELP_MESSAGE_BEING_DISPLAYED()) AND (NOT IS_MESSAGE_BEING_DISPLAYED())))
        {
            l_U167 = 0;
            l_U5 = 4;
            GET_GAME_TIMER( ref l_U767 );
        }
    }
    return;
}

void sub_49269()
{
    int iVar2;
    boolean bVar3;

    if (NOT l_U167)
    {
        sub_10451();
        CLEAR_PRINTS();
        PRINT_HELP( "PZ_BIG_01" );
        for ( l_U750 = 0; l_U750 < 9; l_U750++ )
        {
            for ( l_U751 = 0; l_U751 < 6; l_U751++ )
            {
                bVar3 = false;
                if (l_U750 == 0)
                {
                    if ((l_U751 == 3) || (l_U751 == 2))
                    {
                        iVar2 = 0;
                        bVar3 = true;
                    }
                }
                else if (l_U750 == 1)
                {
                    if ((l_U751 == 3) || (l_U751 == 2))
                    {
                        iVar2 = 0;
                        bVar3 = true;
                    }
                }
                if (bVar3)
                {
                    CREATE_OBJECT_NO_OFFSET( l_U783[iVar2], l_U181[l_U751][l_U750]._fU0._fU0, l_U181[l_U751][l_U750]._fU0._fU4, l_U181[l_U751][l_U750]._fU0._fU8, ref l_U181[l_U751][l_U750]._fU12, 1 );
                    SET_OBJECT_HEADING( l_U181[l_U751][l_U750]._fU12, 0.00000000 );
                    SET_OBJECT_COLLISION( l_U181[l_U751][l_U750]._fU12, 0 );
                    FREEZE_OBJECT_POSITION( l_U181[l_U751][l_U750]._fU12, 1 );
                    l_U181[l_U751][l_U750]._fU24 = iVar2;
                    l_U181[l_U751][l_U750]._fU28 = 1;
                    l_U9[l_U751][l_U750] = 0;
                }
            }
        }
        l_U167 = 1;
        GET_GAME_TIMER( ref l_U767 );
    }
    else
    {
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - l_U767;
        if (l_U766 >= 4500)
        {
            sub_26234();
            if ((NOT sub_36366()) AND ((NOT IS_HELP_MESSAGE_BEING_DISPLAYED()) AND (NOT IS_MESSAGE_BEING_DISPLAYED())))
            {
                l_U5 = 5;
                l_U167 = 0;
                GET_GAME_TIMER( ref l_U767 );
            }
        }
    }
    return;
}

void sub_49890()
{
    unknown uVar2;
    unknown uVar3;

    if (NOT l_U167)
    {
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - l_U767;
        if (l_U766 >= 1000)
        {
            l_U750 = 0;
            l_U167 = 1;
            GET_GAME_TIMER( ref l_U767 );
        }
    }
    else
    {
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - l_U767;
        if (l_U766 >= 500)
        {
            while (sub_26212())
            {
                sub_36226();
                WAIT( 0 );
            }
            if ((NOT IS_HELP_MESSAGE_BEING_DISPLAYED()) AND (NOT IS_MESSAGE_BEING_DISPLAYED()))
            {
                l_U167 = 0;
                l_U964 = 0;
                l_U962 = 0;
                l_U5 = 6;
                GET_GAME_TIMER( ref l_U767 );
            }
        }
    }
    return;
}

void sub_50116()
{
    sub_50125();
    if (NOT l_U167)
    {
        CLEAR_PRINTS();
        sub_48019( "PZ_POW_0", 1, 5000 );
        l_U167 = 1;
    }
    if (l_U962 == 0)
    {
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - l_U767;
        if (l_U766 >= 1500)
        {
            l_U964++;
            GET_GAME_TIMER( ref l_U767 );
        }
        else if (l_U964 < 2)
        {
            ;
        }
    }
    else if (l_U962 < 3)
    {
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - l_U767;
        if (l_U766 >= 250)
        {
            l_U964++;
            GET_GAME_TIMER( ref l_U767 );
        }
    }
    else
    {
        GET_GAME_TIMER( ref l_U765 );
        l_U766 = l_U765 - l_U767;
        if (l_U766 >= 3000)
        {
            if ((NOT sub_36366()) AND ((NOT IS_HELP_MESSAGE_BEING_DISPLAYED()) AND (NOT IS_MESSAGE_BEING_DISPLAYED())))
            {
                CLEAR_PRINTS();
                l_U154 = 1;
                l_U151 = 1;
                l_U166 = 0;
                l_U145 = 0;
                sub_11223( 0, 1 );
                l_U145 = 1;
            }
        }
    }
    return;
}

void sub_50125()
{
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    boolean bVar16;
    int iVar17;

    iVar2 = 90;
    iVar3 = 250;
    SET_WIDESCREEN_FORMAT( 1 );
    if ((# -NULL-0xc27bfa()) || (# -NULL-0xc27c84()))
    {
        iVar4 = 167;
        iVar5 = 4;
        iVar6 = 0;
        iVar7 = 77;
        iVar8 = 151;
        iVar9 = 5;
        iVar10 = 24;
        iVar11 = 72;
        iVar12 = 170;
        iVar13 = 179;
        iVar14 = 147;
        iVar15 = 0;
    }
    else
    {
        iVar4 = 204;
        iVar5 = 43;
        iVar6 = 71;
        iVar7 = 108;
        iVar8 = 130;
        iVar9 = 187;
        iVar10 = 220;
        iVar11 = 136;
        iVar12 = 186;
        iVar13 = 134;
        iVar14 = 178;
        iVar15 = 135;
    }
    sub_13490( l_U1196, l_U1197 );
    SET_TEXT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1198, l_U1199 );
    DISPLAY_TEXT( l_U1194, l_U1195, ref l_U837 );
    l_U1211 = l_U1207 - 0.00100000;
    DRAW_SPRITE( l_U986, l_U1206, l_U1207, l_U1208, l_U1209, 0.00000000, 255, 255, 255, l_U1353 );
    if (l_U964 > 0)
    {
        if (l_U964 == 1)
        {
            DRAW_RECT( l_U1210, l_U1211, l_U1212, l_U1213, 250, 250, 250, l_U1352 );
        }
        else if (l_U964 == 2)
        {
            DRAW_RECT( l_U1214, l_U1211, l_U1216, l_U1213, 250, 250, 250, l_U1352 );
        }
        else if (l_U964 == 3)
        {
            DRAW_RECT( l_U1218, l_U1211, l_U1220, l_U1213, 250, 250, 250, l_U1352 );
        }
        else
        {
            DRAW_RECT( l_U1222, l_U1211, l_U1224, l_U1213, 250, 250, 250, l_U1352 );
        };;;
    }
    if (l_U962 > 0)
    {
        sub_13490( l_U1202, l_U1203 );
        SET_TEXT_RIGHT_JUSTIFY( 1 );
        SET_TEXT_WRAP( l_U1204, l_U1205 );
        DISPLAY_TEXT_WITH_NUMBER( l_U1200, l_U1195, ref l_U841, l_U962 );
    }
    sub_13490( l_U1174, l_U1175 );
    SET_TEXT_JUSTIFY( 1 );
    SET_TEXT_WRAP( l_U1176, l_U1177 );
    DISPLAY_TEXT( l_U1172, l_U1195, ref l_U833 );
    l_U1182 = l_U1178 + l_U1180;
    l_U1186 = l_U1182 + l_U1180;
    l_U1190 = l_U1186 + l_U1180;
    if (l_U962 == 0)
    {
        DRAW_SPRITE( l_U977, l_U1178, l_U1207, l_U1180, l_U1181, 0.00000000, iVar4, iVar5, iVar6, iVar2 );
        DRAW_SPRITE( l_U978, l_U1182, l_U1207, l_U1180, l_U1181, 0.00000000, iVar7, iVar8, iVar9, iVar2 );
        DRAW_SPRITE( l_U979, l_U1186, l_U1207, l_U1180, l_U1181, 0.00000000, iVar10, iVar11, iVar12, iVar2 );
        DRAW_SPRITE( l_U980, l_U1190, l_U1207, l_U1180, l_U1181, 0.00000000, iVar13, iVar14, iVar15, iVar2 );
    }
    else
    {
        DRAW_SPRITE( l_U977, l_U1178, l_U1207, l_U1180, l_U1181, 0.00000000, iVar4, iVar5, iVar6, iVar3 );
        DRAW_SPRITE( l_U978, l_U1182, l_U1207, l_U1184, l_U1181, 0.00000000, iVar7, iVar8, iVar9, iVar3 );
        DRAW_SPRITE( l_U979, l_U1186, l_U1207, l_U1188, l_U1181, 0.00000000, iVar10, iVar11, iVar12, iVar3 );
        DRAW_SPRITE( l_U980, l_U1190, l_U1207, l_U1192, l_U1181, 0.00000000, iVar13, iVar14, iVar15, iVar3 );
    }
    if (NOT (l_U962 == 3))
    {
        if (l_U964 > 4)
        {
            l_U964 = 4;
        }
    }
    else
    {
        l_U964 = 0;
    }
    if (l_U965 < l_U964)
    {
        bVar16 = true;
    }
    else
    {
        bVar16 = false;
    }
    if (NOT (l_U962 == 3))
    {
        if (bVar16)
        {
            l_U965 = 0;
            for ( l_U759 = 0; l_U759 < 4; l_U759++ )
            {
                if (NOT l_U954[l_U759])
                {
                    if (l_U759 < l_U964)
                    {
                        l_U954[l_U759] = 1;
                        l_U965++;
                    }
                    else
                    {
                        l_U759 = 4;
                    }
                }
                else
                {
                    l_U965++;
                }
            }
            if (l_U965 == 4)
            {
                l_U962++;
                if (l_U962 > 3)
                {
                    l_U962 = 3;
                }
                iVar17 = l_U962 - 1;
                if (iVar17 <= 0)
                {
                    iVar17 = 0;
                }
                PLAY_SOUND_FROM_POSITION( -1, l_U902, l_U887 );
                for ( l_U759 = 3; l_U759 >= 0; l_U759-- )
                {
                    l_U954[l_U759] = 0;
                }
                l_U964 = 0;
                l_U965 = 0;
            }
        }
    }
    return;
}

void sub_52047()
{
    DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
    if ((l_U6 == 3) || (l_U6 == 1))
    {
        if (l_U145 == 3)
        {
            if (l_U171)
            {
                if (sub_36282())
                {
                    if (NOT IS_SCREEN_FADING())
                    {
                        if (NOT l_U154)
                        {
                            l_U145 = 0;
                            if (l_U6 == 3)
                            {
                                sub_11223( 0, 2 );
                            }
                            else
                            {
                                sub_11223( 0, 3 );
                            }
                            l_U6 = 4;
                            l_U154 = 1;
                        }
                    }
                }
                else
                {
                    l_U154 = 0;
                }
            }
            else if (sub_15563())
            {
                if (NOT IS_SCREEN_FADING())
                {
                    if (NOT l_U154)
                    {
                        l_U145 = 0;
                        if (l_U6 == 3)
                        {
                            sub_11223( 0, 2 );
                        }
                        else
                        {
                            sub_11223( 0, 3 );
                        }
                        l_U6 = 4;
                        l_U154 = 1;
                    }
                }
            }
            else
            {
                l_U154 = 0;
            }
        }
        else if (l_U171)
        {
            DRAW_FRONTEND_HELPER_TEXT( "BT_BACK", ref l_U849, 0 );
        }
        else
        {
            DRAW_FRONTEND_HELPER_TEXT( "BT_CONT", ref l_U845, 0 );
        }
    }
    switch (l_U6)
    {
        case 0:
        sub_52400();
        break;
        case 1:
        sub_54219();
        break;
        case 2:
        sub_55648();
        break;
        case 3:
        sub_56383();
        break;
        case 4:
        sub_57027();
        break;
    }
    SET_WIDESCREEN_FORMAT( 3 );
    if (l_U6 == 2)
    {
        INIT_FRONTEND_HELPER_TEXT();
        if (l_U1079 > 0)
        {
            DRAW_FRONTEND_HELPER_TEXT( "BT_BACK", ref l_U849, 0 );
        }
        DRAW_FRONTEND_HELPER_TEXT( "BT_CONFIRM", ref l_U845, 0 );
        DRAW_FRONTEND_HELPER_TEXT( "BT_NAMEENT", "FE_BUTU", 0 );
    }
    else if (NOT (l_U6 == 4))
    {
        INIT_FRONTEND_HELPER_TEXT();
        if (l_U6 == 3)
        {
            DRAW_FRONTEND_HELPER_TEXT( "BT_CONT", ref l_U845, 0 );
        }
        else if (l_U171)
        {
            DRAW_FRONTEND_HELPER_TEXT( "BT_BACK", ref l_U849, 0 );
        }
        else
        {
            DRAW_FRONTEND_HELPER_TEXT( "BT_CONT", ref l_U845, 0 );
        }
    }
    sub_16229();
    if (l_U145 == 3)
    {
        sub_43244();
    }
    return;
}

void sub_52400()
{
    l_U145 = 0;
    if (l_U171)
    {
        sub_11223( 0, 0 );
    }
    else
    {
        sub_11223( 0, 1 );
        if (NOT l_U166)
        {
            if (l_U164)
            {
                STOP_STREAM();
                l_U164 = 0;
            }
        }
    }
    for ( l_U750 = 0; l_U750 < 9; l_U750++ )
    {
        DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
        for ( l_U751 = 0; l_U751 < 6; l_U751++ )
        {
            if (DOES_OBJECT_EXIST( l_U181[l_U751][l_U750]._fU12 ))
            {
                DELETE_OBJECT( ref l_U181[l_U751][l_U750]._fU12 );
            }
            MARK_OBJECT_AS_NO_LONGER_NEEDED( ref l_U181[l_U751][l_U750]._fU12 );
            l_U749 = TO_FLOAT( l_U751 );
            l_U748 = TO_FLOAT( l_U750 );
            l_U181[l_U751][l_U750]._fU0 = {l_U749, l_U748, 3850.45000000};
            l_U181[l_U751][l_U750]._fU16 = l_U751;
            l_U181[l_U751][l_U750]._fU20 = l_U750;
            l_U181[l_U751][l_U750]._fU24 = 6;
            l_U181[l_U751][l_U750]._fU28 = 0;
            l_U9[l_U751][l_U750] = 0;
        }
    }
    if (DOES_OBJECT_EXIST( l_U657 ))
    {
        SET_OBJECT_VISIBLE( l_U657, 0 );
    }
    for ( l_U759 = 0; l_U759 < 4; l_U759++ )
    {
        l_U954[l_U759] = 0;
    }
    l_U154 = 1;
    l_U960 = 1;
    GET_GAME_TIMER( ref l_U771 );
    l_U1078 = 0;
    l_U1079 = 0;
    l_U1077 = GET_FIRST_N_CHARACTERS_OF_LITERAL_STRING( l_U1077, 0 );
    if (l_U171)
    {
        l_U6 = 1;
    }
    else
    {
        REGISTER_INT_STAT( 351, l_U906 );
        l_U1080 = 6;
        if (l_U1080 < 10)
        {
            if (l_U1080 == 0)
            {
                AWARD_ACHIEVEMENT( 4 );
                sub_53144( 3 );
            }
            sub_53774( ref g_U8675, ref g_U8686, 11, 5 );
            l_U6 = 2;
            break;
            6;
            11;
            ref g_U8686;
            l_U906;
            l_U1080;
            break;
        }
        else
        {
            l_U6 = 3;
        }
        break;
        11;
        ref g_U8686;
        sub_53020( 11, 5 );
        ref g_U8686;
        l_U906;
        break;
    }
    l_U988[0] = {0.31800000, 0.24200000, 0.00000000};
    l_U1019[0] = {0.68200000, 0.24200000, 0.00000000};
    sub_53982();
    if (l_U6 == 3)
    {
        ;
    }
    l_U145 = 1;
    DONT_DISPLAY_LOADING_ON_FADE_THIS_FRAME();
    return;
}

void sub_53020(int iParam0, unknown uParam1)
{
    int iVar4;
    int iVar5;
    int Result;

    iVar4 = (uParam1^);
    iVar5 = 0;
    Result = 99999;
    while (iVar5 < iVar4)
    {
        if (iParam0 > (uParam1^)[iVar5])
        {
            Result = iVar5;
            iVar5 = iVar4;
        }
        iVar5++;
    }
    return Result;
}

void sub_53144(unknown uParam0)
{
    int iVar3;

    if (g_U0)
    {
        return;
    }
    iVar3 = 0;
    if (NOT g_U64808[uParam0]._fU0)
    {
        iVar3 = ProtectedGet(g_U64808[uParam0]._fU8);
        if (iVar3 > 0)
        {
            sub_53213( 2, iVar3 );
            g_U64808[uParam0]._fU0 = 1;
            return;
        }
    }
    return;
}

void sub_53213(unknown uParam0, int iParam1)
{
    g_U32871[uParam0]._fU4 += iParam1;
    if (g_U32871[uParam0]._fU4 > g_U32871[uParam0]._fU0)
    {
        SCRIPT_ASSERT( "Flow_Achievements_Game_Progress_Made: Current Category is over target value" );
        g_U32871[uParam0]._fU4 = g_U32871[uParam0]._fU0;
    }
    sub_53395( 0 );
    return;
}

void sub_53395(boolean bParam0)
{
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    boolean bVar7;
    int I;

    fVar3 = 0.00000000;
    fVar4 = 0.00000000;
    fVar5 = 0.00000000;
    fVar6 = 0.00000000;
    bVar7 = true;
    I = 0;
    for ( I = 0; I < 8; I++ )
    {
        if (g_U32871[I]._fU4 == g_U32871[I]._fU0)
        {
            fVar4 = g_U32871[I]._fU8;
        }
        else
        {
            bVar7 = false;
            fVar5 = TO_FLOAT( g_U32871[I]._fU0 );
            fVar6 = TO_FLOAT( g_U32871[I]._fU4 );
            fVar4 = (fVar6 / fVar5) * g_U32871[I]._fU8;
        }
        fVar3 += fVar4;
    }
    if (fVar3 > 100.00000000)
    {
        fVar3 = 99.99000000;
    }
    if (bVar7)
    {
        fVar3 = 100.00000000;
    }
    SET_FLOAT_STAT( 0, fVar3 );
    if (bVar7)
    {
        sub_53650();
    }
    if ((NOT (# -NULL-0xc27c84())) AND ((NOT bParam0) AND (bVar7)))
    {
        PRINT_HELP( "GAME100" );
    }
    return;
}

void sub_53650()
{
    ENABLE_MAX_AMMO_CAP( 0 );
    return;
}

void sub_53774(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int iVar6;
    int I;

    iVar6 = (uParam3^);
    for ( I = iVar6 - 1; I >= 0; I-- )
    {
        if (I == iParam0)
        {
            StrCopy( ref (uParam2^)[I], l_U1050[l_U1078], 4 );
            (uParam3^)[I] = uParam1;
            I = 55537;
        }
        else if ((I - 1) >= 0)
        {
            (uParam2^)[I] = (uParam2^)[I - 1];
            (uParam3^)[I] = (uParam3^)[I - 1];
        }
    }
    return;
}

void sub_53982()
{
    float fVar2;

    fVar2 = 0.05800000;
    l_U759 = 1;
    l_U1019[0]._fU4 = l_U988[0]._fU4;
    while (l_U759 < 10)
    {
        l_U988[l_U759] = {l_U988[l_U759 - 1]};
        l_U988[l_U759]._fU4 = (l_U988[l_U759 - 1]._fU4) + fVar2;
        l_U1019[l_U759] = {l_U1019[l_U759 - 1]};
        l_U1019[l_U759]._fU4 = (l_U1019[l_U759 - 1]._fU4) + fVar2;
        l_U759++;
    }
    return;
}

void sub_54219()
{
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    vector vVar6;
    vector vVar9;
    float fVar12;
    float fVar13;
    float fVar14;
    float fVar15;
    float fVar16;
    float fVar17;
    vector vVar18;
    vector vVar21;

    fVar2 = 0.61500000;
    fVar3 = 0.18900000;
    fVar4 = 0.14300000;
    fVar5 = 0.05800000;
    vVar6 = {0.49500000, 0.48300000, 0.00000000};
    vVar9 = {0.49200000, 0.67600000, 0.00000000};
    fVar12 = 0.36700000;
    fVar13 = 0.16500000;
    fVar14 = 0.48000000;
    fVar15 = 0.64000000;
    fVar16 = 0.48000000;
    fVar17 = 0.64000000;
    vVar18 = {0.37200000, 0.18300000, 0.00000000};
    vVar21 = {0.24400000, 0.07800000, 0.00000000};
    l_U146 = GET_CURRENT_LANGUAGE();
    if ((l_U146 == 5) || (l_U146 == 4))
    {
        fVar14 = 0.30400000;
        fVar15 = 0.46500000;
    }
    else if (l_U146 == 1)
    {
        fVar14 = 0.40000000;
        fVar15 = 0.60000000;
    }
    else
    {
        fVar14 = 0.48000000;
        fVar15 = 0.64000000;
    }
    if ((NOT l_U164) AND (NOT l_U165))
    {
        if (PRELOAD_STREAM( "QUB3D_MENU_MUSIC" ))
        {
            PLAY_STREAM_FRONTEND();
            l_U165 = 1;
        }
        else
        {
            STOP_STREAM();
        }
    }
    SET_WIDESCREEN_FORMAT( 1 );
    DRAW_RECT( vVar6.x, vVar6.y, vVar9.x, vVar9.y, 0, 0, 0, 150 );
    sub_13700( vVar6.x, vVar6.y, vVar9.x, vVar9.y );
    DRAW_SPRITE( l_U971, fVar2, fVar3, fVar4, fVar5, 0.00000000, 255, 255, 255, 255 );
    DRAW_RECT( vVar18.x, vVar18.y, vVar21.x, vVar21.y, 250, 250, 250, 250 );
    DRAW_RECT( vVar6.x, vVar18.y + (vVar21.y / 2.00000000), vVar9.x, 0.00400000, 250, 250, 250, 250 );
    sub_13490( fVar14, fVar15 );
    SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
    SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
    DISPLAY_TEXT( fVar12, fVar13, ref l_U809 );
    sub_53982();
    for ( l_U759 = 0; l_U759 < 10; l_U759++ )
    {
        sub_13490( fVar16, fVar17 );
        SET_TEXT_JUSTIFY( 1 );
        SET_TEXT_WRAP( l_U988[0]._fU0, 1.00000000 );
        if (l_U6 == 2)
        {
            if (NOT (l_U759 == l_U1080))
            {
                DISPLAY_TEXT_WITH_LITERAL_STRING( l_U988[l_U759]._fU0, l_U988[l_U759]._fU4, "PZ_STRING", ref g_U8675[l_U759] );
                sub_13490( fVar16, fVar17 );
                SET_TEXT_RIGHT_JUSTIFY( 1 );
                SET_TEXT_WRAP( 0.00000000, l_U1019[0]._fU0 );
                DISPLAY_TEXT_WITH_NUMBER( l_U1019[l_U759]._fU0, l_U1019[l_U759]._fU4, "PZ_NUMBER", ProtectedGet(g_U8686[l_U759]) );
            }
            else
            {
                DRAW_RECT( vVar6.x, l_U988[l_U759]._fU4 + l_U1159, vVar9.x, l_U1156._fU4, 250, 250, 250, 250 );
                l_U1156 = {vVar9.x, l_U1156._fU4, 0.00000000};
                SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
                SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
                DISPLAY_TEXT_WITH_LITERAL_STRING( l_U988[l_U759]._fU0, l_U988[l_U759]._fU4, "PZ_STRING", ref g_U8675[l_U759] );
                sub_13490( fVar16, fVar17 );
                SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
                SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
                SET_TEXT_RIGHT_JUSTIFY( 1 );
                SET_TEXT_WRAP( 0.00000000, l_U1019[0]._fU0 );
                DISPLAY_TEXT_WITH_NUMBER( l_U1019[l_U759]._fU0, l_U1019[l_U759]._fU4, "PZ_NUMBER", ProtectedGet(g_U8686[l_U759]) );
            }
        }
        else
        {
            DISPLAY_TEXT_WITH_LITERAL_STRING( l_U988[l_U759]._fU0, l_U988[l_U759]._fU4, "PZ_STRING", ref g_U8675[l_U759] );
            sub_13490( fVar16, fVar17 );
            SET_TEXT_RIGHT_JUSTIFY( 1 );
            SET_TEXT_WRAP( 0.00000000, l_U1019[0]._fU0 );
            DISPLAY_TEXT_WITH_NUMBER( l_U1019[l_U759]._fU0, l_U1019[l_U759]._fU4, "PZ_NUMBER", ProtectedGet(g_U8686[l_U759]) );
        }
        if (l_U759 < 9)
        {
            DRAW_RECT( vVar6.x, l_U988[l_U759]._fU4 + (l_U1159 * 2.75000000), vVar9.x, 0.00200000, 250, 250, 250, 250 );
        }
    }
    return;
}

void sub_55648()
{
    int iVar2;
    int iVar3;
    int iVar4;
    unknown uVar5;
    unknown uVar6;
    boolean bVar7;

    iVar2 = 3;
    sub_54219();
    SET_WIDESCREEN_FORMAT( 1 );
    sub_13490( 0.55400000, 0.63400000 );
    SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
    SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
    SET_TEXT_JUSTIFY( 1 );
    if ((GET_LENGTH_OF_LITERAL_STRING( ref g_U8675[l_U1080] )) > 0)
    {
        StrCopy( ref g_U8675[l_U1080], GET_FIRST_N_CHARACTERS_OF_LITERAL_STRING( ref g_U8675[l_U1080], l_U1079 ), 4 );
        ConcatString(ref g_U8675[l_U1080], l_U1050[l_U1078], 4);
    }
    else
    {
        StrCopy( ref g_U8675[l_U1080], l_U1050[l_U1078], 4 );
    }
    bVar7 = false;
    if (l_U145 == 3)
    {
        bVar7 = true;
    }
    if (bVar7)
    {
        if (sub_15563())
        {
            if (NOT l_U154)
            {
                l_U154 = 1;
                PLAY_SOUND_FROM_POSITION( -1, l_U901, l_U887 );
                l_U1079++;
                l_U1078 = 0;
                if (l_U1079 >= iVar2)
                {
                    l_U906 = 0;
                    l_U6 = 1;
                }
            }
        }
        else
        {
            l_U154 = 0;
        }
        if (sub_36282())
        {
            if (NOT l_U960)
            {
                if (l_U1079 > 0)
                {
                    l_U960 = 1;
                    PLAY_SOUND_FROM_POSITION( -1, l_U901, l_U887 );
                    l_U1079--;
                    l_U1078 = 0;
                }
            }
        }
        else
        {
            l_U960 = 0;
        }
        GET_POSITION_OF_ANALOGUE_STICKS( 0, ref iVar3, ref iVar4, ref uVar5, ref uVar6 );
        if ((iVar4 == 0) AND (iVar3 == 0))
        {
            GET_KEYBOARD_MOVE_INPUT( ref iVar3, ref iVar4 );
        }
        if ((iVar4 > 100) || ((IS_GAME_KEYBOARD_NAV_DOWN_PRESSED( 0 )) || (IS_BUTTON_PRESSED( 0, 9 ))))
        {
            GET_GAME_TIMER( ref l_U765 );
            l_U766 = l_U765 - l_U771;
            if (l_U766 >= 250)
            {
                GET_GAME_TIMER( ref l_U771 );
                PLAY_SOUND_FROM_POSITION( -1, l_U899, l_U887 );
                if (l_U1078 < 25)
                {
                    l_U1078++;
                }
                else
                {
                    l_U1078 = 0;
                }
            }
        }
        if ((iVar4 < 65436) || ((IS_GAME_KEYBOARD_NAV_UP_PRESSED( 0 )) || (IS_BUTTON_PRESSED( 0, 8 ))))
        {
            GET_GAME_TIMER( ref l_U765 );
            l_U766 = l_U765 - l_U771;
            if (l_U766 >= 250)
            {
                GET_GAME_TIMER( ref l_U771 );
                PLAY_SOUND_FROM_POSITION( -1, l_U899, l_U887 );
                if (l_U1078 > 0)
                {
                    l_U1078--;
                }
                else
                {
                    l_U1078 = 25;
                }
            }
        }
    }
    return;
}

void sub_56383()
{
    l_U146 = GET_CURRENT_LANGUAGE();
    if ((l_U146 == 5) || (l_U146 == 4))
    {
        l_U1094 = 0.42000000;
        l_U1095 = 0.61500000;
    }
    else
    {
        l_U1094 = 0.48000000;
        l_U1095 = 0.64000000;
    }
    SET_WIDESCREEN_FORMAT( 1 );
    DRAW_RECT( l_U1085._fU0, l_U1085._fU4, l_U1088._fU0, l_U1088._fU4, 0, 0, 0, 150 );
    sub_13700( l_U1085._fU0, l_U1085._fU4, l_U1088._fU0, l_U1088._fU4 );
    DRAW_RECT( l_U1112._fU0, l_U1112._fU4, l_U1115._fU0, l_U1115._fU4, 250, 250, 250, 250 );
    DRAW_RECT( l_U1085._fU0, l_U1112._fU4 + (l_U1115._fU4 / 2.00000000), l_U1088._fU0, 0.00400000, 250, 250, 250, 250 );
    DRAW_RECT( l_U1085._fU0, l_U1091, l_U1088._fU0, 0.00400000, 250, 250, 250, 250 );
    DRAW_SPRITE( l_U971, l_U1100, l_U1101, l_U1102, l_U1103, 0.00000000, 255, 255, 255, 255 );
    sub_13490( l_U1094, l_U1095 );
    SET_TEXT_COLOUR( 0, 0, 0, l_U758 );
    SET_TEXT_EDGE( l_U1084, 250, 250, 250, l_U758 );
    DISPLAY_TEXT( l_U1092, l_U1093, ref l_U813 );
    sub_13490( l_U1098, l_U1099 );
    SET_TEXT_JUSTIFY( 1 );
    DISPLAY_TEXT( l_U1096, l_U1097, "PZ_SCORE" );
    sub_13490( l_U1118, l_U1119 );
    SET_TEXT_RIGHT_JUSTIFY( 1 );
    SET_TEXT_WRAP( 0.00000000, l_U1120 );
    DISPLAY_TEXT_WITH_NUMBER( l_U1120, l_U1121, "PZ_NUMBER", l_U907 );
    sub_13490( l_U1122, l_U1123 );
    SET_TEXT_WRAP( l_U1126, l_U1127 );
    DISPLAY_TEXT( l_U1124, l_U1125, "PZ_SCORETXT" );
    return;
}

void sub_57027()
{
    sub_10451();
    l_U151 = 1;
    l_U4 = 2;
    SET_CAM_ACTIVE( l_U670, 1 );
    SET_CAM_PROPAGATE( l_U670, 1 );
    SET_CAM_ACTIVE( l_U671, 1 );
    SET_CAM_PROPAGATE( l_U671, 0 );
    l_U145 = 1;
    return;
}

void sub_57391()
{
    l_U148 = 0;
    return;
}

void sub_57419()
{
    l_U148 = 0;
    return;
}

void sub_57499()
{
    return;
}

